import{d as Jn,_ as Yn,o as yn,c as wn,a as Jt,b as ri,e as pi}from"./index-D5FH2qji.js";var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(xt){return xt&&xt.__esModule&&Object.prototype.hasOwnProperty.call(xt,"default")?xt.default:xt}function $n(xt){if(xt.__esModule)return xt;var pt=xt.default;if(typeof pt=="function"){var G=function Ct(){return this instanceof Ct?Reflect.construct(pt,arguments,this.constructor):pt.apply(this,arguments)};G.prototype=pt.prototype}else G={};return Object.defineProperty(G,"__esModule",{value:!0}),Object.keys(xt).forEach(function(Ct){var bt=Object.getOwnPropertyDescriptor(xt,Ct);Object.defineProperty(G,Ct,bt.get?bt:{enumerable:!0,get:function(){return xt[Ct]}})}),G}function tr(xt){throw new Error('Could not dynamically require "'+xt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bn={exports:{}};const er={},ir=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:"Module"})),Ui=$n(ir);var Hi={exports:{}},xn;function nr(){return xn||(xn=1,function(xt,pt){(function(G,Ct){Ct(pt)})(rn,function(G){var Ct=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],bt=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],L="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",re="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Yt={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},be="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Te={5:be,"5module":be+" export import",6:be+" const class extends export import super"},te=/^in(stanceof)?$/,mt=new RegExp("["+re+"]"),Ae=new RegExp("["+re+L+"]");function B(u,w){for(var E=65536,R=0;R<w.length;R+=2){if(E+=w[R],E>u)return!1;if(E+=w[R+1],E>=u)return!0}return!1}function se(u,w){return u<65?u===36:u<91?!0:u<97?u===95:u<123?!0:u<=65535?u>=170&&mt.test(String.fromCharCode(u)):w===!1?!1:B(u,bt)}function rt(u,w){return u<48?u===36:u<58?!0:u<65?!1:u<91?!0:u<97?u===95:u<123?!0:u<=65535?u>=170&&Ae.test(String.fromCharCode(u)):w===!1?!1:B(u,bt)||B(u,Ct)}var Ot=function(w,E){E===void 0&&(E={}),this.label=w,this.keyword=E.keyword,this.beforeExpr=!!E.beforeExpr,this.startsExpr=!!E.startsExpr,this.isLoop=!!E.isLoop,this.isAssign=!!E.isAssign,this.prefix=!!E.prefix,this.postfix=!!E.postfix,this.binop=E.binop||null,this.updateContext=null};function at(u,w){return new Ot(u,{beforeExpr:!0,binop:w})}var Se={beforeExpr:!0},yt={startsExpr:!0},qt={};function Lt(u,w){return w===void 0&&(w={}),w.keyword=u,qt[u]=new Ot(u,w)}var z={num:new Ot("num",yt),regexp:new Ot("regexp",yt),string:new Ot("string",yt),name:new Ot("name",yt),privateId:new Ot("privateId",yt),eof:new Ot("eof"),bracketL:new Ot("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ot("]"),braceL:new Ot("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ot("}"),parenL:new Ot("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ot(")"),comma:new Ot(",",Se),semi:new Ot(";",Se),colon:new Ot(":",Se),dot:new Ot("."),question:new Ot("?",Se),questionDot:new Ot("?."),arrow:new Ot("=>",Se),template:new Ot("template"),invalidTemplate:new Ot("invalidTemplate"),ellipsis:new Ot("...",Se),backQuote:new Ot("`",yt),dollarBraceL:new Ot("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ot("=",{beforeExpr:!0,isAssign:!0}),assign:new Ot("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ot("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ot("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:at("||",1),logicalAND:at("&&",2),bitwiseOR:at("|",3),bitwiseXOR:at("^",4),bitwiseAND:at("&",5),equality:at("==/!=/===/!==",6),relational:at("</>/<=/>=",7),bitShift:at("<</>>/>>>",8),plusMin:new Ot("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:at("%",10),star:at("*",10),slash:at("/",10),starstar:new Ot("**",{beforeExpr:!0}),coalesce:at("??",1),_break:Lt("break"),_case:Lt("case",Se),_catch:Lt("catch"),_continue:Lt("continue"),_debugger:Lt("debugger"),_default:Lt("default",Se),_do:Lt("do",{isLoop:!0,beforeExpr:!0}),_else:Lt("else",Se),_finally:Lt("finally"),_for:Lt("for",{isLoop:!0}),_function:Lt("function",yt),_if:Lt("if"),_return:Lt("return",Se),_switch:Lt("switch"),_throw:Lt("throw",Se),_try:Lt("try"),_var:Lt("var"),_const:Lt("const"),_while:Lt("while",{isLoop:!0}),_with:Lt("with"),_new:Lt("new",{beforeExpr:!0,startsExpr:!0}),_this:Lt("this",yt),_super:Lt("super",yt),_class:Lt("class",yt),_extends:Lt("extends",Se),_export:Lt("export"),_import:Lt("import",yt),_null:Lt("null",yt),_true:Lt("true",yt),_false:Lt("false",yt),_in:Lt("in",{beforeExpr:!0,binop:7}),_instanceof:Lt("instanceof",{beforeExpr:!0,binop:7}),_typeof:Lt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Lt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Lt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Kt=/\r\n?|\n|\u2028|\u2029/,Ee=new RegExp(Kt.source,"g");function Ut(u){return u===10||u===13||u===8232||u===8233}function Oe(u,w,E){E===void 0&&(E=u.length);for(var R=w;R<E;R++){var q=u.charCodeAt(R);if(Ut(q))return R<E-1&&q===13&&u.charCodeAt(R+1)===10?R+2:R+1}return-1}var Be=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ee=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ce=Object.prototype,ot=ce.hasOwnProperty,Ue=ce.toString,J=Object.hasOwn||function(u,w){return ot.call(u,w)},le=Array.isArray||function(u){return Ue.call(u)==="[object Array]"},Ce=Object.create(null);function vt(u){return Ce[u]||(Ce[u]=new RegExp("^(?:"+u.replace(/ /g,"|")+")$"))}function ie(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}var si=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,qe=function(w,E){this.line=w,this.column=E};qe.prototype.offset=function(w){return new qe(this.line,this.column+w)};var ke=function(w,E,R){this.start=E,this.end=R,w.sourceFile!==null&&(this.source=w.sourceFile)};function ai(u,w){for(var E=1,R=0;;){var q=Oe(u,R,w);if(q<0)return new qe(E,w-R);++E,R=q}}var Rt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ne=!1;function Ze(u){var w={};for(var E in Rt)w[E]=u&&J(u,E)?u[E]:Rt[E];if(w.ecmaVersion==="latest"?w.ecmaVersion=1e8:w.ecmaVersion==null?(!Ne&&typeof console=="object"&&console.warn&&(Ne=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),w.ecmaVersion=11):w.ecmaVersion>=2015&&(w.ecmaVersion-=2009),w.allowReserved==null&&(w.allowReserved=w.ecmaVersion<5),(!u||u.allowHashBang==null)&&(w.allowHashBang=w.ecmaVersion>=14),le(w.onToken)){var R=w.onToken;w.onToken=function(q){return R.push(q)}}return le(w.onComment)&&(w.onComment=Ge(w,w.onComment)),w}function Ge(u,w){return function(E,R,q,Y,Q,ct){var gt={type:E?"Block":"Line",value:R,start:q,end:Y};u.locations&&(gt.loc=new ke(this,Q,ct)),u.ranges&&(gt.range=[q,Y]),w.push(gt)}}var kt=1,Nt=2,Tt=4,vi=8,ze=16,mi=32,We=64,yi=128,je=256,ui=kt|Nt|je;function oi(u,w){return Nt|(u?Tt:0)|(w?vi:0)}var ae=0,ue=1,Zt=2,oe=3,Bt=4,n=5,t=function(w,E,R){this.options=w=Ze(w),this.sourceFile=w.sourceFile,this.keywords=vt(Te[w.ecmaVersion>=6?6:w.sourceType==="module"?"5module":5]);var q="";w.allowReserved!==!0&&(q=Yt[w.ecmaVersion>=6?6:w.ecmaVersion===5?5:3],w.sourceType==="module"&&(q+=" await")),this.reservedWords=vt(q);var Y=(q?q+" ":"")+Yt.strict;this.reservedWordsStrict=vt(Y),this.reservedWordsStrictBind=vt(Y+" "+Yt.strictBind),this.input=String(E),this.containsEsc=!1,R?(this.pos=R,this.lineStart=this.input.lastIndexOf(`
`,R-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Kt).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=w.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&w.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(kt),this.regexpState=null,this.privateNameStack=[]},e={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};t.prototype.parse=function(){var w=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(w)},e.inFunction.get=function(){return(this.currentVarScope().flags&Nt)>0},e.inGenerator.get=function(){return(this.currentVarScope().flags&vi)>0&&!this.currentVarScope().inClassFieldInit},e.inAsync.get=function(){return(this.currentVarScope().flags&Tt)>0&&!this.currentVarScope().inClassFieldInit},e.canAwait.get=function(){for(var u=this.scopeStack.length-1;u>=0;u--){var w=this.scopeStack[u];if(w.inClassFieldInit||w.flags&je)return!1;if(w.flags&Nt)return(w.flags&Tt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},e.allowSuper.get=function(){var u=this.currentThisScope(),w=u.flags,E=u.inClassFieldInit;return(w&We)>0||E||this.options.allowSuperOutsideMethod},e.allowDirectSuper.get=function(){return(this.currentThisScope().flags&yi)>0},e.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},e.allowNewDotTarget.get=function(){var u=this.currentThisScope(),w=u.flags,E=u.inClassFieldInit;return(w&(Nt|je))>0||E},e.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&je)>0},t.extend=function(){for(var w=[],E=arguments.length;E--;)w[E]=arguments[E];for(var R=this,q=0;q<w.length;q++)R=w[q](R);return R},t.parse=function(w,E){return new this(E,w).parse()},t.parseExpressionAt=function(w,E,R){var q=new this(R,w,E);return q.nextToken(),q.parseExpression()},t.tokenizer=function(w,E){return new this(E,w)},Object.defineProperties(t.prototype,e);var i=t.prototype,r=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;i.strictDirective=function(u){if(this.options.ecmaVersion<5)return!1;for(;;){ee.lastIndex=u,u+=ee.exec(this.input)[0].length;var w=r.exec(this.input.slice(u));if(!w)return!1;if((w[1]||w[2])==="use strict"){ee.lastIndex=u+w[0].length;var E=ee.exec(this.input),R=E.index+E[0].length,q=this.input.charAt(R);return q===";"||q==="}"||Kt.test(E[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(q)||q==="!"&&this.input.charAt(R+1)==="=")}u+=w[0].length,ee.lastIndex=u,u+=ee.exec(this.input)[0].length,this.input[u]===";"&&u++}},i.eat=function(u){return this.type===u?(this.next(),!0):!1},i.isContextual=function(u){return this.type===z.name&&this.value===u&&!this.containsEsc},i.eatContextual=function(u){return this.isContextual(u)?(this.next(),!0):!1},i.expectContextual=function(u){this.eatContextual(u)||this.unexpected()},i.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||Kt.test(this.input.slice(this.lastTokEnd,this.start))},i.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},i.semicolon=function(){!this.eat(z.semi)&&!this.insertSemicolon()&&this.unexpected()},i.afterTrailingComma=function(u,w){if(this.type===u)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),w||this.next(),!0},i.expect=function(u){this.eat(u)||this.unexpected()},i.unexpected=function(u){this.raise(u??this.start,"Unexpected token")};var s=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};i.checkPatternErrors=function(u,w){if(u){u.trailingComma>-1&&this.raiseRecoverable(u.trailingComma,"Comma is not permitted after the rest element");var E=w?u.parenthesizedAssign:u.parenthesizedBind;E>-1&&this.raiseRecoverable(E,w?"Assigning to rvalue":"Parenthesized pattern")}},i.checkExpressionErrors=function(u,w){if(!u)return!1;var E=u.shorthandAssign,R=u.doubleProto;if(!w)return E>=0||R>=0;E>=0&&this.raise(E,"Shorthand property assignments are valid only in destructuring patterns"),R>=0&&this.raiseRecoverable(R,"Redefinition of __proto__ property")},i.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},i.isSimpleAssignTarget=function(u){return u.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(u.expression):u.type==="Identifier"||u.type==="MemberExpression"};var a=t.prototype;a.parseTopLevel=function(u){var w=Object.create(null);for(u.body||(u.body=[]);this.type!==z.eof;){var E=this.parseStatement(null,!0,w);u.body.push(E)}if(this.inModule)for(var R=0,q=Object.keys(this.undefinedExports);R<q.length;R+=1){var Y=q[R];this.raiseRecoverable(this.undefinedExports[Y].start,"Export '"+Y+"' is not defined")}return this.adaptDirectivePrologue(u.body),this.next(),u.sourceType=this.options.sourceType,this.finishNode(u,"Program")};var o={kind:"loop"},h={kind:"switch"};a.isLet=function(u){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ee.lastIndex=this.pos;var w=ee.exec(this.input),E=this.pos+w[0].length,R=this.input.charCodeAt(E);if(R===91||R===92)return!0;if(u)return!1;if(R===123||R>55295&&R<56320)return!0;if(se(R,!0)){for(var q=E+1;rt(R=this.input.charCodeAt(q),!0);)++q;if(R===92||R>55295&&R<56320)return!0;var Y=this.input.slice(E,q);if(!te.test(Y))return!0}return!1},a.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ee.lastIndex=this.pos;var u=ee.exec(this.input),w=this.pos+u[0].length,E;return!Kt.test(this.input.slice(this.pos,w))&&this.input.slice(w,w+8)==="function"&&(w+8===this.input.length||!(rt(E=this.input.charCodeAt(w+8))||E>55295&&E<56320))},a.parseStatement=function(u,w,E){var R=this.type,q=this.startNode(),Y;switch(this.isLet(u)&&(R=z._var,Y="let"),R){case z._break:case z._continue:return this.parseBreakContinueStatement(q,R.keyword);case z._debugger:return this.parseDebuggerStatement(q);case z._do:return this.parseDoStatement(q);case z._for:return this.parseForStatement(q);case z._function:return u&&(this.strict||u!=="if"&&u!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(q,!1,!u);case z._class:return u&&this.unexpected(),this.parseClass(q,!0);case z._if:return this.parseIfStatement(q);case z._return:return this.parseReturnStatement(q);case z._switch:return this.parseSwitchStatement(q);case z._throw:return this.parseThrowStatement(q);case z._try:return this.parseTryStatement(q);case z._const:case z._var:return Y=Y||this.value,u&&Y!=="var"&&this.unexpected(),this.parseVarStatement(q,Y);case z._while:return this.parseWhileStatement(q);case z._with:return this.parseWithStatement(q);case z.braceL:return this.parseBlock(!0,q);case z.semi:return this.parseEmptyStatement(q);case z._export:case z._import:if(this.options.ecmaVersion>10&&R===z._import){ee.lastIndex=this.pos;var Q=ee.exec(this.input),ct=this.pos+Q[0].length,gt=this.input.charCodeAt(ct);if(gt===40||gt===46)return this.parseExpressionStatement(q,this.parseExpression())}return this.options.allowImportExportEverywhere||(w||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),R===z._import?this.parseImport(q):this.parseExport(q,E);default:if(this.isAsyncFunction())return u&&this.unexpected(),this.next(),this.parseFunctionStatement(q,!0,!u);var zt=this.value,At=this.parseExpression();return R===z.name&&At.type==="Identifier"&&this.eat(z.colon)?this.parseLabeledStatement(q,zt,At,u):this.parseExpressionStatement(q,At)}},a.parseBreakContinueStatement=function(u,w){var E=w==="break";this.next(),this.eat(z.semi)||this.insertSemicolon()?u.label=null:this.type!==z.name?this.unexpected():(u.label=this.parseIdent(),this.semicolon());for(var R=0;R<this.labels.length;++R){var q=this.labels[R];if((u.label==null||q.name===u.label.name)&&(q.kind!=null&&(E||q.kind==="loop")||u.label&&E))break}return R===this.labels.length&&this.raise(u.start,"Unsyntactic "+w),this.finishNode(u,E?"BreakStatement":"ContinueStatement")},a.parseDebuggerStatement=function(u){return this.next(),this.semicolon(),this.finishNode(u,"DebuggerStatement")},a.parseDoStatement=function(u){return this.next(),this.labels.push(o),u.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),u.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(u,"DoWhileStatement")},a.parseForStatement=function(u){this.next();var w=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(o),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return w>-1&&this.unexpected(w),this.parseFor(u,null);var E=this.isLet();if(this.type===z._var||this.type===z._const||E){var R=this.startNode(),q=E?"let":this.value;return this.next(),this.parseVar(R,!0,q),this.finishNode(R,"VariableDeclaration"),(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&R.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===z._in?w>-1&&this.unexpected(w):u.await=w>-1),this.parseForIn(u,R)):(w>-1&&this.unexpected(w),this.parseFor(u,R))}var Y=this.isContextual("let"),Q=!1,ct=this.containsEsc,gt=new s,zt=this.start,At=w>-1?this.parseExprSubscripts(gt,"await"):this.parseExpression(!0,gt);return this.type===z._in||(Q=this.options.ecmaVersion>=6&&this.isContextual("of"))?(w>-1?(this.type===z._in&&this.unexpected(w),u.await=!0):Q&&this.options.ecmaVersion>=8&&(At.start===zt&&!ct&&At.type==="Identifier"&&At.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(u.await=!1)),Y&&Q&&this.raise(At.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(At,!1,gt),this.checkLValPattern(At),this.parseForIn(u,At)):(this.checkExpressionErrors(gt,!0),w>-1&&this.unexpected(w),this.parseFor(u,At))},a.parseFunctionStatement=function(u,w,E){return this.next(),this.parseFunction(u,f|(E?0:g),!1,w)},a.parseIfStatement=function(u){return this.next(),u.test=this.parseParenExpression(),u.consequent=this.parseStatement("if"),u.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(u,"IfStatement")},a.parseReturnStatement=function(u){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?u.argument=null:(u.argument=this.parseExpression(),this.semicolon()),this.finishNode(u,"ReturnStatement")},a.parseSwitchStatement=function(u){this.next(),u.discriminant=this.parseParenExpression(),u.cases=[],this.expect(z.braceL),this.labels.push(h),this.enterScope(0);for(var w,E=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var R=this.type===z._case;w&&this.finishNode(w,"SwitchCase"),u.cases.push(w=this.startNode()),w.consequent=[],this.next(),R?w.test=this.parseExpression():(E&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),E=!0,w.test=null),this.expect(z.colon)}else w||this.unexpected(),w.consequent.push(this.parseStatement(null));return this.exitScope(),w&&this.finishNode(w,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(u,"SwitchStatement")},a.parseThrowStatement=function(u){return this.next(),Kt.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),u.argument=this.parseExpression(),this.semicolon(),this.finishNode(u,"ThrowStatement")};var l=[];a.parseCatchClauseParam=function(){var u=this.parseBindingAtom(),w=u.type==="Identifier";return this.enterScope(w?mi:0),this.checkLValPattern(u,w?Bt:Zt),this.expect(z.parenR),u},a.parseTryStatement=function(u){if(this.next(),u.block=this.parseBlock(),u.handler=null,this.type===z._catch){var w=this.startNode();this.next(),this.eat(z.parenL)?w.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),w.param=null,this.enterScope(0)),w.body=this.parseBlock(!1),this.exitScope(),u.handler=this.finishNode(w,"CatchClause")}return u.finalizer=this.eat(z._finally)?this.parseBlock():null,!u.handler&&!u.finalizer&&this.raise(u.start,"Missing catch or finally clause"),this.finishNode(u,"TryStatement")},a.parseVarStatement=function(u,w,E){return this.next(),this.parseVar(u,!1,w,E),this.semicolon(),this.finishNode(u,"VariableDeclaration")},a.parseWhileStatement=function(u){return this.next(),u.test=this.parseParenExpression(),this.labels.push(o),u.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(u,"WhileStatement")},a.parseWithStatement=function(u){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),u.object=this.parseParenExpression(),u.body=this.parseStatement("with"),this.finishNode(u,"WithStatement")},a.parseEmptyStatement=function(u){return this.next(),this.finishNode(u,"EmptyStatement")},a.parseLabeledStatement=function(u,w,E,R){for(var q=0,Y=this.labels;q<Y.length;q+=1){var Q=Y[q];Q.name===w&&this.raise(E.start,"Label '"+w+"' is already declared")}for(var ct=this.type.isLoop?"loop":this.type===z._switch?"switch":null,gt=this.labels.length-1;gt>=0;gt--){var zt=this.labels[gt];if(zt.statementStart===u.start)zt.statementStart=this.start,zt.kind=ct;else break}return this.labels.push({name:w,kind:ct,statementStart:this.start}),u.body=this.parseStatement(R?R.indexOf("label")===-1?R+"label":R:"label"),this.labels.pop(),u.label=E,this.finishNode(u,"LabeledStatement")},a.parseExpressionStatement=function(u,w){return u.expression=w,this.semicolon(),this.finishNode(u,"ExpressionStatement")},a.parseBlock=function(u,w,E){for(u===void 0&&(u=!0),w===void 0&&(w=this.startNode()),w.body=[],this.expect(z.braceL),u&&this.enterScope(0);this.type!==z.braceR;){var R=this.parseStatement(null);w.body.push(R)}return E&&(this.strict=!1),this.next(),u&&this.exitScope(),this.finishNode(w,"BlockStatement")},a.parseFor=function(u,w){return u.init=w,this.expect(z.semi),u.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),u.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),u.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(u,"ForStatement")},a.parseForIn=function(u,w){var E=this.type===z._in;return this.next(),w.type==="VariableDeclaration"&&w.declarations[0].init!=null&&(!E||this.options.ecmaVersion<8||this.strict||w.kind!=="var"||w.declarations[0].id.type!=="Identifier")&&this.raise(w.start,(E?"for-in":"for-of")+" loop variable declaration may not have an initializer"),u.left=w,u.right=E?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),u.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(u,E?"ForInStatement":"ForOfStatement")},a.parseVar=function(u,w,E,R){for(u.declarations=[],u.kind=E;;){var q=this.startNode();if(this.parseVarId(q,E),this.eat(z.eq)?q.init=this.parseMaybeAssign(w):!R&&E==="const"&&!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!R&&q.id.type!=="Identifier"&&!(w&&(this.type===z._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):q.init=null,u.declarations.push(this.finishNode(q,"VariableDeclarator")),!this.eat(z.comma))break}return u},a.parseVarId=function(u,w){u.id=this.parseBindingAtom(),this.checkLValPattern(u.id,w==="var"?ue:Zt,!1)};var f=1,g=2,d=4;a.parseFunction=function(u,w,E,R,q){this.initFunction(u),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!R)&&(this.type===z.star&&w&g&&this.unexpected(),u.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(u.async=!!R),w&f&&(u.id=w&d&&this.type!==z.name?null:this.parseIdent(),u.id&&!(w&g)&&this.checkLValSimple(u.id,this.strict||u.generator||u.async?this.treatFunctionsAsVar?ue:Zt:oe));var Y=this.yieldPos,Q=this.awaitPos,ct=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(oi(u.async,u.generator)),w&f||(u.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(u),this.parseFunctionBody(u,E,!1,q),this.yieldPos=Y,this.awaitPos=Q,this.awaitIdentPos=ct,this.finishNode(u,w&f?"FunctionDeclaration":"FunctionExpression")},a.parseFunctionParams=function(u){this.expect(z.parenL),u.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},a.parseClass=function(u,w){this.next();var E=this.strict;this.strict=!0,this.parseClassId(u,w),this.parseClassSuper(u);var R=this.enterClassBody(),q=this.startNode(),Y=!1;for(q.body=[],this.expect(z.braceL);this.type!==z.braceR;){var Q=this.parseClassElement(u.superClass!==null);Q&&(q.body.push(Q),Q.type==="MethodDefinition"&&Q.kind==="constructor"?(Y&&this.raiseRecoverable(Q.start,"Duplicate constructor in the same class"),Y=!0):Q.key&&Q.key.type==="PrivateIdentifier"&&c(R,Q)&&this.raiseRecoverable(Q.key.start,"Identifier '#"+Q.key.name+"' has already been declared"))}return this.strict=E,this.next(),u.body=this.finishNode(q,"ClassBody"),this.exitClassBody(),this.finishNode(u,w?"ClassDeclaration":"ClassExpression")},a.parseClassElement=function(u){if(this.eat(z.semi))return null;var w=this.options.ecmaVersion,E=this.startNode(),R="",q=!1,Y=!1,Q="method",ct=!1;if(this.eatContextual("static")){if(w>=13&&this.eat(z.braceL))return this.parseClassStaticBlock(E),E;this.isClassElementNameStart()||this.type===z.star?ct=!0:R="static"}if(E.static=ct,!R&&w>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===z.star)&&!this.canInsertSemicolon()?Y=!0:R="async"),!R&&(w>=9||!Y)&&this.eat(z.star)&&(q=!0),!R&&!Y&&!q){var gt=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Q=gt:R=gt)}if(R?(E.computed=!1,E.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),E.key.name=R,this.finishNode(E.key,"Identifier")):this.parseClassElementName(E),w<13||this.type===z.parenL||Q!=="method"||q||Y){var zt=!E.static&&v(E,"constructor"),At=zt&&u;zt&&Q!=="method"&&this.raise(E.key.start,"Constructor can't have get/set modifier"),E.kind=zt?"constructor":Q,this.parseClassMethod(E,q,Y,At)}else this.parseClassField(E);return E},a.isClassElementNameStart=function(){return this.type===z.name||this.type===z.privateId||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword},a.parseClassElementName=function(u){this.type===z.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),u.computed=!1,u.key=this.parsePrivateIdent()):this.parsePropertyName(u)},a.parseClassMethod=function(u,w,E,R){var q=u.key;u.kind==="constructor"?(w&&this.raise(q.start,"Constructor can't be a generator"),E&&this.raise(q.start,"Constructor can't be an async method")):u.static&&v(u,"prototype")&&this.raise(q.start,"Classes may not have a static property named prototype");var Y=u.value=this.parseMethod(w,E,R);return u.kind==="get"&&Y.params.length!==0&&this.raiseRecoverable(Y.start,"getter should have no params"),u.kind==="set"&&Y.params.length!==1&&this.raiseRecoverable(Y.start,"setter should have exactly one param"),u.kind==="set"&&Y.params[0].type==="RestElement"&&this.raiseRecoverable(Y.params[0].start,"Setter cannot use rest params"),this.finishNode(u,"MethodDefinition")},a.parseClassField=function(u){if(v(u,"constructor")?this.raise(u.key.start,"Classes can't have a field named 'constructor'"):u.static&&v(u,"prototype")&&this.raise(u.key.start,"Classes can't have a static field named 'prototype'"),this.eat(z.eq)){var w=this.currentThisScope(),E=w.inClassFieldInit;w.inClassFieldInit=!0,u.value=this.parseMaybeAssign(),w.inClassFieldInit=E}else u.value=null;return this.semicolon(),this.finishNode(u,"PropertyDefinition")},a.parseClassStaticBlock=function(u){u.body=[];var w=this.labels;for(this.labels=[],this.enterScope(je|We);this.type!==z.braceR;){var E=this.parseStatement(null);u.body.push(E)}return this.next(),this.exitScope(),this.labels=w,this.finishNode(u,"StaticBlock")},a.parseClassId=function(u,w){this.type===z.name?(u.id=this.parseIdent(),w&&this.checkLValSimple(u.id,Zt,!1)):(w===!0&&this.unexpected(),u.id=null)},a.parseClassSuper=function(u){u.superClass=this.eat(z._extends)?this.parseExprSubscripts(null,!1):null},a.enterClassBody=function(){var u={declared:Object.create(null),used:[]};return this.privateNameStack.push(u),u.declared},a.exitClassBody=function(){var u=this.privateNameStack.pop(),w=u.declared,E=u.used;if(this.options.checkPrivateFields)for(var R=this.privateNameStack.length,q=R===0?null:this.privateNameStack[R-1],Y=0;Y<E.length;++Y){var Q=E[Y];J(w,Q.name)||(q?q.used.push(Q):this.raiseRecoverable(Q.start,"Private field '#"+Q.name+"' must be declared in an enclosing class"))}};function c(u,w){var E=w.key.name,R=u[E],q="true";return w.type==="MethodDefinition"&&(w.kind==="get"||w.kind==="set")&&(q=(w.static?"s":"i")+w.kind),R==="iget"&&q==="iset"||R==="iset"&&q==="iget"||R==="sget"&&q==="sset"||R==="sset"&&q==="sget"?(u[E]="true",!1):R?!0:(u[E]=q,!1)}function v(u,w){var E=u.computed,R=u.key;return!E&&(R.type==="Identifier"&&R.name===w||R.type==="Literal"&&R.value===w)}a.parseExportAllDeclaration=function(u,w){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(u.exported=this.parseModuleExportName(),this.checkExport(w,u.exported,this.lastTokStart)):u.exported=null),this.expectContextual("from"),this.type!==z.string&&this.unexpected(),u.source=this.parseExprAtom(),this.semicolon(),this.finishNode(u,"ExportAllDeclaration")},a.parseExport=function(u,w){if(this.next(),this.eat(z.star))return this.parseExportAllDeclaration(u,w);if(this.eat(z._default))return this.checkExport(w,"default",this.lastTokStart),u.declaration=this.parseExportDefaultDeclaration(),this.finishNode(u,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())u.declaration=this.parseExportDeclaration(u),u.declaration.type==="VariableDeclaration"?this.checkVariableExport(w,u.declaration.declarations):this.checkExport(w,u.declaration.id,u.declaration.id.start),u.specifiers=[],u.source=null;else{if(u.declaration=null,u.specifiers=this.parseExportSpecifiers(w),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),u.source=this.parseExprAtom();else{for(var E=0,R=u.specifiers;E<R.length;E+=1){var q=R[E];this.checkUnreserved(q.local),this.checkLocalExport(q.local),q.local.type==="Literal"&&this.raise(q.local.start,"A string literal cannot be used as an exported binding without `from`.")}u.source=null}this.semicolon()}return this.finishNode(u,"ExportNamedDeclaration")},a.parseExportDeclaration=function(u){return this.parseStatement(null)},a.parseExportDefaultDeclaration=function(){var u;if(this.type===z._function||(u=this.isAsyncFunction())){var w=this.startNode();return this.next(),u&&this.next(),this.parseFunction(w,f|d,!1,u)}else if(this.type===z._class){var E=this.startNode();return this.parseClass(E,"nullableID")}else{var R=this.parseMaybeAssign();return this.semicolon(),R}},a.checkExport=function(u,w,E){u&&(typeof w!="string"&&(w=w.type==="Identifier"?w.name:w.value),J(u,w)&&this.raiseRecoverable(E,"Duplicate export '"+w+"'"),u[w]=!0)},a.checkPatternExport=function(u,w){var E=w.type;if(E==="Identifier")this.checkExport(u,w,w.start);else if(E==="ObjectPattern")for(var R=0,q=w.properties;R<q.length;R+=1){var Y=q[R];this.checkPatternExport(u,Y)}else if(E==="ArrayPattern")for(var Q=0,ct=w.elements;Q<ct.length;Q+=1){var gt=ct[Q];gt&&this.checkPatternExport(u,gt)}else E==="Property"?this.checkPatternExport(u,w.value):E==="AssignmentPattern"?this.checkPatternExport(u,w.left):E==="RestElement"&&this.checkPatternExport(u,w.argument)},a.checkVariableExport=function(u,w){if(u)for(var E=0,R=w;E<R.length;E+=1){var q=R[E];this.checkPatternExport(u,q.id)}},a.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},a.parseExportSpecifier=function(u){var w=this.startNode();return w.local=this.parseModuleExportName(),w.exported=this.eatContextual("as")?this.parseModuleExportName():w.local,this.checkExport(u,w.exported,w.exported.start),this.finishNode(w,"ExportSpecifier")},a.parseExportSpecifiers=function(u){var w=[],E=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(E)E=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;w.push(this.parseExportSpecifier(u))}return w},a.parseImport=function(u){return this.next(),this.type===z.string?(u.specifiers=l,u.source=this.parseExprAtom()):(u.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),u.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(u,"ImportDeclaration")},a.parseImportSpecifier=function(){var u=this.startNode();return u.imported=this.parseModuleExportName(),this.eatContextual("as")?u.local=this.parseIdent():(this.checkUnreserved(u.imported),u.local=u.imported),this.checkLValSimple(u.local,Zt),this.finishNode(u,"ImportSpecifier")},a.parseImportDefaultSpecifier=function(){var u=this.startNode();return u.local=this.parseIdent(),this.checkLValSimple(u.local,Zt),this.finishNode(u,"ImportDefaultSpecifier")},a.parseImportNamespaceSpecifier=function(){var u=this.startNode();return this.next(),this.expectContextual("as"),u.local=this.parseIdent(),this.checkLValSimple(u.local,Zt),this.finishNode(u,"ImportNamespaceSpecifier")},a.parseImportSpecifiers=function(){var u=[],w=!0;if(this.type===z.name&&(u.push(this.parseImportDefaultSpecifier()),!this.eat(z.comma)))return u;if(this.type===z.star)return u.push(this.parseImportNamespaceSpecifier()),u;for(this.expect(z.braceL);!this.eat(z.braceR);){if(w)w=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;u.push(this.parseImportSpecifier())}return u},a.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===z.string){var u=this.parseLiteral(this.value);return si.test(u.value)&&this.raise(u.start,"An export name cannot include a lone surrogate."),u}return this.parseIdent(!0)},a.adaptDirectivePrologue=function(u){for(var w=0;w<u.length&&this.isDirectiveCandidate(u[w]);++w)u[w].directive=u[w].expression.raw.slice(1,-1)},a.isDirectiveCandidate=function(u){return this.options.ecmaVersion>=5&&u.type==="ExpressionStatement"&&u.expression.type==="Literal"&&typeof u.expression.value=="string"&&(this.input[u.start]==='"'||this.input[u.start]==="'")};var S=t.prototype;S.toAssignable=function(u,w,E){if(this.options.ecmaVersion>=6&&u)switch(u.type){case"Identifier":this.inAsync&&u.name==="await"&&this.raise(u.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":u.type="ObjectPattern",E&&this.checkPatternErrors(E,!0);for(var R=0,q=u.properties;R<q.length;R+=1){var Y=q[R];this.toAssignable(Y,w),Y.type==="RestElement"&&(Y.argument.type==="ArrayPattern"||Y.argument.type==="ObjectPattern")&&this.raise(Y.argument.start,"Unexpected token")}break;case"Property":u.kind!=="init"&&this.raise(u.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(u.value,w);break;case"ArrayExpression":u.type="ArrayPattern",E&&this.checkPatternErrors(E,!0),this.toAssignableList(u.elements,w);break;case"SpreadElement":u.type="RestElement",this.toAssignable(u.argument,w),u.argument.type==="AssignmentPattern"&&this.raise(u.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":u.operator!=="="&&this.raise(u.left.end,"Only '=' operator can be used for specifying default value."),u.type="AssignmentPattern",delete u.operator,this.toAssignable(u.left,w);break;case"ParenthesizedExpression":this.toAssignable(u.expression,w,E);break;case"ChainExpression":this.raiseRecoverable(u.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!w)break;default:this.raise(u.start,"Assigning to rvalue")}else E&&this.checkPatternErrors(E,!0);return u},S.toAssignableList=function(u,w){for(var E=u.length,R=0;R<E;R++){var q=u[R];q&&this.toAssignable(q,w)}if(E){var Y=u[E-1];this.options.ecmaVersion===6&&w&&Y&&Y.type==="RestElement"&&Y.argument.type!=="Identifier"&&this.unexpected(Y.argument.start)}return u},S.parseSpread=function(u){var w=this.startNode();return this.next(),w.argument=this.parseMaybeAssign(!1,u),this.finishNode(w,"SpreadElement")},S.parseRestBinding=function(){var u=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==z.name&&this.unexpected(),u.argument=this.parseBindingAtom(),this.finishNode(u,"RestElement")},S.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var u=this.startNode();return this.next(),u.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(u,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()},S.parseBindingList=function(u,w,E,R){for(var q=[],Y=!0;!this.eat(u);)if(Y?Y=!1:this.expect(z.comma),w&&this.type===z.comma)q.push(null);else{if(E&&this.afterTrailingComma(u))break;if(this.type===z.ellipsis){var Q=this.parseRestBinding();this.parseBindingListItem(Q),q.push(Q),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(u);break}else q.push(this.parseAssignableListItem(R))}return q},S.parseAssignableListItem=function(u){var w=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(w),w},S.parseBindingListItem=function(u){return u},S.parseMaybeDefault=function(u,w,E){if(E=E||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return E;var R=this.startNodeAt(u,w);return R.left=E,R.right=this.parseMaybeAssign(),this.finishNode(R,"AssignmentPattern")},S.checkLValSimple=function(u,w,E){w===void 0&&(w=ae);var R=w!==ae;switch(u.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(u.name)&&this.raiseRecoverable(u.start,(R?"Binding ":"Assigning to ")+u.name+" in strict mode"),R&&(w===Zt&&u.name==="let"&&this.raiseRecoverable(u.start,"let is disallowed as a lexically bound name"),E&&(J(E,u.name)&&this.raiseRecoverable(u.start,"Argument name clash"),E[u.name]=!0),w!==n&&this.declareName(u.name,w,u.start));break;case"ChainExpression":this.raiseRecoverable(u.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":R&&this.raiseRecoverable(u.start,"Binding member expression");break;case"ParenthesizedExpression":return R&&this.raiseRecoverable(u.start,"Binding parenthesized expression"),this.checkLValSimple(u.expression,w,E);default:this.raise(u.start,(R?"Binding":"Assigning to")+" rvalue")}},S.checkLValPattern=function(u,w,E){switch(w===void 0&&(w=ae),u.type){case"ObjectPattern":for(var R=0,q=u.properties;R<q.length;R+=1){var Y=q[R];this.checkLValInnerPattern(Y,w,E)}break;case"ArrayPattern":for(var Q=0,ct=u.elements;Q<ct.length;Q+=1){var gt=ct[Q];gt&&this.checkLValInnerPattern(gt,w,E)}break;default:this.checkLValSimple(u,w,E)}},S.checkLValInnerPattern=function(u,w,E){switch(w===void 0&&(w=ae),u.type){case"Property":this.checkLValInnerPattern(u.value,w,E);break;case"AssignmentPattern":this.checkLValPattern(u.left,w,E);break;case"RestElement":this.checkLValPattern(u.argument,w,E);break;default:this.checkLValPattern(u,w,E)}};var b=function(w,E,R,q,Y){this.token=w,this.isExpr=!!E,this.preserveSpace=!!R,this.override=q,this.generator=!!Y},x={b_stat:new b("{",!1),b_expr:new b("{",!0),b_tmpl:new b("${",!1),p_stat:new b("(",!1),p_expr:new b("(",!0),q_tmpl:new b("`",!0,!0,function(u){return u.tryReadTemplateToken()}),f_stat:new b("function",!1),f_expr:new b("function",!0),f_expr_gen:new b("function",!0,!1,null,!0),f_gen:new b("function",!1,!1,null,!0)},m=t.prototype;m.initialContext=function(){return[x.b_stat]},m.curContext=function(){return this.context[this.context.length-1]},m.braceIsBlock=function(u){var w=this.curContext();return w===x.f_expr||w===x.f_stat?!0:u===z.colon&&(w===x.b_stat||w===x.b_expr)?!w.isExpr:u===z._return||u===z.name&&this.exprAllowed?Kt.test(this.input.slice(this.lastTokEnd,this.start)):u===z._else||u===z.semi||u===z.eof||u===z.parenR||u===z.arrow?!0:u===z.braceL?w===x.b_stat:u===z._var||u===z._const||u===z.name?!1:!this.exprAllowed},m.inGeneratorContext=function(){for(var u=this.context.length-1;u>=1;u--){var w=this.context[u];if(w.token==="function")return w.generator}return!1},m.updateContext=function(u){var w,E=this.type;E.keyword&&u===z.dot?this.exprAllowed=!1:(w=E.updateContext)?w.call(this,u):this.exprAllowed=E.beforeExpr},m.overrideContext=function(u){this.curContext()!==u&&(this.context[this.context.length-1]=u)},z.parenR.updateContext=z.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var u=this.context.pop();u===x.b_stat&&this.curContext().token==="function"&&(u=this.context.pop()),this.exprAllowed=!u.isExpr},z.braceL.updateContext=function(u){this.context.push(this.braceIsBlock(u)?x.b_stat:x.b_expr),this.exprAllowed=!0},z.dollarBraceL.updateContext=function(){this.context.push(x.b_tmpl),this.exprAllowed=!0},z.parenL.updateContext=function(u){var w=u===z._if||u===z._for||u===z._with||u===z._while;this.context.push(w?x.p_stat:x.p_expr),this.exprAllowed=!0},z.incDec.updateContext=function(){},z._function.updateContext=z._class.updateContext=function(u){u.beforeExpr&&u!==z._else&&!(u===z.semi&&this.curContext()!==x.p_stat)&&!(u===z._return&&Kt.test(this.input.slice(this.lastTokEnd,this.start)))&&!((u===z.colon||u===z.braceL)&&this.curContext()===x.b_stat)?this.context.push(x.f_expr):this.context.push(x.f_stat),this.exprAllowed=!1},z.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},z.backQuote.updateContext=function(){this.curContext()===x.q_tmpl?this.context.pop():this.context.push(x.q_tmpl),this.exprAllowed=!1},z.star.updateContext=function(u){if(u===z._function){var w=this.context.length-1;this.context[w]===x.f_expr?this.context[w]=x.f_expr_gen:this.context[w]=x.f_gen}this.exprAllowed=!0},z.name.updateContext=function(u){var w=!1;this.options.ecmaVersion>=6&&u!==z.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(w=!0),this.exprAllowed=w};var _=t.prototype;_.checkPropClash=function(u,w,E){if(!(this.options.ecmaVersion>=9&&u.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(u.computed||u.method||u.shorthand))){var R=u.key,q;switch(R.type){case"Identifier":q=R.name;break;case"Literal":q=String(R.value);break;default:return}var Y=u.kind;if(this.options.ecmaVersion>=6){q==="__proto__"&&Y==="init"&&(w.proto&&(E?E.doubleProto<0&&(E.doubleProto=R.start):this.raiseRecoverable(R.start,"Redefinition of __proto__ property")),w.proto=!0);return}q="$"+q;var Q=w[q];if(Q){var ct;Y==="init"?ct=this.strict&&Q.init||Q.get||Q.set:ct=Q.init||Q[Y],ct&&this.raiseRecoverable(R.start,"Redefinition of property")}else Q=w[q]={init:!1,get:!1,set:!1};Q[Y]=!0}},_.parseExpression=function(u,w){var E=this.start,R=this.startLoc,q=this.parseMaybeAssign(u,w);if(this.type===z.comma){var Y=this.startNodeAt(E,R);for(Y.expressions=[q];this.eat(z.comma);)Y.expressions.push(this.parseMaybeAssign(u,w));return this.finishNode(Y,"SequenceExpression")}return q},_.parseMaybeAssign=function(u,w,E){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(u);this.exprAllowed=!1}var R=!1,q=-1,Y=-1,Q=-1;w?(q=w.parenthesizedAssign,Y=w.trailingComma,Q=w.doubleProto,w.parenthesizedAssign=w.trailingComma=-1):(w=new s,R=!0);var ct=this.start,gt=this.startLoc;(this.type===z.parenL||this.type===z.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=u==="await");var zt=this.parseMaybeConditional(u,w);if(E&&(zt=E.call(this,zt,ct,gt)),this.type.isAssign){var At=this.startNodeAt(ct,gt);return At.operator=this.value,this.type===z.eq&&(zt=this.toAssignable(zt,!1,w)),R||(w.parenthesizedAssign=w.trailingComma=w.doubleProto=-1),w.shorthandAssign>=zt.start&&(w.shorthandAssign=-1),this.type===z.eq?this.checkLValPattern(zt):this.checkLValSimple(zt),At.left=zt,this.next(),At.right=this.parseMaybeAssign(u),Q>-1&&(w.doubleProto=Q),this.finishNode(At,"AssignmentExpression")}else R&&this.checkExpressionErrors(w,!0);return q>-1&&(w.parenthesizedAssign=q),Y>-1&&(w.trailingComma=Y),zt},_.parseMaybeConditional=function(u,w){var E=this.start,R=this.startLoc,q=this.parseExprOps(u,w);if(this.checkExpressionErrors(w))return q;if(this.eat(z.question)){var Y=this.startNodeAt(E,R);return Y.test=q,Y.consequent=this.parseMaybeAssign(),this.expect(z.colon),Y.alternate=this.parseMaybeAssign(u),this.finishNode(Y,"ConditionalExpression")}return q},_.parseExprOps=function(u,w){var E=this.start,R=this.startLoc,q=this.parseMaybeUnary(w,!1,!1,u);return this.checkExpressionErrors(w)||q.start===E&&q.type==="ArrowFunctionExpression"?q:this.parseExprOp(q,E,R,-1,u)},_.parseExprOp=function(u,w,E,R,q){var Y=this.type.binop;if(Y!=null&&(!q||this.type!==z._in)&&Y>R){var Q=this.type===z.logicalOR||this.type===z.logicalAND,ct=this.type===z.coalesce;ct&&(Y=z.logicalAND.binop);var gt=this.value;this.next();var zt=this.start,At=this.startLoc,_e=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,q),zt,At,Y,q),Xe=this.buildBinary(w,E,u,_e,gt,Q||ct);return(Q&&this.type===z.coalesce||ct&&(this.type===z.logicalOR||this.type===z.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Xe,w,E,R,q)}return u},_.buildBinary=function(u,w,E,R,q,Y){R.type==="PrivateIdentifier"&&this.raise(R.start,"Private identifier can only be left side of binary expression");var Q=this.startNodeAt(u,w);return Q.left=E,Q.operator=q,Q.right=R,this.finishNode(Q,Y?"LogicalExpression":"BinaryExpression")},_.parseMaybeUnary=function(u,w,E,R){var q=this.start,Y=this.startLoc,Q;if(this.isContextual("await")&&this.canAwait)Q=this.parseAwait(R),w=!0;else if(this.type.prefix){var ct=this.startNode(),gt=this.type===z.incDec;ct.operator=this.value,ct.prefix=!0,this.next(),ct.argument=this.parseMaybeUnary(null,!0,gt,R),this.checkExpressionErrors(u,!0),gt?this.checkLValSimple(ct.argument):this.strict&&ct.operator==="delete"&&p(ct.argument)?this.raiseRecoverable(ct.start,"Deleting local variable in strict mode"):ct.operator==="delete"&&y(ct.argument)?this.raiseRecoverable(ct.start,"Private fields can not be deleted"):w=!0,Q=this.finishNode(ct,gt?"UpdateExpression":"UnaryExpression")}else if(!w&&this.type===z.privateId)(R||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Q=this.parsePrivateIdent(),this.type!==z._in&&this.unexpected();else{if(Q=this.parseExprSubscripts(u,R),this.checkExpressionErrors(u))return Q;for(;this.type.postfix&&!this.canInsertSemicolon();){var zt=this.startNodeAt(q,Y);zt.operator=this.value,zt.prefix=!1,zt.argument=Q,this.checkLValSimple(Q),this.next(),Q=this.finishNode(zt,"UpdateExpression")}}if(!E&&this.eat(z.starstar))if(w)this.unexpected(this.lastTokStart);else return this.buildBinary(q,Y,Q,this.parseMaybeUnary(null,!1,!1,R),"**",!1);else return Q};function p(u){return u.type==="Identifier"||u.type==="ParenthesizedExpression"&&p(u.expression)}function y(u){return u.type==="MemberExpression"&&u.property.type==="PrivateIdentifier"||u.type==="ChainExpression"&&y(u.expression)||u.type==="ParenthesizedExpression"&&y(u.expression)}_.parseExprSubscripts=function(u,w){var E=this.start,R=this.startLoc,q=this.parseExprAtom(u,w);if(q.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return q;var Y=this.parseSubscripts(q,E,R,!1,w);return u&&Y.type==="MemberExpression"&&(u.parenthesizedAssign>=Y.start&&(u.parenthesizedAssign=-1),u.parenthesizedBind>=Y.start&&(u.parenthesizedBind=-1),u.trailingComma>=Y.start&&(u.trailingComma=-1)),Y},_.parseSubscripts=function(u,w,E,R,q){for(var Y=this.options.ecmaVersion>=8&&u.type==="Identifier"&&u.name==="async"&&this.lastTokEnd===u.end&&!this.canInsertSemicolon()&&u.end-u.start===5&&this.potentialArrowAt===u.start,Q=!1;;){var ct=this.parseSubscript(u,w,E,R,Y,Q,q);if(ct.optional&&(Q=!0),ct===u||ct.type==="ArrowFunctionExpression"){if(Q){var gt=this.startNodeAt(w,E);gt.expression=ct,ct=this.finishNode(gt,"ChainExpression")}return ct}u=ct}},_.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(z.arrow)},_.parseSubscriptAsyncArrow=function(u,w,E,R){return this.parseArrowExpression(this.startNodeAt(u,w),E,!0,R)},_.parseSubscript=function(u,w,E,R,q,Y,Q){var ct=this.options.ecmaVersion>=11,gt=ct&&this.eat(z.questionDot);R&&gt&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var zt=this.eat(z.bracketL);if(zt||gt&&this.type!==z.parenL&&this.type!==z.backQuote||this.eat(z.dot)){var At=this.startNodeAt(w,E);At.object=u,zt?(At.property=this.parseExpression(),this.expect(z.bracketR)):this.type===z.privateId&&u.type!=="Super"?At.property=this.parsePrivateIdent():At.property=this.parseIdent(this.options.allowReserved!=="never"),At.computed=!!zt,ct&&(At.optional=gt),u=this.finishNode(At,"MemberExpression")}else if(!R&&this.eat(z.parenL)){var _e=new s,Xe=this.yieldPos,fi=this.awaitPos,ti=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var bi=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,_e);if(q&&!gt&&this.shouldParseAsyncArrow())return this.checkPatternErrors(_e,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Xe,this.awaitPos=fi,this.awaitIdentPos=ti,this.parseSubscriptAsyncArrow(w,E,bi,Q);this.checkExpressionErrors(_e,!0),this.yieldPos=Xe||this.yieldPos,this.awaitPos=fi||this.awaitPos,this.awaitIdentPos=ti||this.awaitIdentPos;var ei=this.startNodeAt(w,E);ei.callee=u,ei.arguments=bi,ct&&(ei.optional=gt),u=this.finishNode(ei,"CallExpression")}else if(this.type===z.backQuote){(gt||Y)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Je=this.startNodeAt(w,E);Je.tag=u,Je.quasi=this.parseTemplate({isTagged:!0}),u=this.finishNode(Je,"TaggedTemplateExpression")}return u},_.parseExprAtom=function(u,w,E){this.type===z.slash&&this.readRegexp();var R,q=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),R=this.startNode(),this.next(),this.type===z.parenL&&!this.allowDirectSuper&&this.raise(R.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(R,"Super");case z._this:return R=this.startNode(),this.next(),this.finishNode(R,"ThisExpression");case z.name:var Y=this.start,Q=this.startLoc,ct=this.containsEsc,gt=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!ct&&gt.name==="async"&&!this.canInsertSemicolon()&&this.eat(z._function))return this.overrideContext(x.f_expr),this.parseFunction(this.startNodeAt(Y,Q),0,!1,!0,w);if(q&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(Y,Q),[gt],!1,w);if(this.options.ecmaVersion>=8&&gt.name==="async"&&this.type===z.name&&!ct&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return gt=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(z.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Y,Q),[gt],!0,w)}return gt;case z.regexp:var zt=this.value;return R=this.parseLiteral(zt.value),R.regex={pattern:zt.pattern,flags:zt.flags},R;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return R=this.startNode(),R.value=this.type===z._null?null:this.type===z._true,R.raw=this.type.keyword,this.next(),this.finishNode(R,"Literal");case z.parenL:var At=this.start,_e=this.parseParenAndDistinguishExpression(q,w);return u&&(u.parenthesizedAssign<0&&!this.isSimpleAssignTarget(_e)&&(u.parenthesizedAssign=At),u.parenthesizedBind<0&&(u.parenthesizedBind=At)),_e;case z.bracketL:return R=this.startNode(),this.next(),R.elements=this.parseExprList(z.bracketR,!0,!0,u),this.finishNode(R,"ArrayExpression");case z.braceL:return this.overrideContext(x.b_expr),this.parseObj(!1,u);case z._function:return R=this.startNode(),this.next(),this.parseFunction(R,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();case z._import:return this.options.ecmaVersion>=11?this.parseExprImport(E):this.unexpected();default:return this.parseExprAtomDefault()}},_.parseExprAtomDefault=function(){this.unexpected()},_.parseExprImport=function(u){var w=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===z.parenL&&!u)return this.parseDynamicImport(w);if(this.type===z.dot){var E=this.startNodeAt(w.start,w.loc&&w.loc.start);return E.name="import",w.meta=this.finishNode(E,"Identifier"),this.parseImportMeta(w)}else this.unexpected()},_.parseDynamicImport=function(u){if(this.next(),u.source=this.parseMaybeAssign(),!this.eat(z.parenR)){var w=this.start;this.eat(z.comma)&&this.eat(z.parenR)?this.raiseRecoverable(w,"Trailing comma is not allowed in import()"):this.unexpected(w)}return this.finishNode(u,"ImportExpression")},_.parseImportMeta=function(u){this.next();var w=this.containsEsc;return u.property=this.parseIdent(!0),u.property.name!=="meta"&&this.raiseRecoverable(u.property.start,"The only valid meta property for import is 'import.meta'"),w&&this.raiseRecoverable(u.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(u.start,"Cannot use 'import.meta' outside a module"),this.finishNode(u,"MetaProperty")},_.parseLiteral=function(u){var w=this.startNode();return w.value=u,w.raw=this.input.slice(this.start,this.end),w.raw.charCodeAt(w.raw.length-1)===110&&(w.bigint=w.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(w,"Literal")},_.parseParenExpression=function(){this.expect(z.parenL);var u=this.parseExpression();return this.expect(z.parenR),u},_.shouldParseArrow=function(u){return!this.canInsertSemicolon()},_.parseParenAndDistinguishExpression=function(u,w){var E=this.start,R=this.startLoc,q,Y=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Q=this.start,ct=this.startLoc,gt=[],zt=!0,At=!1,_e=new s,Xe=this.yieldPos,fi=this.awaitPos,ti;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;)if(zt?zt=!1:this.expect(z.comma),Y&&this.afterTrailingComma(z.parenR,!0)){At=!0;break}else if(this.type===z.ellipsis){ti=this.start,gt.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else gt.push(this.parseMaybeAssign(!1,_e,this.parseParenItem));var bi=this.lastTokEnd,ei=this.lastTokEndLoc;if(this.expect(z.parenR),u&&this.shouldParseArrow(gt)&&this.eat(z.arrow))return this.checkPatternErrors(_e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Xe,this.awaitPos=fi,this.parseParenArrowList(E,R,gt,w);(!gt.length||At)&&this.unexpected(this.lastTokStart),ti&&this.unexpected(ti),this.checkExpressionErrors(_e,!0),this.yieldPos=Xe||this.yieldPos,this.awaitPos=fi||this.awaitPos,gt.length>1?(q=this.startNodeAt(Q,ct),q.expressions=gt,this.finishNodeAt(q,"SequenceExpression",bi,ei)):q=gt[0]}else q=this.parseParenExpression();if(this.options.preserveParens){var Je=this.startNodeAt(E,R);return Je.expression=q,this.finishNode(Je,"ParenthesizedExpression")}else return q},_.parseParenItem=function(u){return u},_.parseParenArrowList=function(u,w,E,R){return this.parseArrowExpression(this.startNodeAt(u,w),E,!1,R)};var C=[];_.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var u=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===z.dot){var w=this.startNodeAt(u.start,u.loc&&u.loc.start);w.name="new",u.meta=this.finishNode(w,"Identifier"),this.next();var E=this.containsEsc;return u.property=this.parseIdent(!0),u.property.name!=="target"&&this.raiseRecoverable(u.property.start,"The only valid meta property for new is 'new.target'"),E&&this.raiseRecoverable(u.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(u.start,"'new.target' can only be used in functions and class static block"),this.finishNode(u,"MetaProperty")}var R=this.start,q=this.startLoc;return u.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),R,q,!0,!1),this.eat(z.parenL)?u.arguments=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):u.arguments=C,this.finishNode(u,"NewExpression")},_.parseTemplateElement=function(u){var w=u.isTagged,E=this.startNode();return this.type===z.invalidTemplate?(w||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),E.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):E.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),E.tail=this.type===z.backQuote,this.finishNode(E,"TemplateElement")},_.parseTemplate=function(u){u===void 0&&(u={});var w=u.isTagged;w===void 0&&(w=!1);var E=this.startNode();this.next(),E.expressions=[];var R=this.parseTemplateElement({isTagged:w});for(E.quasis=[R];!R.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),E.expressions.push(this.parseExpression()),this.expect(z.braceR),E.quasis.push(R=this.parseTemplateElement({isTagged:w}));return this.next(),this.finishNode(E,"TemplateLiteral")},_.isAsyncProp=function(u){return!u.computed&&u.key.type==="Identifier"&&u.key.name==="async"&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!Kt.test(this.input.slice(this.lastTokEnd,this.start))},_.parseObj=function(u,w){var E=this.startNode(),R=!0,q={};for(E.properties=[],this.next();!this.eat(z.braceR);){if(R)R=!1;else if(this.expect(z.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(z.braceR))break;var Y=this.parseProperty(u,w);u||this.checkPropClash(Y,q,w),E.properties.push(Y)}return this.finishNode(E,u?"ObjectPattern":"ObjectExpression")},_.parseProperty=function(u,w){var E=this.startNode(),R,q,Y,Q;if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return u?(E.argument=this.parseIdent(!1),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(E,"RestElement")):(E.argument=this.parseMaybeAssign(!1,w),this.type===z.comma&&w&&w.trailingComma<0&&(w.trailingComma=this.start),this.finishNode(E,"SpreadElement"));this.options.ecmaVersion>=6&&(E.method=!1,E.shorthand=!1,(u||w)&&(Y=this.start,Q=this.startLoc),u||(R=this.eat(z.star)));var ct=this.containsEsc;return this.parsePropertyName(E),!u&&!ct&&this.options.ecmaVersion>=8&&!R&&this.isAsyncProp(E)?(q=!0,R=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(E)):q=!1,this.parsePropertyValue(E,u,R,q,Y,Q,w,ct),this.finishNode(E,"Property")},_.parseGetterSetter=function(u){u.kind=u.key.name,this.parsePropertyName(u),u.value=this.parseMethod(!1);var w=u.kind==="get"?0:1;if(u.value.params.length!==w){var E=u.value.start;u.kind==="get"?this.raiseRecoverable(E,"getter should have no params"):this.raiseRecoverable(E,"setter should have exactly one param")}else u.kind==="set"&&u.value.params[0].type==="RestElement"&&this.raiseRecoverable(u.value.params[0].start,"Setter cannot use rest params")},_.parsePropertyValue=function(u,w,E,R,q,Y,Q,ct){(E||R)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon)?(u.value=w?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Q),u.kind="init"):this.options.ecmaVersion>=6&&this.type===z.parenL?(w&&this.unexpected(),u.kind="init",u.method=!0,u.value=this.parseMethod(E,R)):!w&&!ct&&this.options.ecmaVersion>=5&&!u.computed&&u.key.type==="Identifier"&&(u.key.name==="get"||u.key.name==="set")&&this.type!==z.comma&&this.type!==z.braceR&&this.type!==z.eq?((E||R)&&this.unexpected(),this.parseGetterSetter(u)):this.options.ecmaVersion>=6&&!u.computed&&u.key.type==="Identifier"?((E||R)&&this.unexpected(),this.checkUnreserved(u.key),u.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=q),u.kind="init",w?u.value=this.parseMaybeDefault(q,Y,this.copyNode(u.key)):this.type===z.eq&&Q?(Q.shorthandAssign<0&&(Q.shorthandAssign=this.start),u.value=this.parseMaybeDefault(q,Y,this.copyNode(u.key))):u.value=this.copyNode(u.key),u.shorthand=!0):this.unexpected()},_.parsePropertyName=function(u){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return u.computed=!0,u.key=this.parseMaybeAssign(),this.expect(z.bracketR),u.key;u.computed=!1}return u.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},_.initFunction=function(u){u.id=null,this.options.ecmaVersion>=6&&(u.generator=u.expression=!1),this.options.ecmaVersion>=8&&(u.async=!1)},_.parseMethod=function(u,w,E){var R=this.startNode(),q=this.yieldPos,Y=this.awaitPos,Q=this.awaitIdentPos;return this.initFunction(R),this.options.ecmaVersion>=6&&(R.generator=u),this.options.ecmaVersion>=8&&(R.async=!!w),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(oi(w,R.generator)|We|(E?yi:0)),this.expect(z.parenL),R.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(R,!1,!0,!1),this.yieldPos=q,this.awaitPos=Y,this.awaitIdentPos=Q,this.finishNode(R,"FunctionExpression")},_.parseArrowExpression=function(u,w,E,R){var q=this.yieldPos,Y=this.awaitPos,Q=this.awaitIdentPos;return this.enterScope(oi(E,!1)|ze),this.initFunction(u),this.options.ecmaVersion>=8&&(u.async=!!E),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,u.params=this.toAssignableList(w,!0),this.parseFunctionBody(u,!0,!1,R),this.yieldPos=q,this.awaitPos=Y,this.awaitIdentPos=Q,this.finishNode(u,"ArrowFunctionExpression")},_.parseFunctionBody=function(u,w,E,R){var q=w&&this.type!==z.braceL,Y=this.strict,Q=!1;if(q)u.body=this.parseMaybeAssign(R),u.expression=!0,this.checkParams(u,!1);else{var ct=this.options.ecmaVersion>=7&&!this.isSimpleParamList(u.params);(!Y||ct)&&(Q=this.strictDirective(this.end),Q&&ct&&this.raiseRecoverable(u.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var gt=this.labels;this.labels=[],Q&&(this.strict=!0),this.checkParams(u,!Y&&!Q&&!w&&!E&&this.isSimpleParamList(u.params)),this.strict&&u.id&&this.checkLValSimple(u.id,n),u.body=this.parseBlock(!1,void 0,Q&&!Y),u.expression=!1,this.adaptDirectivePrologue(u.body.body),this.labels=gt}this.exitScope()},_.isSimpleParamList=function(u){for(var w=0,E=u;w<E.length;w+=1){var R=E[w];if(R.type!=="Identifier")return!1}return!0},_.checkParams=function(u,w){for(var E=Object.create(null),R=0,q=u.params;R<q.length;R+=1){var Y=q[R];this.checkLValInnerPattern(Y,ue,w?null:E)}},_.parseExprList=function(u,w,E,R){for(var q=[],Y=!0;!this.eat(u);){if(Y)Y=!1;else if(this.expect(z.comma),w&&this.afterTrailingComma(u))break;var Q=void 0;E&&this.type===z.comma?Q=null:this.type===z.ellipsis?(Q=this.parseSpread(R),R&&this.type===z.comma&&R.trailingComma<0&&(R.trailingComma=this.start)):Q=this.parseMaybeAssign(!1,R),q.push(Q)}return q},_.checkUnreserved=function(u){var w=u.start,E=u.end,R=u.name;if(this.inGenerator&&R==="yield"&&this.raiseRecoverable(w,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&R==="await"&&this.raiseRecoverable(w,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&R==="arguments"&&this.raiseRecoverable(w,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(R==="arguments"||R==="await")&&this.raise(w,"Cannot use "+R+" in class static initialization block"),this.keywords.test(R)&&this.raise(w,"Unexpected keyword '"+R+"'"),!(this.options.ecmaVersion<6&&this.input.slice(w,E).indexOf("\\")!==-1)){var q=this.strict?this.reservedWordsStrict:this.reservedWords;q.test(R)&&(!this.inAsync&&R==="await"&&this.raiseRecoverable(w,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(w,"The keyword '"+R+"' is reserved"))}},_.parseIdent=function(u){var w=this.parseIdentNode();return this.next(!!u),this.finishNode(w,"Identifier"),u||(this.checkUnreserved(w),w.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=w.start)),w},_.parseIdentNode=function(){var u=this.startNode();return this.type===z.name?u.name=this.value:this.type.keyword?(u.name=this.type.keyword,(u.name==="class"||u.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=z.name):this.unexpected(),u},_.parsePrivateIdent=function(){var u=this.startNode();return this.type===z.privateId?u.name=this.value:this.unexpected(),this.next(),this.finishNode(u,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(u.start,"Private field '#"+u.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(u)),u},_.parseYield=function(u){this.yieldPos||(this.yieldPos=this.start);var w=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(w.delegate=!1,w.argument=null):(w.delegate=this.eat(z.star),w.argument=this.parseMaybeAssign(u)),this.finishNode(w,"YieldExpression")},_.parseAwait=function(u){this.awaitPos||(this.awaitPos=this.start);var w=this.startNode();return this.next(),w.argument=this.parseMaybeUnary(null,!0,!1,u),this.finishNode(w,"AwaitExpression")};var P=t.prototype;P.raise=function(u,w){var E=ai(this.input,u);w+=" ("+E.line+":"+E.column+")";var R=new SyntaxError(w);throw R.pos=u,R.loc=E,R.raisedAt=this.pos,R},P.raiseRecoverable=P.raise,P.curPosition=function(){if(this.options.locations)return new qe(this.curLine,this.pos-this.lineStart)};var I=t.prototype,k=function(w){this.flags=w,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};I.enterScope=function(u){this.scopeStack.push(new k(u))},I.exitScope=function(){this.scopeStack.pop()},I.treatFunctionsAsVarInScope=function(u){return u.flags&Nt||!this.inModule&&u.flags&kt},I.declareName=function(u,w,E){var R=!1;if(w===Zt){var q=this.currentScope();R=q.lexical.indexOf(u)>-1||q.functions.indexOf(u)>-1||q.var.indexOf(u)>-1,q.lexical.push(u),this.inModule&&q.flags&kt&&delete this.undefinedExports[u]}else if(w===Bt){var Y=this.currentScope();Y.lexical.push(u)}else if(w===oe){var Q=this.currentScope();this.treatFunctionsAsVar?R=Q.lexical.indexOf(u)>-1:R=Q.lexical.indexOf(u)>-1||Q.var.indexOf(u)>-1,Q.functions.push(u)}else for(var ct=this.scopeStack.length-1;ct>=0;--ct){var gt=this.scopeStack[ct];if(gt.lexical.indexOf(u)>-1&&!(gt.flags&mi&&gt.lexical[0]===u)||!this.treatFunctionsAsVarInScope(gt)&&gt.functions.indexOf(u)>-1){R=!0;break}if(gt.var.push(u),this.inModule&&gt.flags&kt&&delete this.undefinedExports[u],gt.flags&ui)break}R&&this.raiseRecoverable(E,"Identifier '"+u+"' has already been declared")},I.checkLocalExport=function(u){this.scopeStack[0].lexical.indexOf(u.name)===-1&&this.scopeStack[0].var.indexOf(u.name)===-1&&(this.undefinedExports[u.name]=u)},I.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},I.currentVarScope=function(){for(var u=this.scopeStack.length-1;;u--){var w=this.scopeStack[u];if(w.flags&ui)return w}},I.currentThisScope=function(){for(var u=this.scopeStack.length-1;;u--){var w=this.scopeStack[u];if(w.flags&ui&&!(w.flags&ze))return w}};var T=function(w,E,R){this.type="",this.start=E,this.end=0,w.options.locations&&(this.loc=new ke(w,R)),w.options.directSourceFile&&(this.sourceFile=w.options.directSourceFile),w.options.ranges&&(this.range=[E,0])},O=t.prototype;O.startNode=function(){return new T(this,this.start,this.startLoc)},O.startNodeAt=function(u,w){return new T(this,u,w)};function M(u,w,E,R){return u.type=w,u.end=E,this.options.locations&&(u.loc.end=R),this.options.ranges&&(u.range[1]=E),u}O.finishNode=function(u,w){return M.call(this,u,w,this.lastTokEnd,this.lastTokEndLoc)},O.finishNodeAt=function(u,w,E,R){return M.call(this,u,w,E,R)},O.copyNode=function(u){var w=new T(this,u.start,this.startLoc);for(var E in u)w[E]=u[E];return w};var A="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",N=A+" Extended_Pictographic",V=N,F=V+" EBase EComp EMod EPres ExtPict",D=F,H=D,W={9:A,10:N,11:V,12:F,13:D,14:H},X="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",tt={9:"",10:"",11:"",12:"",13:"",14:X},et="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",j="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",K=j+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",it=K+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",nt=it+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ut=nt+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",lt=ut+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",ft={9:j,10:K,11:it,12:nt,13:ut,14:lt},dt={};function _t(u){var w=dt[u]={binary:vt(W[u]+" "+et),binaryOfStrings:vt(tt[u]),nonBinary:{General_Category:vt(et),Script:vt(ft[u])}};w.nonBinary.Script_Extensions=w.nonBinary.Script,w.nonBinary.gc=w.nonBinary.General_Category,w.nonBinary.sc=w.nonBinary.Script,w.nonBinary.scx=w.nonBinary.Script_Extensions}for(var wt=0,Dt=[9,10,11,12,13,14];wt<Dt.length;wt+=1){var Ht=Dt[wt];_t(Ht)}var ht=t.prototype,It=function(w,E){this.parent=w,this.base=E||this};It.prototype.separatedFrom=function(w){for(var E=this;E;E=E.parent)for(var R=w;R;R=R.parent)if(E.base===R.base&&E!==R)return!0;return!1},It.prototype.sibling=function(){return new It(this.parent,this.base)};var St=function(w){this.parser=w,this.validFlags="gim"+(w.options.ecmaVersion>=6?"uy":"")+(w.options.ecmaVersion>=9?"s":"")+(w.options.ecmaVersion>=13?"d":"")+(w.options.ecmaVersion>=15?"v":""),this.unicodeProperties=dt[w.options.ecmaVersion>=14?14:w.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};St.prototype.reset=function(w,E,R){var q=R.indexOf("v")!==-1,Y=R.indexOf("u")!==-1;this.start=w|0,this.source=E+"",this.flags=R,q&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Y&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Y&&this.parser.options.ecmaVersion>=9)},St.prototype.raise=function(w){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+w)},St.prototype.at=function(w,E){E===void 0&&(E=!1);var R=this.source,q=R.length;if(w>=q)return-1;var Y=R.charCodeAt(w);if(!(E||this.switchU)||Y<=55295||Y>=57344||w+1>=q)return Y;var Q=R.charCodeAt(w+1);return Q>=56320&&Q<=57343?(Y<<10)+Q-56613888:Y},St.prototype.nextIndex=function(w,E){E===void 0&&(E=!1);var R=this.source,q=R.length;if(w>=q)return q;var Y=R.charCodeAt(w),Q;return!(E||this.switchU)||Y<=55295||Y>=57344||w+1>=q||(Q=R.charCodeAt(w+1))<56320||Q>57343?w+1:w+2},St.prototype.current=function(w){return w===void 0&&(w=!1),this.at(this.pos,w)},St.prototype.lookahead=function(w){return w===void 0&&(w=!1),this.at(this.nextIndex(this.pos,w),w)},St.prototype.advance=function(w){w===void 0&&(w=!1),this.pos=this.nextIndex(this.pos,w)},St.prototype.eat=function(w,E){return E===void 0&&(E=!1),this.current(E)===w?(this.advance(E),!0):!1},St.prototype.eatChars=function(w,E){E===void 0&&(E=!1);for(var R=this.pos,q=0,Y=w;q<Y.length;q+=1){var Q=Y[q],ct=this.at(R,E);if(ct===-1||ct!==Q)return!1;R=this.nextIndex(R,E)}return this.pos=R,!0},ht.validateRegExpFlags=function(u){for(var w=u.validFlags,E=u.flags,R=!1,q=!1,Y=0;Y<E.length;Y++){var Q=E.charAt(Y);w.indexOf(Q)===-1&&this.raise(u.start,"Invalid regular expression flag"),E.indexOf(Q,Y+1)>-1&&this.raise(u.start,"Duplicate regular expression flag"),Q==="u"&&(R=!0),Q==="v"&&(q=!0)}this.options.ecmaVersion>=15&&R&&q&&this.raise(u.start,"Invalid regular expression flag")};function Gt(u){for(var w in u)return!0;return!1}ht.validateRegExpPattern=function(u){this.regexp_pattern(u),!u.switchN&&this.options.ecmaVersion>=9&&Gt(u.groupNames)&&(u.switchN=!0,this.regexp_pattern(u))},ht.regexp_pattern=function(u){u.pos=0,u.lastIntValue=0,u.lastStringValue="",u.lastAssertionIsQuantifiable=!1,u.numCapturingParens=0,u.maxBackReference=0,u.groupNames=Object.create(null),u.backReferenceNames.length=0,u.branchID=null,this.regexp_disjunction(u),u.pos!==u.source.length&&(u.eat(41)&&u.raise("Unmatched ')'"),(u.eat(93)||u.eat(125))&&u.raise("Lone quantifier brackets")),u.maxBackReference>u.numCapturingParens&&u.raise("Invalid escape");for(var w=0,E=u.backReferenceNames;w<E.length;w+=1){var R=E[w];u.groupNames[R]||u.raise("Invalid named capture referenced")}},ht.regexp_disjunction=function(u){var w=this.options.ecmaVersion>=16;for(w&&(u.branchID=new It(u.branchID,null)),this.regexp_alternative(u);u.eat(124);)w&&(u.branchID=u.branchID.sibling()),this.regexp_alternative(u);w&&(u.branchID=u.branchID.parent),this.regexp_eatQuantifier(u,!0)&&u.raise("Nothing to repeat"),u.eat(123)&&u.raise("Lone quantifier brackets")},ht.regexp_alternative=function(u){for(;u.pos<u.source.length&&this.regexp_eatTerm(u););},ht.regexp_eatTerm=function(u){return this.regexp_eatAssertion(u)?(u.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(u)&&u.switchU&&u.raise("Invalid quantifier"),!0):(u.switchU?this.regexp_eatAtom(u):this.regexp_eatExtendedAtom(u))?(this.regexp_eatQuantifier(u),!0):!1},ht.regexp_eatAssertion=function(u){var w=u.pos;if(u.lastAssertionIsQuantifiable=!1,u.eat(94)||u.eat(36))return!0;if(u.eat(92)){if(u.eat(66)||u.eat(98))return!0;u.pos=w}if(u.eat(40)&&u.eat(63)){var E=!1;if(this.options.ecmaVersion>=9&&(E=u.eat(60)),u.eat(61)||u.eat(33))return this.regexp_disjunction(u),u.eat(41)||u.raise("Unterminated group"),u.lastAssertionIsQuantifiable=!E,!0}return u.pos=w,!1},ht.regexp_eatQuantifier=function(u,w){return w===void 0&&(w=!1),this.regexp_eatQuantifierPrefix(u,w)?(u.eat(63),!0):!1},ht.regexp_eatQuantifierPrefix=function(u,w){return u.eat(42)||u.eat(43)||u.eat(63)||this.regexp_eatBracedQuantifier(u,w)},ht.regexp_eatBracedQuantifier=function(u,w){var E=u.pos;if(u.eat(123)){var R=0,q=-1;if(this.regexp_eatDecimalDigits(u)&&(R=u.lastIntValue,u.eat(44)&&this.regexp_eatDecimalDigits(u)&&(q=u.lastIntValue),u.eat(125)))return q!==-1&&q<R&&!w&&u.raise("numbers out of order in {} quantifier"),!0;u.switchU&&!w&&u.raise("Incomplete quantifier"),u.pos=E}return!1},ht.regexp_eatAtom=function(u){return this.regexp_eatPatternCharacters(u)||u.eat(46)||this.regexp_eatReverseSolidusAtomEscape(u)||this.regexp_eatCharacterClass(u)||this.regexp_eatUncapturingGroup(u)||this.regexp_eatCapturingGroup(u)},ht.regexp_eatReverseSolidusAtomEscape=function(u){var w=u.pos;if(u.eat(92)){if(this.regexp_eatAtomEscape(u))return!0;u.pos=w}return!1},ht.regexp_eatUncapturingGroup=function(u){var w=u.pos;if(u.eat(40)){if(u.eat(63)&&u.eat(58)){if(this.regexp_disjunction(u),u.eat(41))return!0;u.raise("Unterminated group")}u.pos=w}return!1},ht.regexp_eatCapturingGroup=function(u){if(u.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(u):u.current()===63&&u.raise("Invalid group"),this.regexp_disjunction(u),u.eat(41))return u.numCapturingParens+=1,!0;u.raise("Unterminated group")}return!1},ht.regexp_eatExtendedAtom=function(u){return u.eat(46)||this.regexp_eatReverseSolidusAtomEscape(u)||this.regexp_eatCharacterClass(u)||this.regexp_eatUncapturingGroup(u)||this.regexp_eatCapturingGroup(u)||this.regexp_eatInvalidBracedQuantifier(u)||this.regexp_eatExtendedPatternCharacter(u)},ht.regexp_eatInvalidBracedQuantifier=function(u){return this.regexp_eatBracedQuantifier(u,!0)&&u.raise("Nothing to repeat"),!1},ht.regexp_eatSyntaxCharacter=function(u){var w=u.current();return jt(w)?(u.lastIntValue=w,u.advance(),!0):!1};function jt(u){return u===36||u>=40&&u<=43||u===46||u===63||u>=91&&u<=94||u>=123&&u<=125}ht.regexp_eatPatternCharacters=function(u){for(var w=u.pos,E=0;(E=u.current())!==-1&&!jt(E);)u.advance();return u.pos!==w},ht.regexp_eatExtendedPatternCharacter=function(u){var w=u.current();return w!==-1&&w!==36&&!(w>=40&&w<=43)&&w!==46&&w!==63&&w!==91&&w!==94&&w!==124?(u.advance(),!0):!1},ht.regexp_groupSpecifier=function(u){if(u.eat(63)){this.regexp_eatGroupName(u)||u.raise("Invalid group");var w=this.options.ecmaVersion>=16,E=u.groupNames[u.lastStringValue];if(E)if(w)for(var R=0,q=E;R<q.length;R+=1){var Y=q[R];Y.separatedFrom(u.branchID)||u.raise("Duplicate capture group name")}else u.raise("Duplicate capture group name");w?(E||(u.groupNames[u.lastStringValue]=[])).push(u.branchID):u.groupNames[u.lastStringValue]=!0}},ht.regexp_eatGroupName=function(u){if(u.lastStringValue="",u.eat(60)){if(this.regexp_eatRegExpIdentifierName(u)&&u.eat(62))return!0;u.raise("Invalid capture group name")}return!1},ht.regexp_eatRegExpIdentifierName=function(u){if(u.lastStringValue="",this.regexp_eatRegExpIdentifierStart(u)){for(u.lastStringValue+=ie(u.lastIntValue);this.regexp_eatRegExpIdentifierPart(u);)u.lastStringValue+=ie(u.lastIntValue);return!0}return!1},ht.regexp_eatRegExpIdentifierStart=function(u){var w=u.pos,E=this.options.ecmaVersion>=11,R=u.current(E);return u.advance(E),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(u,E)&&(R=u.lastIntValue),ne(R)?(u.lastIntValue=R,!0):(u.pos=w,!1)};function ne(u){return se(u,!0)||u===36||u===95}ht.regexp_eatRegExpIdentifierPart=function(u){var w=u.pos,E=this.options.ecmaVersion>=11,R=u.current(E);return u.advance(E),R===92&&this.regexp_eatRegExpUnicodeEscapeSequence(u,E)&&(R=u.lastIntValue),ge(R)?(u.lastIntValue=R,!0):(u.pos=w,!1)};function ge(u){return rt(u,!0)||u===36||u===95||u===8204||u===8205}ht.regexp_eatAtomEscape=function(u){return this.regexp_eatBackReference(u)||this.regexp_eatCharacterClassEscape(u)||this.regexp_eatCharacterEscape(u)||u.switchN&&this.regexp_eatKGroupName(u)?!0:(u.switchU&&(u.current()===99&&u.raise("Invalid unicode escape"),u.raise("Invalid escape")),!1)},ht.regexp_eatBackReference=function(u){var w=u.pos;if(this.regexp_eatDecimalEscape(u)){var E=u.lastIntValue;if(u.switchU)return E>u.maxBackReference&&(u.maxBackReference=E),!0;if(E<=u.numCapturingParens)return!0;u.pos=w}return!1},ht.regexp_eatKGroupName=function(u){if(u.eat(107)){if(this.regexp_eatGroupName(u))return u.backReferenceNames.push(u.lastStringValue),!0;u.raise("Invalid named reference")}return!1},ht.regexp_eatCharacterEscape=function(u){return this.regexp_eatControlEscape(u)||this.regexp_eatCControlLetter(u)||this.regexp_eatZero(u)||this.regexp_eatHexEscapeSequence(u)||this.regexp_eatRegExpUnicodeEscapeSequence(u,!1)||!u.switchU&&this.regexp_eatLegacyOctalEscapeSequence(u)||this.regexp_eatIdentityEscape(u)},ht.regexp_eatCControlLetter=function(u){var w=u.pos;if(u.eat(99)){if(this.regexp_eatControlLetter(u))return!0;u.pos=w}return!1},ht.regexp_eatZero=function(u){return u.current()===48&&!hi(u.lookahead())?(u.lastIntValue=0,u.advance(),!0):!1},ht.regexp_eatControlEscape=function(u){var w=u.current();return w===116?(u.lastIntValue=9,u.advance(),!0):w===110?(u.lastIntValue=10,u.advance(),!0):w===118?(u.lastIntValue=11,u.advance(),!0):w===102?(u.lastIntValue=12,u.advance(),!0):w===114?(u.lastIntValue=13,u.advance(),!0):!1},ht.regexp_eatControlLetter=function(u){var w=u.current();return pe(w)?(u.lastIntValue=w%32,u.advance(),!0):!1};function pe(u){return u>=65&&u<=90||u>=97&&u<=122}ht.regexp_eatRegExpUnicodeEscapeSequence=function(u,w){w===void 0&&(w=!1);var E=u.pos,R=w||u.switchU;if(u.eat(117)){if(this.regexp_eatFixedHexDigits(u,4)){var q=u.lastIntValue;if(R&&q>=55296&&q<=56319){var Y=u.pos;if(u.eat(92)&&u.eat(117)&&this.regexp_eatFixedHexDigits(u,4)){var Q=u.lastIntValue;if(Q>=56320&&Q<=57343)return u.lastIntValue=(q-55296)*1024+(Q-56320)+65536,!0}u.pos=Y,u.lastIntValue=q}return!0}if(R&&u.eat(123)&&this.regexp_eatHexDigits(u)&&u.eat(125)&&de(u.lastIntValue))return!0;R&&u.raise("Invalid unicode escape"),u.pos=E}return!1};function de(u){return u>=0&&u<=1114111}ht.regexp_eatIdentityEscape=function(u){if(u.switchU)return this.regexp_eatSyntaxCharacter(u)?!0:u.eat(47)?(u.lastIntValue=47,!0):!1;var w=u.current();return w!==99&&(!u.switchN||w!==107)?(u.lastIntValue=w,u.advance(),!0):!1},ht.regexp_eatDecimalEscape=function(u){u.lastIntValue=0;var w=u.current();if(w>=49&&w<=57){do u.lastIntValue=10*u.lastIntValue+(w-48),u.advance();while((w=u.current())>=48&&w<=57);return!0}return!1};var he=0,Wt=1,Qt=2;ht.regexp_eatCharacterClassEscape=function(u){var w=u.current();if(me(w))return u.lastIntValue=-1,u.advance(),Wt;var E=!1;if(u.switchU&&this.options.ecmaVersion>=9&&((E=w===80)||w===112)){u.lastIntValue=-1,u.advance();var R;if(u.eat(123)&&(R=this.regexp_eatUnicodePropertyValueExpression(u))&&u.eat(125))return E&&R===Qt&&u.raise("Invalid property name"),R;u.raise("Invalid property name")}return he};function me(u){return u===100||u===68||u===115||u===83||u===119||u===87}ht.regexp_eatUnicodePropertyValueExpression=function(u){var w=u.pos;if(this.regexp_eatUnicodePropertyName(u)&&u.eat(61)){var E=u.lastStringValue;if(this.regexp_eatUnicodePropertyValue(u)){var R=u.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(u,E,R),Wt}}if(u.pos=w,this.regexp_eatLoneUnicodePropertyNameOrValue(u)){var q=u.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(u,q)}return he},ht.regexp_validateUnicodePropertyNameAndValue=function(u,w,E){J(u.unicodeProperties.nonBinary,w)||u.raise("Invalid property name"),u.unicodeProperties.nonBinary[w].test(E)||u.raise("Invalid property value")},ht.regexp_validateUnicodePropertyNameOrValue=function(u,w){if(u.unicodeProperties.binary.test(w))return Wt;if(u.switchV&&u.unicodeProperties.binaryOfStrings.test(w))return Qt;u.raise("Invalid property name")},ht.regexp_eatUnicodePropertyName=function(u){var w=0;for(u.lastStringValue="";Ie(w=u.current());)u.lastStringValue+=ie(w),u.advance();return u.lastStringValue!==""};function Ie(u){return pe(u)||u===95}ht.regexp_eatUnicodePropertyValue=function(u){var w=0;for(u.lastStringValue="";wi(w=u.current());)u.lastStringValue+=ie(w),u.advance();return u.lastStringValue!==""};function wi(u){return Ie(u)||hi(u)}ht.regexp_eatLoneUnicodePropertyNameOrValue=function(u){return this.regexp_eatUnicodePropertyValue(u)},ht.regexp_eatCharacterClass=function(u){if(u.eat(91)){var w=u.eat(94),E=this.regexp_classContents(u);return u.eat(93)||u.raise("Unterminated character class"),w&&E===Qt&&u.raise("Negated character class may contain strings"),!0}return!1},ht.regexp_classContents=function(u){return u.current()===93?Wt:u.switchV?this.regexp_classSetExpression(u):(this.regexp_nonEmptyClassRanges(u),Wt)},ht.regexp_nonEmptyClassRanges=function(u){for(;this.regexp_eatClassAtom(u);){var w=u.lastIntValue;if(u.eat(45)&&this.regexp_eatClassAtom(u)){var E=u.lastIntValue;u.switchU&&(w===-1||E===-1)&&u.raise("Invalid character class"),w!==-1&&E!==-1&&w>E&&u.raise("Range out of order in character class")}}},ht.regexp_eatClassAtom=function(u){var w=u.pos;if(u.eat(92)){if(this.regexp_eatClassEscape(u))return!0;if(u.switchU){var E=u.current();(E===99||xi(E))&&u.raise("Invalid class escape"),u.raise("Invalid escape")}u.pos=w}var R=u.current();return R!==93?(u.lastIntValue=R,u.advance(),!0):!1},ht.regexp_eatClassEscape=function(u){var w=u.pos;if(u.eat(98))return u.lastIntValue=8,!0;if(u.switchU&&u.eat(45))return u.lastIntValue=45,!0;if(!u.switchU&&u.eat(99)){if(this.regexp_eatClassControlLetter(u))return!0;u.pos=w}return this.regexp_eatCharacterClassEscape(u)||this.regexp_eatCharacterEscape(u)},ht.regexp_classSetExpression=function(u){var w=Wt,E;if(!this.regexp_eatClassSetRange(u))if(E=this.regexp_eatClassSetOperand(u)){E===Qt&&(w=Qt);for(var R=u.pos;u.eatChars([38,38]);){if(u.current()!==38&&(E=this.regexp_eatClassSetOperand(u))){E!==Qt&&(w=Wt);continue}u.raise("Invalid character in character class")}if(R!==u.pos)return w;for(;u.eatChars([45,45]);)this.regexp_eatClassSetOperand(u)||u.raise("Invalid character in character class");if(R!==u.pos)return w}else u.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(u)){if(E=this.regexp_eatClassSetOperand(u),!E)return w;E===Qt&&(w=Qt)}},ht.regexp_eatClassSetRange=function(u){var w=u.pos;if(this.regexp_eatClassSetCharacter(u)){var E=u.lastIntValue;if(u.eat(45)&&this.regexp_eatClassSetCharacter(u)){var R=u.lastIntValue;return E!==-1&&R!==-1&&E>R&&u.raise("Range out of order in character class"),!0}u.pos=w}return!1},ht.regexp_eatClassSetOperand=function(u){return this.regexp_eatClassSetCharacter(u)?Wt:this.regexp_eatClassStringDisjunction(u)||this.regexp_eatNestedClass(u)},ht.regexp_eatNestedClass=function(u){var w=u.pos;if(u.eat(91)){var E=u.eat(94),R=this.regexp_classContents(u);if(u.eat(93))return E&&R===Qt&&u.raise("Negated character class may contain strings"),R;u.pos=w}if(u.eat(92)){var q=this.regexp_eatCharacterClassEscape(u);if(q)return q;u.pos=w}return null},ht.regexp_eatClassStringDisjunction=function(u){var w=u.pos;if(u.eatChars([92,113])){if(u.eat(123)){var E=this.regexp_classStringDisjunctionContents(u);if(u.eat(125))return E}else u.raise("Invalid escape");u.pos=w}return null},ht.regexp_classStringDisjunctionContents=function(u){for(var w=this.regexp_classString(u);u.eat(124);)this.regexp_classString(u)===Qt&&(w=Qt);return w},ht.regexp_classString=function(u){for(var w=0;this.regexp_eatClassSetCharacter(u);)w++;return w===1?Wt:Qt},ht.regexp_eatClassSetCharacter=function(u){var w=u.pos;if(u.eat(92))return this.regexp_eatCharacterEscape(u)||this.regexp_eatClassSetReservedPunctuator(u)?!0:u.eat(98)?(u.lastIntValue=8,!0):(u.pos=w,!1);var E=u.current();return E<0||E===u.lookahead()&&Mi(E)||Li(E)?!1:(u.advance(),u.lastIntValue=E,!0)};function Mi(u){return u===33||u>=35&&u<=38||u>=42&&u<=44||u===46||u>=58&&u<=64||u===94||u===96||u===126}function Li(u){return u===40||u===41||u===45||u===47||u>=91&&u<=93||u>=123&&u<=125}ht.regexp_eatClassSetReservedPunctuator=function(u){var w=u.current();return Ni(w)?(u.lastIntValue=w,u.advance(),!0):!1};function Ni(u){return u===33||u===35||u===37||u===38||u===44||u===45||u>=58&&u<=62||u===64||u===96||u===126}ht.regexp_eatClassControlLetter=function(u){var w=u.current();return hi(w)||w===95?(u.lastIntValue=w%32,u.advance(),!0):!1},ht.regexp_eatHexEscapeSequence=function(u){var w=u.pos;if(u.eat(120)){if(this.regexp_eatFixedHexDigits(u,2))return!0;u.switchU&&u.raise("Invalid escape"),u.pos=w}return!1},ht.regexp_eatDecimalDigits=function(u){var w=u.pos,E=0;for(u.lastIntValue=0;hi(E=u.current());)u.lastIntValue=10*u.lastIntValue+(E-48),u.advance();return u.pos!==w};function hi(u){return u>=48&&u<=57}ht.regexp_eatHexDigits=function(u){var w=u.pos,E=0;for(u.lastIntValue=0;Pi(E=u.current());)u.lastIntValue=16*u.lastIntValue+li(E),u.advance();return u.pos!==w};function Pi(u){return u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102}function li(u){return u>=65&&u<=70?10+(u-65):u>=97&&u<=102?10+(u-97):u-48}ht.regexp_eatLegacyOctalEscapeSequence=function(u){if(this.regexp_eatOctalDigit(u)){var w=u.lastIntValue;if(this.regexp_eatOctalDigit(u)){var E=u.lastIntValue;w<=3&&this.regexp_eatOctalDigit(u)?u.lastIntValue=w*64+E*8+u.lastIntValue:u.lastIntValue=w*8+E}else u.lastIntValue=w;return!0}return!1},ht.regexp_eatOctalDigit=function(u){var w=u.current();return xi(w)?(u.lastIntValue=w-48,u.advance(),!0):(u.lastIntValue=0,!1)};function xi(u){return u>=48&&u<=55}ht.regexp_eatFixedHexDigits=function(u,w){var E=u.pos;u.lastIntValue=0;for(var R=0;R<w;++R){var q=u.current();if(!Pi(q))return u.pos=E,!1;u.lastIntValue=16*u.lastIntValue+li(q),u.advance()}return!0};var Ke=function(w){this.type=w.type,this.value=w.value,this.start=w.start,this.end=w.end,w.options.locations&&(this.loc=new ke(w,w.startLoc,w.endLoc)),w.options.ranges&&(this.range=[w.start,w.end])},Vt=t.prototype;Vt.next=function(u){!u&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Ke(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Vt.getToken=function(){return this.next(),new Ke(this)},typeof Symbol<"u"&&(Vt[Symbol.iterator]=function(){var u=this;return{next:function(){var w=u.getToken();return{done:w.type===z.eof,value:w}}}}),Vt.nextToken=function(){var u=this.curContext();if((!u||!u.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(z.eof);if(u.override)return u.override(this);this.readToken(this.fullCharCodeAtPos())},Vt.readToken=function(u){return se(u,this.options.ecmaVersion>=6)||u===92?this.readWord():this.getTokenFromCode(u)},Vt.fullCharCodeAtPos=function(){var u=this.input.charCodeAt(this.pos);if(u<=55295||u>=56320)return u;var w=this.input.charCodeAt(this.pos+1);return w<=56319||w>=57344?u:(u<<10)+w-56613888},Vt.skipBlockComment=function(){var u=this.options.onComment&&this.curPosition(),w=this.pos,E=this.input.indexOf("*/",this.pos+=2);if(E===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=E+2,this.options.locations)for(var R=void 0,q=w;(R=Oe(this.input,q,this.pos))>-1;)++this.curLine,q=this.lineStart=R;this.options.onComment&&this.options.onComment(!0,this.input.slice(w+2,E),w,this.pos,u,this.curPosition())},Vt.skipLineComment=function(u){for(var w=this.pos,E=this.options.onComment&&this.curPosition(),R=this.input.charCodeAt(this.pos+=u);this.pos<this.input.length&&!Ut(R);)R=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(w+u,this.pos),w,this.pos,E,this.curPosition())},Vt.skipSpace=function(){t:for(;this.pos<this.input.length;){var u=this.input.charCodeAt(this.pos);switch(u){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(u>8&&u<14||u>=5760&&Be.test(String.fromCharCode(u)))++this.pos;else break t}}},Vt.finishToken=function(u,w){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var E=this.type;this.type=u,this.value=w,this.updateContext(E)},Vt.readToken_dot=function(){var u=this.input.charCodeAt(this.pos+1);if(u>=48&&u<=57)return this.readNumber(!0);var w=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&u===46&&w===46?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))},Vt.readToken_slash=function(){var u=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):u===61?this.finishOp(z.assign,2):this.finishOp(z.slash,1)},Vt.readToken_mult_modulo_exp=function(u){var w=this.input.charCodeAt(this.pos+1),E=1,R=u===42?z.star:z.modulo;return this.options.ecmaVersion>=7&&u===42&&w===42&&(++E,R=z.starstar,w=this.input.charCodeAt(this.pos+2)),w===61?this.finishOp(z.assign,E+1):this.finishOp(R,E)},Vt.readToken_pipe_amp=function(u){var w=this.input.charCodeAt(this.pos+1);if(w===u){if(this.options.ecmaVersion>=12){var E=this.input.charCodeAt(this.pos+2);if(E===61)return this.finishOp(z.assign,3)}return this.finishOp(u===124?z.logicalOR:z.logicalAND,2)}return w===61?this.finishOp(z.assign,2):this.finishOp(u===124?z.bitwiseOR:z.bitwiseAND,1)},Vt.readToken_caret=function(){var u=this.input.charCodeAt(this.pos+1);return u===61?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)},Vt.readToken_plus_min=function(u){var w=this.input.charCodeAt(this.pos+1);return w===u?w===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Kt.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(z.incDec,2):w===61?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)},Vt.readToken_lt_gt=function(u){var w=this.input.charCodeAt(this.pos+1),E=1;return w===u?(E=u===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+E)===61?this.finishOp(z.assign,E+1):this.finishOp(z.bitShift,E)):w===33&&u===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(w===61&&(E=2),this.finishOp(z.relational,E))},Vt.readToken_eq_excl=function(u){var w=this.input.charCodeAt(this.pos+1);return w===61?this.finishOp(z.equality,this.input.charCodeAt(this.pos+2)===61?3:2):u===61&&w===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(u===61?z.eq:z.prefix,1)},Vt.readToken_question=function(){var u=this.options.ecmaVersion;if(u>=11){var w=this.input.charCodeAt(this.pos+1);if(w===46){var E=this.input.charCodeAt(this.pos+2);if(E<48||E>57)return this.finishOp(z.questionDot,2)}if(w===63){if(u>=12){var R=this.input.charCodeAt(this.pos+2);if(R===61)return this.finishOp(z.assign,3)}return this.finishOp(z.coalesce,2)}}return this.finishOp(z.question,1)},Vt.readToken_numberSign=function(){var u=this.options.ecmaVersion,w=35;if(u>=13&&(++this.pos,w=this.fullCharCodeAtPos(),se(w,!0)||w===92))return this.finishToken(z.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ie(w)+"'")},Vt.getTokenFromCode=function(u){switch(u){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var w=this.input.charCodeAt(this.pos+1);if(w===120||w===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(w===111||w===79)return this.readRadixNumber(8);if(w===98||w===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(u);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(u);case 124:case 38:return this.readToken_pipe_amp(u);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(u);case 60:case 62:return this.readToken_lt_gt(u);case 61:case 33:return this.readToken_eq_excl(u);case 63:return this.readToken_question();case 126:return this.finishOp(z.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ie(u)+"'")},Vt.finishOp=function(u,w){var E=this.input.slice(this.pos,this.pos+w);return this.pos+=w,this.finishToken(u,E)},Vt.readRegexp=function(){for(var u,w,E=this.pos;;){this.pos>=this.input.length&&this.raise(E,"Unterminated regular expression");var R=this.input.charAt(this.pos);if(Kt.test(R)&&this.raise(E,"Unterminated regular expression"),u)u=!1;else{if(R==="[")w=!0;else if(R==="]"&&w)w=!1;else if(R==="/"&&!w)break;u=R==="\\"}++this.pos}var q=this.input.slice(E,this.pos);++this.pos;var Y=this.pos,Q=this.readWord1();this.containsEsc&&this.unexpected(Y);var ct=this.regexpState||(this.regexpState=new St(this));ct.reset(E,q,Q),this.validateRegExpFlags(ct),this.validateRegExpPattern(ct);var gt=null;try{gt=new RegExp(q,Q)}catch{}return this.finishToken(z.regexp,{pattern:q,flags:Q,value:gt})},Vt.readInt=function(u,w,E){for(var R=this.options.ecmaVersion>=12&&w===void 0,q=E&&this.input.charCodeAt(this.pos)===48,Y=this.pos,Q=0,ct=0,gt=0,zt=w??1/0;gt<zt;++gt,++this.pos){var At=this.input.charCodeAt(this.pos),_e=void 0;if(R&&At===95){q&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),ct===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),gt===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),ct=At;continue}if(At>=97?_e=At-97+10:At>=65?_e=At-65+10:At>=48&&At<=57?_e=At-48:_e=1/0,_e>=u)break;ct=At,Q=Q*u+_e}return R&&ct===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Y||w!=null&&this.pos-Y!==w?null:Q};function Qe(u,w){return w?parseInt(u,8):parseFloat(u.replace(/_/g,""))}function He(u){return typeof BigInt!="function"?null:BigInt(u.replace(/_/g,""))}Vt.readRadixNumber=function(u){var w=this.pos;this.pos+=2;var E=this.readInt(u);return E==null&&this.raise(this.start+2,"Expected number in radix "+u),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(E=He(this.input.slice(w,this.pos)),++this.pos):se(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,E)},Vt.readNumber=function(u){var w=this.pos;!u&&this.readInt(10,void 0,!0)===null&&this.raise(w,"Invalid number");var E=this.pos-w>=2&&this.input.charCodeAt(w)===48;E&&this.strict&&this.raise(w,"Invalid number");var R=this.input.charCodeAt(this.pos);if(!E&&!u&&this.options.ecmaVersion>=11&&R===110){var q=He(this.input.slice(w,this.pos));return++this.pos,se(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,q)}E&&/[89]/.test(this.input.slice(w,this.pos))&&(E=!1),R===46&&!E&&(++this.pos,this.readInt(10),R=this.input.charCodeAt(this.pos)),(R===69||R===101)&&!E&&(R=this.input.charCodeAt(++this.pos),(R===43||R===45)&&++this.pos,this.readInt(10)===null&&this.raise(w,"Invalid number")),se(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Y=Qe(this.input.slice(w,this.pos),E);return this.finishToken(z.num,Y)},Vt.readCodePoint=function(){var u=this.input.charCodeAt(this.pos),w;if(u===123){this.options.ecmaVersion<6&&this.unexpected();var E=++this.pos;w=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,w>1114111&&this.invalidStringToken(E,"Code point out of bounds")}else w=this.readHexChar(4);return w},Vt.readString=function(u){for(var w="",E=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var R=this.input.charCodeAt(this.pos);if(R===u)break;R===92?(w+=this.input.slice(E,this.pos),w+=this.readEscapedChar(!1),E=this.pos):R===8232||R===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ut(R)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return w+=this.input.slice(E,this.pos++),this.finishToken(z.string,w)};var Le={};Vt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(u){if(u===Le)this.readInvalidTemplateToken();else throw u}this.inTemplateElement=!1},Vt.invalidStringToken=function(u,w){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Le;this.raise(u,w)},Vt.readTmplToken=function(){for(var u="",w=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var E=this.input.charCodeAt(this.pos);if(E===96||E===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===z.template||this.type===z.invalidTemplate)?E===36?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote)):(u+=this.input.slice(w,this.pos),this.finishToken(z.template,u));if(E===92)u+=this.input.slice(w,this.pos),u+=this.readEscapedChar(!0),w=this.pos;else if(Ut(E)){switch(u+=this.input.slice(w,this.pos),++this.pos,E){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:u+=`
`;break;default:u+=String.fromCharCode(E);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),w=this.pos}else++this.pos}},Vt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Vt.readEscapedChar=function(u){var w=this.input.charCodeAt(++this.pos);switch(++this.pos,w){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ie(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),u){var E=this.pos-1;this.invalidStringToken(E,"Invalid escape sequence in template string")}default:if(w>=48&&w<=55){var R=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],q=parseInt(R,8);return q>255&&(R=R.slice(0,-1),q=parseInt(R,8)),this.pos+=R.length-1,w=this.input.charCodeAt(this.pos),(R!=="0"||w===56||w===57)&&(this.strict||u)&&this.invalidStringToken(this.pos-1-R.length,u?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(q)}return Ut(w)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(w)}},Vt.readHexChar=function(u){var w=this.pos,E=this.readInt(16,u);return E===null&&this.invalidStringToken(w,"Bad character escape sequence"),E},Vt.readWord1=function(){this.containsEsc=!1;for(var u="",w=!0,E=this.pos,R=this.options.ecmaVersion>=6;this.pos<this.input.length;){var q=this.fullCharCodeAtPos();if(rt(q,R))this.pos+=q<=65535?1:2;else if(q===92){this.containsEsc=!0,u+=this.input.slice(E,this.pos);var Y=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Q=this.readCodePoint();(w?se:rt)(Q,R)||this.invalidStringToken(Y,"Invalid Unicode escape"),u+=ie(Q),E=this.pos}else break;w=!1}return u+this.input.slice(E,this.pos)},Vt.readWord=function(){var u=this.readWord1(),w=z.name;return this.keywords.test(u)&&(w=qt[u]),this.finishToken(w,u)};var Me="8.12.1";t.acorn={Parser:t,version:Me,defaultOptions:Rt,Position:qe,SourceLocation:ke,getLineInfo:ai,Node:T,TokenType:Ot,tokTypes:z,keywordTypes:qt,TokContext:b,tokContexts:x,isIdentifierChar:rt,isIdentifierStart:se,Token:Ke,isNewLine:Ut,lineBreak:Kt,lineBreakG:Ee,nonASCIIwhitespace:Be};function Ve(u,w){return t.parse(u,w)}function Re(u,w,E){return t.parseExpressionAt(u,w,E)}function $e(u,w){return t.tokenizer(u,w)}G.Node=T,G.Parser=t,G.Position=qe,G.SourceLocation=ke,G.TokContext=b,G.Token=Ke,G.TokenType=Ot,G.defaultOptions=Rt,G.getLineInfo=ai,G.isIdentifierChar=rt,G.isIdentifierStart=se,G.isNewLine=Ut,G.keywordTypes=qt,G.lineBreak=Kt,G.lineBreakG=Ee,G.nonASCIIwhitespace=Be,G.parse=Ve,G.parseExpressionAt=Re,G.tokContexts=x,G.tokTypes=z,G.tokenizer=$e,G.version=Me})}(Hi,Hi.exports)),Hi.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(xt){(function(pt,G){pt=pt||Ui;var Ct=pt.window,bt=pt.document,L=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],i=e.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(c,v){for(var S=0,b=this.length;S<b;S++)c.call(v,this[S],S,this)},h=function(c,v){for(var S in this)this.hasOwnProperty(S)&&c.call(v,this[S],S,this)},l=Object.assign||function(c){for(var v=1,S=arguments.length;v<S;v++){var b=arguments[v];for(var x in b)b.hasOwnProperty(x)&&(c[x]=b[x])}return c},f=function(c,v,S){if(c){var b=s(c,"length");(b&&typeof b.value=="number"?o:h).call(c,v,S=S||c)}return S};function g(c,v,S,b,x){var m={};function _(I,k){k=k||(k=s(v,I))&&(k.get?k:k.value),typeof k=="string"&&k[0]==="#"&&(k=c[k.substring(1)]||k);var T=typeof k=="function",O=k,M=x||T&&!k.base?k&&k.get?I in c:c[I]:null,A;(!x||!M)&&(T&&M&&(k.base=M),T&&b!==!1&&(A=I.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(m[A[3].toLowerCase()+A[4]]=A[2]),(!O||T||!O.get||typeof O.get!="function"||!d.isPlainObject(O))&&(O={value:O,writable:!0}),(s(c,I)||{configurable:!0}).configurable&&(O.configurable=!0,O.enumerable=S??!A),a(c,I,O))}if(v){for(var p in v)v.hasOwnProperty(p)&&!t.test(p)&&_(p);for(var p in m){var y=m[p],C=c["set"+y],P=c["get"+y]||C&&c["is"+y];P&&(b===!0||P.length===0)&&_(p,{get:P,set:C})}}return c}function d(){for(var c=0,v=arguments.length;c<v;c++){var S=arguments[c];S&&l(this,S)}return this}return g(d,{inject:function(c){if(c){var v=c.statics===!0?c:c.statics,S=c.beans,b=c.preserve;v!==c&&g(this.prototype,c,c.enumerable,S,b),g(this,v,null,S,b)}for(var x=1,m=arguments.length;x<m;x++)this.inject(arguments[x]);return this},extend:function(){for(var c=this,v,S,b=0,x,m=arguments.length;b<m&&!(v&&S);b++)x=arguments[b],v=v||x.initialize,S=S||x.prototype;return v=v||function(){c.apply(this,arguments)},S=v.prototype=S||r(this.prototype),a(S,"constructor",{value:v,writable:!0,configurable:!0}),g(v,this),arguments.length&&this.inject.apply(v,arguments),v.base=c,v}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var c=0,v=arguments.length;c<v;c++){var S=arguments[c];S&&g(this,S,S.enumerable,S.beans,S.preserve)}return this},extend:function(){var c=r(this);return c.inject.apply(c,arguments)},each:function(c,v){return f(this,c,v)},clone:function(){return new this.constructor(this)},statics:{set:l,each:f,create:r,define:a,describe:s,clone:function(c){return l(new c.constructor,c)},isPlainObject:function(c){var v=c!=null&&c.constructor;return v&&(v===Object||v===d||v.name==="Object")},pick:function(c,v){return c!==G?c:v},slice:function(c,v,S){return i.call(c,v,S)}}})};xt.exports=L,L.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+L.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+(i==="number"?te.instance.number(t):i==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return L.importJSON(t,this)},exportJSON:function(t){return L.exportJSON(this,t)},toJSON:function(){return L.serialize(this)},set:function(t,e){return t&&L.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!L.exports[i]&&(L.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&typeof t=="object"&&typeof e=="object"){if(Array.isArray(t)&&Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(;i--;)if(!L.equals(t[i],e[i]))return!1}else{var r=Object.keys(t),i=r.length;if(i!==Object.keys(e).length)return!1;for(;i--;){var s=r[i];if(!(e.hasOwnProperty(s)&&L.equals(t[s],e[s])))return!1}}return!0}return!1},read:function(t,e,i,r){if(this===L){var s=this.peek(t,e);return t.__index++,s}var a=this.prototype,o=a._readIndex,h=e||o&&t.__index||0,l=t.length,f=t[h];if(r=r||l-h,f instanceof this||i&&i.readNull&&f==null&&r<=1)return o&&(t.__index=h+1),f&&i&&i.clone?f.clone():f;if(f=L.create(a),o&&(f.__read=!0),f=f.initialize.apply(f,h>0||h+r<l?L.slice(t,h,h+r):t)||f,o){t.__index=h+f.__read;var g=f.__filtered;g&&(t.__filtered=g,f.__filtered=G),f.__read=G}return f},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,r){for(var s=[],a,o=e||0,h=r?o+r:t.length,l=o;l<h;l++)s.push(Array.isArray(a=t[l])?this.read(a,0,i):this.read(t,l,i,1));return s},readNamed:function(t,e,i,r,s){var a=this.getNamed(t,e),o=a!==G;if(o){var h=t.__filtered;if(!h){var l=this.getSource(t);h=t.__filtered=L.create(l),h.__unfiltered=l}h[e]=G}return this.read(o?[a]:t,i,r,s)},readSupported:function(t,e){var i=this.getSource(t),r=this,s=!1;return i&&Object.keys(i).forEach(function(a){if(a in e){var o=r.readNamed(t,a);o!==G&&(e[a]=o),s=!0}}),s},getSource:function(t){var e=t.__source;if(e===G){var i=t.length===1&&t[0];e=t.__source=i&&L.isPlainObject(i)?i:null}return e},getNamed:function(t,e){var i=this.getSource(t);if(i)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,r){var s;function a(g){if(!(i&&g in i)&&!(s&&g in s)){var d=e[g];d!==G&&(t[g]=d)}}if(r){for(var o={},h=0,l,f=r.length;h<f;h++)(l=r[h])in e&&(a(l),o[l]=!0);s=o}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return L.isPlainObject(t)||Array.isArray(t)||e&&typeof t=="string"},serialize:function(t,e,i,r){e=e||{};var s=!r,a;if(s&&(e.formatter=new te(e.precision),r={length:0,definitions:{},references:{},add:function(d,c){var v="#"+d._id,S=this.references[v];if(!S){this.length++;var b=c.call(d),x=d._class;x&&b[0]!==x&&b.unshift(x),this.definitions[v]=b,S=this.references[v]=[v]}return S}}),t&&t._serialize){a=t._serialize(e,r);var o=t._class;o&&!t._compactSerialize&&(s||!i)&&a[0]!==o&&a.unshift(o)}else if(Array.isArray(t)){a=[];for(var h=0,l=t.length;h<l;h++)a[h]=L.serialize(t[h],e,i,r)}else if(L.isPlainObject(t)){a={};for(var f=Object.keys(t),h=0,l=f.length;h<l;h++){var g=f[h];a[g]=L.serialize(t[g],e,i,r)}}else typeof t=="number"?a=e.formatter.number(t,e.precision):a=t;return s&&r.length>0?[["dictionary",r.definitions],a]:a},deserialize:function(t,e,i,r,s){var a=t,o=!i,h=o&&t&&t.length&&t[0][0]==="dictionary";if(i=i||{},Array.isArray(t)){var l=t[0],f=l==="dictionary";if(t.length==1&&/^#/.test(l))return i.dictionary[l];l=L.exports[l],a=[];for(var g=l?1:0,d=t.length;g<d;g++)a.push(L.deserialize(t[g],e,i,f,h));if(l){var c=a;e?a=e(l,c,o||s):a=new l(c)}}else if(L.isPlainObject(t)){a={},r&&(i.dictionary=a);for(var v in t)a[v]=L.deserialize(t[v],e,i)}return h?a[1]:a},exportJSON:function(t,e){var i=L.serialize(t,e);return e&&e.asString==!1?i:JSON.stringify(i)},importJSON:function(t,e){return L.deserialize(typeof t=="string"?JSON.parse(t):t,function(i,r,s){var a=s&&e&&e.constructor===i,o=a?e:L.create(i.prototype);if(r.length===1&&o instanceof z&&(a||!(o instanceof Ee))){var h=r[0];L.isPlainObject(h)&&(h.insert=!1,a&&(r=r.concat([z.INSERT])))}return(a?o.set:i).apply(o,r),a&&(e=null),o})},push:function(t,e){var i=e.length;if(i<4096)t.push.apply(t,e);else{var r=t.length;t.length+=i;for(var s=0;s<i;s++)t[r+s]=e[s]}return t},splice:function(t,e,i,r){var s=e&&e.length,a=i===G;i=a?t.length:i,i>t.length&&(i=t.length);for(var o=0;o<s;o++)e[o]._index=i+o;if(a)return L.push(t,e),[];var h=[i,r];e&&L.push(h,e);for(var l=t.splice.apply(t,h),o=0,f=l.length;o<f;o++)l[o]._index=G;for(var o=i+s,f=t.length;o<f;o++)t[o]._index=o;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(e,i){return i.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var re={on:function(t,e){if(typeof t!="string")L.each(t,function(a,o){this.on(o,a)},this);else{var i=this._eventTypes,r=i&&i[t],s=this._callbacks=this._callbacks||{};s=s[t]=s[t]||[],s.indexOf(e)===-1&&(s.push(e),r&&r.install&&s.length===1&&r.install.call(this,t))}return this},off:function(t,e){if(typeof t!="string"){L.each(t,function(o,h){this.off(h,o)},this);return}var i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t],a;return s&&(!e||(a=s.indexOf(e))!==-1&&s.length===1?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):a!==-1&&s.splice(a,1)),this},once:function(t,e){return this.on(t,function i(){e.apply(this,arguments),this.off(t,i)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var r=L.slice(arguments,1),s=e&&e.target&&!e.currentTarget;i=i.slice(),s&&(e.currentTarget=this);for(var a=0,o=i.length;a<o;a++)if(i[a].apply(this,r)==!1){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,r=t?"install":"uninstall";if(e){for(var s in i)if(i[s].length>0){var a=e[s],o=a&&a[r];o&&o.call(this,s)}}},statics:{inject:function t(e){var i=e._events;if(i){var r={};L.each(i,function(s,a){var o=typeof s=="string",h=o?s:a,l=L.capitalize(h),f=h.substring(2).toLowerCase();r[f]=o?{}:s,h="_"+h,e["get"+l]=function(){return this[h]},e["set"+l]=function(g){var d=this[h];d&&this.off(f,d),g&&this.on(f,g),this[h]=g}}),e._eventTypes=r}return t.base.apply(this,arguments)}}},Yt=L.extend({_class:"PaperScope",initialize:function t(){n=this,this.settings=new L({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var i=ue.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:Zt.nativeModes},ue.release(i)}if(!this.agent){var r=pt.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],a=s==="darwin"?"mac":s,o=e.agent=e.browser={platform:a};a&&(o[a]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(h,l,f,g,d){if(!o.chrome){var c=l==="opera"?g:/^(node|trident)$/.test(l)?d:f;o.version=c,o.versionNumber=parseFloat(c),l={trident:"msie",jsdom:"node"}[l]||l,o.name=l,o[l]=!0}}),o.chrome&&delete o.webkit,o.atom&&delete o.chrome}},version:"0.12.18",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var i=n.PaperScript.execute(t,this,e);return Tt.updateFocus(),i},install:function(t){var e=this;L.each(["project","view","tool"],function(r){L.define(t,r,{configurable:!0,get:function(){return e[r]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return n=this,this.project=new Lt(t),this},createCanvas:function(t,e){return ue.getCanvas(t,e)},activate:function(){n=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(var i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete Yt._scopes[this._id]},statics:new function(){function t(e){return e+="Attribute",function(i,r){return i[e](r)||i[e]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),be=L.extend(re,{initialize:function(t){this._scope=n,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(L.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),Te={findItemBoundsCollisions:function(t,e,i){function r(o){for(var h=new Array(o.length),l=0;l<o.length;l++){var f=o[l].getBounds();h[l]=[f.left,f.top,f.right,f.bottom]}return h}var s=r(t),a=!e||e===t?s:r(e);return this.findBoundsCollisions(s,a,i||0)},findCurveBoundsCollisions:function(t,e,i,r){function s(c){for(var v=Math.min,S=Math.max,b=new Array(c.length),x=0;x<c.length;x++){var m=c[x];b[x]=[v(m[0],m[2],m[4],m[6]),v(m[1],m[3],m[5],m[7]),S(m[0],m[2],m[4],m[6]),S(m[1],m[3],m[5],m[7])]}return b}var a=s(t),o=!e||e===t?a:s(e);if(r){for(var h=this.findBoundsCollisions(a,o,i||0,!1,!0),l=this.findBoundsCollisions(a,o,i||0,!0,!0),f=[],g=0,d=h.length;g<d;g++)f[g]={hor:h[g],ver:l[g]};return f}return this.findBoundsCollisions(a,o,i||0)},findBoundsCollisions:function(t,e,i,r,s){var a=!e||t===e,o=a?t:t.concat(e),h=t.length,l=o.length;function f(X,tt,et){for(var j=0,K=X.length;j<K;){var it=K+j>>>1;o[X[it]][tt]<et?j=it+1:K=it}return j-1}for(var g=r?1:0,d=g+2,c=r?0:1,v=c+2,S=new Array(l),b=0;b<l;b++)S[b]=b;S.sort(function(X,tt){return o[X][g]-o[tt][g]});for(var x=[],m=new Array(h),b=0;b<l;b++){var _=S[b],p=o[_],y=a?_:_-h,C=_<h,P=a||!C,I=C?[]:null;if(x.length){var k=f(x,d,p[g]-i)+1;if(x.splice(0,k),a&&s){I=I.concat(x);for(var T=0;T<x.length;T++){var O=x[T];m[O].push(y)}}else for(var M=p[v],A=p[c],T=0;T<x.length;T++){var O=x[T],N=o[O],V=O<h,F=a||O>=h;(s||(C&&F||P&&V)&&M>=N[c]-i&&A<=N[v]+i)&&(C&&F&&I.push(a?O:O-h),P&&V&&m[O].push(y))}}if(C&&(t===e&&I.push(_),m[_]=I),x.length){var D=p[d],H=f(x,d,D);x.splice(H+1,0,_)}else x.push(_)}for(var b=0;b<m.length;b++){var W=m[b];W&&W.sort(function(tt,et){return tt-et})}return m}},te=L.extend({initialize:function(t){this.precision=L.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});te.instance=new te;var mt=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,s=Math.pow,a=Math.log2||function(d){return Math.log(d)*Math.LOG2E},o=1e-12,h=112e-18;function l(d,c,v){return d<c?c:d>v?v:d}function f(d,c,v){function S(k){var T=k*134217729,O=k-T,M=O+T,A=k-M;return[M,A]}var b=c*c-d*v,x=c*c+d*v;if(i(b)*3<x){var m=S(d),_=S(c),p=S(v),y=c*c,C=_[0]*_[0]-y+2*_[0]*_[1]+_[1]*_[1],P=d*v,I=m[0]*p[0]-P+m[0]*p[1]+m[1]*p[0]+m[1]*p[1];b=y-P+(C-I)}return b}function g(){var d=Math.max.apply(Math,arguments);return d&&(d<1e-8||d>1e8)?s(2,-Math.round(a(d))):0}return{EPSILON:o,MACHINE_EPSILON:h,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(r(2)-1)/3,isZero:function(d){return d>=-o&&d<=o},isMachineZero:function(d){return d>=-h&&d<=h},clamp:l,integrate:function(d,c,v,S){for(var b=t[S-2],x=e[S-2],m=(v-c)*.5,_=m+c,p=0,y=S+1>>1,C=S&1?x[p++]*d(_):0;p<y;){var P=m*b[p];C+=x[p++]*(d(_+P)+d(_-P))}return m*C},findRoot:function(d,c,v,S,b,x,m){for(var _=0;_<x;_++){var p=d(v),y=p/c(v),C=v-y;if(i(y)<m){v=C;break}p>0?(b=v,v=C<=S?(S+b)*.5:C):(S=v,v=C>=b?(S+b)*.5:C)}return l(v,S,b)},solveQuadratic:function(d,c,v,S,b,x){var m,_=1/0;if(i(d)<o){if(i(c)<o)return i(v)<o?-1:0;m=-v/c}else{c*=-.5;var p=f(d,c,v);if(p&&i(p)<h){var y=g(i(d),i(c),i(v));y&&(d*=y,c*=y,v*=y,p=f(d,c,v))}if(p>=-h){var C=p<0?0:r(p),P=c+(c<0?-C:C);P===0?(m=v/d,_=-m):(m=P/d,_=v/P)}}var I=0,k=b==null,T=b-o,O=x+o;return isFinite(m)&&(k||m>T&&m<O)&&(S[I++]=k?m:l(m,b,x)),_!==m&&isFinite(_)&&(k||_>T&&_<O)&&(S[I++]=k?_:l(_,b,x)),I},solveCubic:function(d,c,v,S,b,x,m){var _=g(i(d),i(c),i(v),i(S)),p,y,C,P,I;_&&(d*=_,c*=_,v*=_,S*=_);function k(H){p=H;var W=d*p;y=W+c,C=y*p+v,P=(W+y)*p+C,I=C*p+S}if(i(d)<o)d=c,y=v,C=S,p=1/0;else if(i(S)<o)y=c,C=v,p=0;else{k(-(c/d)/3);var T=I/d,O=s(i(T),1/3),M=T<0?-1:1,A=-P/d,N=A>0?1.324717957244746*Math.max(O,r(A)):O,V=p-M*N;if(V!==p){do k(V),V=P===0?p:p-I/P/(1+h);while(M*V>M*p);i(d)*p*p>i(S/p)&&(C=-S/p,y=(C-v)/p)}}var F=mt.solveQuadratic(d,y,C,b,x,m),D=x==null;return isFinite(p)&&(F===0||F>0&&p!==b[0]&&p!==b[1])&&(D||p>x-o&&p<m+o)&&(b[F++]=D?p:l(p,x,m)),F}}},Ae={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}else return this._id++}},B=L.extend({_class:"Point",_readIndex:!0,initialize:function(e,i){var r=typeof e,s=this.__read,a=0;if(r==="number"){var o=typeof i=="number";this._set(e,o?i:e),s&&(a=o?2:1)}else if(r==="undefined"||e===null)this._set(0,0),s&&(a=e===null?1:0);else{var h=r==="string"?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"x"in h?this._set(h.x||0,h.y||0):"width"in h?this._set(h.width||0,h.height||0):"angle"in h?(this._set(h.length||0,0),this.setAngle(h.angle||0)):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new B(this.x,this.y)},toString:function(){var t=te.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();mt.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=B.read(arguments),e=this.getLength()*t.getLength();if(mt.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=B.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,e=B.read(t),i=e.x-this.x,r=e.y-this.y,s=i*i+r*r,a=L.read(t);return a?s:Math.sqrt(s)},normalize:function(t){t===G&&(t=1);var e=this.getLength(),i=e!==0?t/e:0,r=new B(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(t===0)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,r=Math.sin(t),s=Math.cos(t);return i=new B(i.x*s-i.y*r,i.x*r+i.y*s),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=B.read(arguments);return new B(this.x+t.x,this.y+t.y)},subtract:function(){var t=B.read(arguments);return new B(this.x-t.x,this.y-t.y)},multiply:function(){var t=B.read(arguments);return new B(this.x*t.x,this.y*t.y)},divide:function(){var t=B.read(arguments);return new B(this.x/t.x,this.y/t.y)},modulo:function(){var t=B.read(arguments);return new B(this.x%t.x,this.y%t.y)},negate:function(){return new B(-this.x,-this.y)},isInside:function(){return at.read(arguments).contains(this)},isClose:function(){var t=arguments,e=B.read(t),i=L.read(t);return this.getDistance(e)<=i},isCollinear:function(){var t=B.read(arguments);return B.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=B.read(arguments);return B.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=mt.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=B.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=B.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=B.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new B(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=B.read(t),i=B.read(t);return new B(Math.min(e.x,i.x),Math.min(e.y,i.y))},max:function(){var t=arguments,e=B.read(t),i=B.read(t);return new B(Math.max(e.x,i.x),Math.max(e.y,i.y))},random:function(){return new B(Math.random(),Math.random())},isCollinear:function(t,e,i,r){return Math.abs(t*r-e*i)<=Math.sqrt((t*t+e*e)*(i*i+r*r))*1e-8},isOrthogonal:function(t,e,i,r){return Math.abs(t*i+e*r)<=Math.sqrt((t*t+e*e)*(i*i+r*r))*1e-8}}},L.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new B(e(this.x),e(this.y))}},{})),se=B.extend({initialize:function(e,i,r,s){this._x=e,this._y=i,this._owner=r,this._setter=s},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),rt=L.extend({_class:"Size",_readIndex:!0,initialize:function(e,i){var r=typeof e,s=this.__read,a=0;if(r==="number"){var o=typeof i=="number";this._set(e,o?i:e),s&&(a=o?2:1)}else if(r==="undefined"||e===null)this._set(0,0),s&&(a=e===null?1:0);else{var h=r==="string"?e.split(/[\s,]+/)||[]:e;a=1,Array.isArray(h)?this._set(+h[0],+(h.length>1?h[1]:h[0])):"width"in h?this._set(h.width||0,h.height||0):"x"in h?this._set(h.x||0,h.y||0):(this._set(0,0),a=0)}return s&&(this.__read=a),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new rt(this.width,this.height)},toString:function(){var t=te.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=rt.read(arguments);return new rt(this.width+t.width,this.height+t.height)},subtract:function(){var t=rt.read(arguments);return new rt(this.width-t.width,this.height-t.height)},multiply:function(){var t=rt.read(arguments);return new rt(this.width*t.width,this.height*t.height)},divide:function(){var t=rt.read(arguments);return new rt(this.width/t.width,this.height/t.height)},modulo:function(){var t=rt.read(arguments);return new rt(this.width%t.width,this.height%t.height)},negate:function(){return new rt(-this.width,-this.height)},isZero:function(){var t=mt.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new rt(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new rt(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new rt(Math.random(),Math.random())}}},L.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new rt(e(this.width),e(this.height))}},{})),Ot=rt.extend({initialize:function(e,i,r,s){this._width=e,this._height=i,this._owner=r,this._setter=s},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),at=L.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,i,r,s){var a=arguments,o=typeof e,h;if(o==="number"?(this._set(e,i,r,s),h=4):o==="undefined"||e===null?(this._set(0,0,0,0),h=e===null?1:0):a.length===1&&(Array.isArray(e)?(this._set.apply(this,e),h=1):e.x!==G||e.width!==G?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),h=1):e.from===G&&e.to===G&&(this._set(0,0,0,0),L.readSupported(a,this)&&(h=1))),h===G){var l=B.readNamed(a,"from"),f=L.peek(a),g=l.x,d=l.y,c,v;if(f&&f.x!==G||L.hasNamed(a,"to")){var S=B.readNamed(a,"to");c=S.x-g,v=S.y-d,c<0&&(g=S.x,c=-c),v<0&&(d=S.y,v=-v)}else{var b=rt.read(a);c=b.width,v=b.height}this._set(g,d,c,v),h=a.__index}var x=a.__filtered;return x&&(this.__filtered=x),this.__read&&(this.__read=h),this},set:"#initialize",_set:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},clone:function(){return new at(this.x,this.y,this.width,this.height)},equals:function(t){var e=L.isPlainValue(t)?at.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=te.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?B:se;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=B.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?rt:Ot;return new e(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=rt.read(arguments),e=this._sx,i=this._sy,r=t.width,s=t.height;e&&(this.x+=(this.width-r)*e),i&&(this.y+=(this.height-s)*i),this.width=r,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=this._sx===.5?e*2:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=this._sy===.5?e*2:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=this._sx===.5?e*2:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=this._sy===.5?e*2:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var e=t?B:se;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=B.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==G||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(at.read(arguments)):this._containsPoint(B.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=at.read(arguments),e=L.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=at.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new at(e,i,r-e,s-i)},unite:function(){var t=at.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new at(e,i,r-e,s-i)},include:function(){var t=B.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new at(e,i,r-e,s-i)},expand:function(){var t=rt.read(arguments),e=t.width,i=t.height;return new at(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===G?t:e)-this.height)}},L.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),r=/^[RL]/.test(i);e>=4&&(t[1]+=r?"Y":"X");var s=t[r?0:1],a=t[r?1:0],o="get"+s,h="get"+a,l="set"+s,f="set"+a,g="get"+i,d="set"+i;this[g]=function(c){var v=c?B:se;return new v(this[o](),this[h](),this,d)},this[d]=function(){var c=B.read(arguments);this[l](c.x),this[f](c.y)}},{beans:!0})),Se=at.extend({initialize:function(e,i,r,s,a,o){this._set(e,i,r,s,!0),this._owner=a,this._setter=o},_set:function(t,e,i,r,s){return this._x=t,this._y=e,this._width=i,this._height=r,s||this._owner[this._setter](this),this}},new function(){var t=at.prototype;return L.each(["x","y","width","height"],function(e){var i=L.capitalize(e),r="_"+e;this["get"+i]=function(){return this[r]},this["set"+i]=function(s){this[r]=s,this._dontNotify||this._owner[this._setter](this)}},L.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(e){var i=this._owner;i._changeSelection&&i._changeSelection(2,e)}}))}),yt=L.extend({_class:"Matrix",initialize:function t(e,i){var r=arguments,s=r.length,a=!0;if(s>=6?this._set.apply(this,r):s===1||s===2?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):a=!1:s?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,r,s,a,o){return this._a=t,this._b=e,this._c=i,this._d=r,this._tx=s,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return L.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new yt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=te.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return i?(i.transform(null,L.pick(t,!0),e),this.isIdentity()):!1},translate:function(){var t=B.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=arguments,e=B.read(t),i=B.read(t,0,{readNull:!0});return i&&this.translate(i),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,i&&this.translate(i.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=B.read(arguments,1),i=e.x,r=e.y,s=Math.cos(t),a=Math.sin(t),o=i-i*s+r*a,h=r-i*a-r*s,l=this._a,f=this._b,g=this._c,d=this._d;return this._a=s*l+a*g,this._b=s*f+a*d,this._c=-a*l+s*g,this._d=-a*f+s*d,this._tx+=o*l+h*g,this._ty+=o*f+h*d,this._changed(),this},shear:function(){var t=arguments,e=B.read(t),i=B.read(t,0,{readNull:!0});i&&this.translate(i);var r=this._a,s=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*s,i&&this.translate(i.negate()),this._changed(),this},skew:function(){var t=arguments,e=B.read(t),i=B.read(t,0,{readNull:!0}),r=Math.PI/180,s=new B(Math.tan(e.x*r),Math.tan(e.y*r));return this.shear(s,i)},append:function(t,e){if(t){var i=this._a,r=this._b,s=this._c,a=this._d,o=t._a,h=t._c,l=t._b,f=t._d,g=t._tx,d=t._ty;this._a=o*i+l*s,this._c=h*i+f*s,this._b=o*r+l*a,this._d=h*r+f*a,this._tx+=g*i+d*s,this._ty+=g*r+d*a,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,l=t._a,f=t._c,g=t._b,d=t._d,c=t._tx,v=t._ty;this._a=l*i+f*r,this._c=l*s+f*a,this._b=g*i+d*r,this._d=g*s+d*a,this._tx=l*o+f*h+c,this._ty=g*o+d*h+v,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,r=this._d,s=this._tx,a=this._ty,o=t*r-e*i,h=null;return o&&!isNaN(o)&&isFinite(s)&&isFinite(a)&&(this._a=r/o,this._b=-e/o,this._c=-i/o,this._d=t/o,this._tx=(i*a-r*s)/o,this._ty=(e*s-t*a)/o,h=this),h},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new yt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(B.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var r=t.x,s=t.y;return e||(e=new B),e._set(r*this._a+s*this._c+this._tx,r*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var r=0,s=2*i;r<s;r+=2){var a=t[r],o=t[r+1];e[r]=a*this._a+o*this._c+this._tx,e[r+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,r=e+t.width,s=i+t.height,a=[e,i,r,i,r,s,e,s];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,i){for(var r=this._transformCorners(t),s=r.slice(0,2),a=s.slice(),o=2;o<8;o++){var h=r[o],l=o&1;h<s[l]?s[l]=h:h>a[l]&&(a[l]=h)}return e||(e=new at),e._set(s[0],s[1],a[0]-s[0],a[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(B.read(arguments))},_inverseTransform:function(t,e,i){var r=this._a,s=this._b,a=this._c,o=this._d,h=this._tx,l=this._ty,f=r*o-s*a,g=null;if(f&&!isNaN(f)&&isFinite(h)&&isFinite(l)){var d=t.x-this._tx,c=t.y-this._ty;e||(e=new B),g=e._set((d*o-c*a)/f,(c*r-d*s)/f,i)}return g},decompose:function(){var t=this._a,e=this._b,i=this._c,r=this._d,s=t*r-e*i,a=Math.sqrt,o=Math.atan2,h=180/Math.PI,l,f,g;if(t!==0||e!==0){var d=a(t*t+e*e);l=Math.acos(t/d)*(e>0?1:-1),f=[d,s/d],g=[o(t*i+e*r,d*d),0]}else if(i!==0||r!==0){var c=a(i*i+r*r);l=Math.asin(i/c)*(r>0?1:-1),f=[s/c,c],g=[0,o(t*i+e*r,c*c)]}else l=0,g=f=[0,0];return{translation:this.getTranslation(),rotation:l*h,scaling:new B(f),skewing:new B(g[0]*h,g[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new B(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},L.each(["a","b","c","d","tx","ty"],function(t){var e=L.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(r){this[i]=r,this._changed()}},{})),qt=L.extend({_class:"Line",initialize:function(e,i,r,s,a){var o=!1;arguments.length>=4?(this._px=e,this._py=i,this._vx=r,this._vy=s,o=a):(this._px=e.x,this._py=e.y,this._vx=i.x,this._vy=i.y,o=r),o||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new B(this._px,this._py)},getVector:function(){return new B(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return qt.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return qt.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return qt.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return B.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return B.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,r,s,a,o,h,l,f){l||(i-=t,r-=e,o-=s,h-=a);var g=i*h-r*o;if(!mt.isMachineZero(g)){var d=t-s,c=e-a,v=(o*c-h*d)/g,S=(i*c-r*d)/g,b=1e-12,x=-b,m=1+b;if(f||x<v&&v<m&&x<S&&S<m)return f||(v=v<=0?0:v>=1?1:v),new B(t+v*i,e+v*r)}},getSide:function(t,e,i,r,s,a,o,h){o||(i-=t,r-=e);var l=s-t,f=a-e,g=l*r-f*i;return!h&&mt.isMachineZero(g)&&(g=(l*i+l*i)/(i*i+r*r),g>=0&&g<=1&&(g=0)),g<0?-1:g>0?1:0},getSignedDistance:function(t,e,i,r,s,a,o){return o||(i-=t,r-=e),i===0?r>0?s-t:t-s:r===0?i<0?a-e:e-a:((s-t)*r-(a-e)*i)/(r>i?r*Math.sqrt(1+i*i/(r*r)):i*Math.sqrt(1+r*r/(i*i)))},getDistance:function(t,e,i,r,s,a,o){return Math.abs(qt.getSignedDistance(t,e,i,r,s,a,o))}}}),Lt=be.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){be.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ge(null,null,this),this._view=Tt.create(this,e||ue.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return L.serialize(this._children,t,!0,e)},_changed:function(t,e){if(t&1){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var r=this._changes;if(r&&e){var s=this._changesById,a=e._id,o=s[a];o?o.flags|=t:r.push(s[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ee({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:Be,match:function(i){var r=i._definition,s=r._id;return e[s]||(e[s]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var r=t[i],s=r._selection;s&1&&r.isInserted()?e.push(r):s||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(G,t)},insertLayer:function(t,e){if(e instanceof Ee){e._remove(!1,!0),L.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(G,new Ee(z.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return z._getItems(this,t)},getItem:function(t){return z._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return L.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){t==="mouseup"&&(e.mousedrag=null);var i=e[t];if(i){for(var r in i){var s=i[r];for(var a in e){var o=e[a];o&&o!=i&&delete o[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,s=new L({offset:new B(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new yt],updateMatrix:!0}),a=0,o=r.length;a<o;a++)r[a].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var h=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(var g in h)h[g]._drawSelection(t,e,l,h,f);t.restore()}}}),z=L.extend(re,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=L.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new yt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return L.each(t,function(e){this._events[e]={install:function(i){this.getView()._countItemEvent(i,1)},uninstall:function(i){this.getView()._countItemEvent(i,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&L.isPlainObject(t),r=i&&t.internal===!0,s=this._matrix=new yt,a=i&&t.project||n.project,o=n.settings;return this._id=r?null:Ae.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&s.translate(e),s._owner=this,this._style=new Ge(a._currentStyle,this,a),r||i&&t.insert==!1||!o.insertItems&&!(i&&t.insert==!0)?this._setProject(a):(i&&t.parent||a)._insertItem(G,this,!0),i&&t!==z.NO_INSERT&&t!==z.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var i={},r=this;function s(a){for(var o in a){var h=r[o];L.equals(h,o==="leading"?a.fontSize*1.2:a[o])||(i[o]=L.serialize(h,t,o!=="data",e))}}return s(this._serializeFields),this instanceof Kt||s(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,i=this._parent||e,r=this._project;t&8&&(this._bounds=this._position=this._decomposed=G),t&16&&(this._globalMatrix=G),i&&t&72&&z._clearBoundsCache(i),t&2&&z._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||G,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},L.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=L.capitalize(t),i="_"+t,r={locked:256,visible:265};this["get"+e]=function(){return this[i]},this["set"+e]=function(s){s!=this[i]&&(this[i]=s,this._changed(r[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(this._selection&1);if(t&&e){for(var i=0,r=t.length;i<r;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,r=e.length;i<r;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?B:se,i=this._position||(this._position=this._getPositionFromBounds());return new e(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(B.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new se(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=B.read(arguments,0,{clone:!0,readNull:!0}),this._position=G}},L.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(i){return this.getBounds(i,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof yt,r=L.set({},i?e:t,this._boundsOptions);(!r.stroke||this.getStrokeScaling())&&(r.cacheItem=this);var s=this._getCachedBounds(i&&t,r).rect;return arguments.length?s:new Se(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=at.read(arguments),e=this.getBounds(),i=this._matrix,r=new yt,s=t.getCenter();r.translate(s),(t.width!=e.width||t.height!=e.height)&&(i.isInvertible()||(i.set(i._backup||new yt().translate(i.getTranslation())),e=this.getBounds()),r.scale(e.width!==0?t.width/e.width:0,e.height!==0?t.height/e.height:0)),s=e.getCenter(),r.translate(-s.x,-s.y),this.transform(r)},_getBounds:function(t,e){var i=this._children;return!i||!i.length?new at:(z._updateBoundsCache(this,e.cacheItem),z._getBounds(i,t,e))},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var r=e.internal&&!i,s=e.cacheItem,a=r?null:this._matrix._orNullIfIdentity(),o=s&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,r),h=this._bounds;if(z._updateBoundsCache(this._parent||this._symbol,s),o&&h&&o in h){var l=h[o];return{rect:l.rect.clone(),nonscaling:l.nonscaling}}var f=this._getBounds(t||a,e),g=f.rect||f,d=this._style,c=f.nonscaling||d.hasStroke()&&!d.getStrokeScaling();if(o){h||(this._bounds=h={});var l=h[o]={rect:g.clone(),nonscaling:c,internal:r}}return{rect:g,nonscaling:c}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=i?i.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[i]||(r.list.push(e),r.ids[i]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=G;for(var i=0,r=e.list,s=r.length;i<s;i++){var a=r[i];a!==t&&(a._bounds=a._position=G,a._boundsCache&&z._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var r=1/0,s=-r,a=r,o=s,h=!1;i=i||{};for(var l=0,f=t.length;l<f;l++){var g=t[l];if(g._visible&&!g.isEmpty(!0)){var d=g._getCachedBounds(e&&e.appended(g._matrix),i,!0),c=d.rect;r=Math.min(c.x,r),a=Math.min(c.y,a),s=Math.max(c.x+c.width,s),o=Math.max(c.y+c.height,o),d.nonscaling&&(h=!0)}}return{rect:isFinite(r)?new at(r,a,s-r,o-a):new at,nonscaling:h}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(e!=null&&t!=null){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new se(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=B.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),r=this._decomposed,s=new yt,a=mt.isZero;if(a(t.x)||a(t.y))s.translate(r.translation),i&&s.rotate(i),s.scale(e.x,e.y),this._matrix.set(s);else{var o=this.getPosition(!0);s.translate(o),i&&s.rotate(i),s.scale(e.x/t.x,e.y/t.y),i&&s.rotate(-i),s.translate(o.negate()),this.transform(s)}r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var i=this._parent,r=[];i;){if(!i._globalMatrix){e=null;for(var s=0,a=r.length;s<a;s++)r[s]._globalMatrix=null;break}r.push(i),i=i._parent}if(!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0))}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,r=0,s=i&&i.length;r<s;r++)i[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Ee)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(t){var e=this._parent,i=e&&e._children;i&&e.insertChildren(t in i?t:G,[this])},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return L.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(z.NO_INSERT),i=this._children,r=L.pick(t?t.insert:G,t===G||t===!0),s=L.pick(t?t.deep:G,!0);i&&e.copyAttributes(this),(!i||s)&&e.copyContent(this),i||e.copyAttributes(this),r&&e.insertAbove(this);var a=this._name,o=this._parent;if(a&&o){for(var i=o._children,h=a,l=1;i[a];)a=h+" "+l++;a!==h&&e.setName(a)}return e},copyContent:function(t){for(var e=t._children,i=0,r=e&&e.length;i<r;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,s=i.length;r<s;r++){var a=i[r];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,h=t._name;this._data=o?L.clone(o):null,h&&this.setName(h)},rasterize:function(t,e){var i,r,s;L.isPlainObject(t)?(i=t.resolution,r=t.insert,s=t.raster):(i=t,r=e),s||(s=new Oe(z.NO_INSERT));var a=this.getStrokeBounds(),o=(i||this.getView().getResolution())/72,h=a.getTopLeft().floor(),l=a.getBottomRight().ceil(),f=new rt(l.subtract(h)),g=f.multiply(o);if(s.setSize(g,!0),!g.isZero()){var d=s.getContext(!0),c=new yt().scale(o).translate(h.negate());d.save(),c.applyToContext(d),this.draw(d,new L({matrices:[c]})),d.restore()}return s._matrix.set(new yt().translate(h.add(f.divide(2))).scale(1/o)),(r===G||r)&&s.insertAbove(this),s},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(B.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return at.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new vt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof z?this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0:!1}},new function(){function t(){var r=arguments;return this._hitTest(B.read(r),ce.getOptions(r))}function e(){var r=arguments,s=B.read(r),a=ce.getOptions(r),o=[];return this._hitTest(s,new L({all:o},a)),o}function i(r,s,a,o){var h=this._children;if(h)for(var l=h.length-1;l>=0;l--){var f=h[l],g=f!==o&&f._hitTest(r,s,a);if(g&&!s.all)return g}return null}return Lt.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,s=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new rt(vt._getStrokePadding(a,r._shiftless().invert()));if(t=r._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var h=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==L.hyphenate(this._class)||e.class&&!(this instanceof e.class)),l=e.match,f=this,g,d;function c(p){return p&&l&&!l(p)&&(p=null),p&&e.all&&e.all.push(p),p}function v(p,y){var C=y?g["get"+y]():f.getPosition();if(t.subtract(C).divide(o).length<=1)return new ce(p,f,{name:y?L.hyphenate(y):p,point:C})}var S=e.position,b=e.center,x=e.bounds;if(h&&this._parent&&(S||b||x)){if((b||x)&&(g=this.getInternalBounds()),d=S&&v("position")||b&&v("center","Center"),!d&&x)for(var m=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],_=0;_<8&&!d;_++)d=v("bounds",m[_]);d=c(d)}return d||(d=this._hitTestChildren(t,e,s)||h&&c(this._hitTestSelf(t,e,s,this.getStrokeScaling()?null:s._shiftless().invert()))||null),d&&d.point&&(d.point=r.transform(d.point)),d},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new ce("fill",this)},matches:function(t,e){function i(o,h){for(var l in o)if(o.hasOwnProperty(l)){var f=o[l],g=h[l];if(L.isPlainObject(f)&&L.isPlainObject(g)){if(!i(f,g))return!1}else if(!L.equals(f,g))return!1}return!0}var r=typeof t;if(r==="object"){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1;return!0}else{if(r==="function")return t(this);if(t==="match")return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+L.capitalize(t)]():t==="type"?L.hyphenate(this._class):this[t];if(t==="class"){if(typeof e=="function")return this instanceof e;a=this._class}if(typeof e=="function")return!!e(a);if(e){if(e.test)return e.test(a);if(L.isPlainObject(e))return i(e,a)}return L.equals(a,e)}},getItems:function(t){return z._getItems(this,t,this._matrix)},getItem:function(t){return z._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,r,s,a){if(!s){var o=typeof i=="object"&&i,h=o&&o.overlapping,l=o&&o.inside,f=h||l,c=f&&at.read([f]);s={items:[],recursive:o&&o.recursive!==!1,inside:!!l,overlapping:!!h,rect:c,path:h&&new vt.Rectangle({rectangle:c,insert:!1})},o&&(i=L.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var g=e._children,d=s.items,c=s.rect;r=c&&(r||new yt);for(var v=0,S=g&&g.length;v<S;v++){var b=g[v],x=r&&r.appended(b._matrix),m=!0;if(c){var f=b.getBounds(x);if(!c.intersects(f))continue;c.contains(f)||s.overlapping&&(f.contains(c)||s.path.intersects(b,x))||(m=!1)}if(m&&b.matches(i)&&(d.push(b),a)||(s.recursive!==!1&&t(b,i,x,s,a),a&&d.length>0))break}return d}}},{importJSON:function(t){var e=L.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(G,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){e=L.slice(e);for(var r={},s=e.length-1;s>=0;s--){var a=e[s],o=a&&a._id;!a||r[o]?e.splice(s,1):(a._remove(!1,!0),r[o]=!0)}L.splice(i,e,t,0);for(var h=this._project,l=h._changes,s=0,f=e.length;s<f;s++){var a=e[s],g=a._name;a._parent=this,a._setProject(h,!0),g&&a.setName(g),l&&a._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),r=t!==this&&i?this:null;return r&&(r._remove(!1,!0),i._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(G,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(G,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&e.length===1){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,r=this._name,s=i[r],a=s?s.indexOf(this):-1;a!==-1&&(e[r]==this&&delete e[r],s.splice(a,1),s.length?e[r]=s[0]:delete i[r])}},_remove:function(t,e){var i=this._getOwner(),r=this._project,s=this._index;return this._style&&this._style._dispose(),i?(this._name&&this._removeNamed(),s!=null&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),L.splice(i._children,null,s,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=L.pick(e,this._children.length);for(var i=L.splice(this._children,null,t,e-t),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,i=e?e.length:0;if(t){for(var r=0;r<i;r++)if(!e[r].isEmpty(t))return!1;return!0}return!i},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(o){var h=[];do h.unshift(o);while(o=o._parent);return h}for(var i=e(this),r=e(t),s=0,a=Math.min(i.length,r.length);s<a;s++)if(i[s]!=r[s])return i[s]._index<r[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},L.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var i=arguments,r=(e?L:B).read(i),s=B.read(i,0,{readNull:!0});return this.transform(new yt()[t](r,s||this.getPosition(!0)))}},{translate:function(){var t=new yt;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i){var r=this._matrix,s=t&&!t.isIdentity(),a=i&&this._canApplyMatrix||this._applyMatrix&&(s||!r.isIdentity()||e&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,h=o.getFillColor(!0),l=o.getStrokeColor(!0);h&&h.transform(t),l&&l.transform(t)}if(a&&(a=this._transformContent(r,e,i))){var f=this._pivot;f&&r._transformPoint(f,f,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var g=this._bounds,d=this._position;(s||a)&&this._changed(25);var c=s&&g&&t.decompose();if(c&&c.skewing.isZero()&&c.rotation%90===0){for(var v in g){var S=g[v];if(S.nonscaling)delete g[v];else if(a||!S.internal){var b=S.rect;t._transformBounds(b,b)}}this._bounds=g;var x=g[this._getBoundsCacheKey(this._boundsOptions||{})];x&&(this._position=this._getPositionFromBounds(x.rect))}else s&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,i){var r=this._children;if(r){for(var s=0,a=r.length;s<a;s++)r[s].transform(t,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(B.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(B.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(B.read(arguments))},localToParent:function(){return this._matrix._transformPoint(B.read(arguments))},fitBounds:function(t,e){t=at.read(arguments);var i=this.getBounds(),r=i.height/i.width,s=t.height/t.width,a=(e?r>s:r<s)?t.width/i.width:t.height/i.height,o=new at(new B,new rt(i.width*a,i.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,i){var r=this._style,s=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,s)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=r.getStrokeWidth();var a=r.getStrokeJoin(),o=r.getStrokeCap(),h=r.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),h&&(t.miterLimit=h),n.support.nativeDash){var l=r.getDashArray(),f=r.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=f):(t.mozDash=l,t.mozDashOffset=f))}}if(r.hasShadow()){var g=e.pixelRatio||1,d=i._shiftless().prepend(new yt().scale(g,g)),c=d.transform(new B(r.getShadowBlur(),0)),v=d.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=c.getLength(),t.shadowOffsetX=v.x,t.shadowOffsetY=v.y}},draw:function(t,e,i){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var r=e.matrices,s=e.viewMatrix,a=this._matrix,o=r[r.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,r.push(o),e.updateMatrix&&(this._globalMatrix=o);var h=this._blendMode,l=mt.clamp(this._opacity,0,1),f=h==="normal",g=Zt.nativeModes[h],d=f&&l===1||e.dontStart||e.clip||(g||f&&l<1)&&this._canComposite(),c=e.pixelRatio||1,v,S,b;if(!d){var x=this.getStrokeBounds(s);if(!x.width||!x.height){r.pop();return}b=e.offset,S=e.offset=x.getTopLeft().floor(),v=t,t=ue.getContext(x.getSize().ceil().add(1).multiply(c)),c!==1&&t.scale(c,c)}t.save();var m=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,_=!d&&e.clipItem,p=!m||_;if(d?(t.globalAlpha=l,g&&(t.globalCompositeOperation=h)):p&&t.translate(-S.x,-S.y),p&&(d?a:s).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(c,0,0,c,0,0);var y=e.offset;y&&t.translate(-y.x,-y.y)}this._draw(t,e,s,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),d||(Zt.process(h,t,v,l,S.subtract(b).multiply(c)),ue.release(t),e.offset=b)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof ie)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,r,s){var a=this._selection,o=a&1,h=a&2||o&&this._selectBounds,l=a&4;if(this._drawSelected||(o=!1),(o||h||l)&&this._isUpdated(s)){var f,g=this.getSelectedColor(!0)||(f=this.getLayer())&&f.getSelectedColor(!0),d=e.appended(this.getGlobalMatrix(!0)),c=i/2;if(t.strokeStyle=t.fillStyle=g?g.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,d,r),l){var v=this.getPosition(!0),S=this._parent,b=S?S.localToGlobal(v):v,x=b.x,m=b.y;t.beginPath(),t.arc(x,m,c,0,Math.PI*2,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],p=c,y=i+1,C=0;C<4;C++){var P=_[C],I=P[0],k=P[1];t.moveTo(x+I*p,m+k*p),t.lineTo(x+I*y,m+k*y),t.stroke()}}if(h){var T=d._transformCorners(this.getInternalBounds());t.beginPath();for(var C=0;C<8;C++)t[C?"lineTo":"moveTo"](T[C],T[++C]);t.closePath(),t.stroke();for(var C=0;C<8;C++)t.fillRect(T[C]-c,T[++C]-c,i,i)}}},_canComposite:function(){return!1}},L.each(["down","drag","up","move"],function(t){this["removeOn"+L.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,r=this._project,s=r._removeSets=r._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}}),{tween:function(t,e,i){i||(i=e,e=t,t=null,i||(i=e,e=null));var r=i&&i.easing,s=i&&i.start,a=i!=null&&(typeof i=="number"?i:i.duration),o=new oi(this,t,e,a,r,s);function h(l){o._handleFrame(l.time*1e3),o.running||this.off("frame",h)}return a&&this.on("frame",h),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),Kt=z.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function t(e){t.base.call(this,e),e&2050&&(this._clipItem=G)},_getClipItem:function(){var t=this._clipItem;if(t===G){t=null;for(var e=this._children,i=0,r=e.length;i<r;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var r=this._getClipItem();return r?r._getCachedBounds(r._matrix.prepended(e),L.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,r){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,i,r,s)},_draw:function(t,e){var i=e.clip,r=!i&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var s=this._children,a=0,o=s.length;a<o;a++){var h=s[a];h!==r&&h.draw(t,e)}}}),Ee=Kt.extend({_class:"Layer",initialize:function(){Kt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ut=z.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,i){this._initialize(e,i)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&L.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new Ot(t.width,t.height,this,"setSize")},setSize:function(){var t=rt.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var e=this._type,i=t.width,r=t.height;e==="rectangle"?this._radius.set(rt.min(this._radius,t.divide(2).abs())):e==="circle"?(i=r=(i+r)/2,this._radius=i/2):e==="ellipse"&&this._radius._set(i/2,r/2),this._size._set(i,r),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new Ot(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if(e==="circle"){if(t===this._radius)return;var i=t*2;this._radius=t,this._size._set(i,i)}else if(t=rt.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),e==="rectangle"){var i=rt.max(this._size,t.multiply(2));this._size.set(i)}else e==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new vt[L.capitalize(this._type)]({center:new B,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),n.settings.applyMatrix&&e.setApplyMatrix(!0),(t===G||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,r){var s=this._style,a=s.hasFill(),o=s.hasStroke(),h=e.dontFinish||e.clip,l=!r;if(a||o||h){var f=this._type,g=this._radius,d=f==="circle";if(e.dontStart||t.beginPath(),l&&d)t.arc(0,0,g,0,Math.PI*2,!0);else{var c=d?g:g.width,v=d?g:g.height,S=this._size,b=S.width,x=S.height;if(l&&f==="rectangle"&&c===0&&v===0)t.rect(-b/2,-x/2,b,x);else{var m=b/2,_=x/2,p=1-.5522847498307936,y=c*p,C=v*p,P=[-m,-_+v,-m,-_+C,-m+y,-_,-m+c,-_,m-c,-_,m-y,-_,m,-_+C,m,-_+v,m,_-v,m,_-C,m-y,_,m-c,_,-m+c,_,-m+y,_,-m,_-C,-m,_-v];r&&r.transform(P,P,32),t.moveTo(P[0],P[1]),t.bezierCurveTo(P[2],P[3],P[4],P[5],P[6],P[7]),m!==c&&t.lineTo(P[8],P[9]),t.bezierCurveTo(P[10],P[11],P[12],P[13],P[14],P[15]),_!==v&&t.lineTo(P[16],P[17]),t.bezierCurveTo(P[18],P[19],P[20],P[21],P[22],P[23]),m!==c&&t.lineTo(P[24],P[25]),t.bezierCurveTo(P[26],P[27],P[28],P[29],P[30],P[31])}}t.closePath()}!h&&(a||o)&&(this._setStyles(t,e,i),a&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new at(this._size).setCenter(0,0),r=this._style,s=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(i=t._transformBounds(i)),s?i.expand(vt._getStrokePadding(s,this._getStrokeMatrix(t,e))):i}},new function(){function t(i,r,s){var a=i._radius;if(!a.isZero())for(var o=i._size.divide(2),h=1;h<=4;h++){var l=new B(h>1&&h<4?-1:1,h>2?-1:1),f=l.multiply(o),g=f.subtract(l.multiply(a)),d=new at(s?f.add(l.multiply(s)):f,g);if(d.contains(r))return{point:g,quadrant:h}}}function e(i,r,s,a){var o=i.divide(r);return(!a||o.isInQuadrant(a))&&o.subtract(o.normalize()).multiply(r).divide(s).length<=1}return{_contains:function i(r){if(this._type==="rectangle"){var s=t(this,r);return s?r.subtract(s.point).divide(this._radius).getLength()<=1:i.base.call(this,r)}else return r.divide(this.size).getLength()<=.5},_hitTestSelf:function i(r,s,a,o){var h=!1,l=this._style,f=s.stroke&&l.hasStroke(),g=s.fill&&l.hasFill();if(f||g){var d=this._type,c=this._radius,v=f?l.getStrokeWidth()/2:0,S=s._tolerancePadding.add(vt._getStrokePadding(v,!l.getStrokeScaling()&&o));if(d==="rectangle"){var b=S.multiply(2),x=t(this,r,b);if(x)h=e(r.subtract(x.point),c,S,x.quadrant);else{var m=new at(this._size).setCenter(0,0),_=m.expand(b),p=m.expand(b.negate());h=_._containsPoint(r)&&!p._containsPoint(r)}}else h=e(r,c,S)}return h?new ce(f?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(e,i,r,s,a){var o=L.create(Ut.prototype);return o._type=e,o._size=r,o._radius=s,o._initialize(L.getNamed(a),i),o}return{Circle:function(){var e=arguments,i=B.readNamed(e,"center"),r=L.readNamed(e,"radius");return t("circle",i,new rt(r*2),r,e)},Rectangle:function(){var e=arguments,i=at.readNamed(e,"rectangle"),r=rt.min(rt.readNamed(e,"radius"),i.getSize(!0).divide(2));return t("rectangle",i.getCenter(!0),i.getSize(!0),r,e)},Ellipse:function(){var e=arguments,i=Ut._readEllipse(e),r=i.radius;return t("ellipse",i.center,r.multiply(2),r,e)},_readEllipse:function(e){var i,r;if(L.hasNamed(e,"radius"))i=B.readNamed(e,"center"),r=rt.readNamed(e,"radius");else{var s=at.readNamed(e,"rectangle");i=s.getCenter(!0),r=s.getSize(!0).divide(2)}return{center:i,radius:r}}}}}),Oe=z.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(e,i){if(!this._initialize(e,i!==G&&B.read(arguments))){var r,s=typeof e,a=s==="string"?bt.getElementById(e):s==="object"?e:null;if(a&&a!==z.NO_INSERT){if(a.getContext||a.naturalHeight!=null)r=a;else if(a){var o=rt.read(arguments);o.isZero()||(r=ue.getCanvas(o))}}r?this.setImage(r):this.setSource(e)}this._size||(this._size=new rt,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var r=ue.getCanvas(t._size);r.getContext("2d").drawImage(i,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new Ot(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var i=rt.read(arguments);if(i.equals(this._size))e&&this.clear();else if(i.width>0&&i.height>0){var r=!e&&this.getElement();this._setImage(ue.getCanvas(i)),r&&this.getContext(!0).drawImage(r,0,0,i.width,i.height)}else this._canvas&&ue.release(this._canvas),this._size=i.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,e=new B(0,0).transform(t),i=new B(1,0).transform(t).subtract(e),r=new B(0,1).transform(t).subtract(e);return new rt(72/i.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function i(r){var s=e.getView(),a=r&&r.type||"load";s&&e.responds(a)&&(n=s._scope,e.emit(a,new ze(r)))}this._setImage(t),this._loaded?setTimeout(i,0):t&&Nt.add(t,{load:function(r){e._setImage(t),i(r)},error:i})},_setImage:function(t){this._canvas&&ue.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new rt(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=ue.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{ue.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new pt.Image,i=this._crossOrigin;i&&(e.crossOrigin=i),t&&(e.src=t),this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=at.read(arguments),e=ue.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=at.read(arguments),e=new Oe(z.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=B.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof Ce?(i=t,e=t.getBounds()):typeof t=="object"&&("width"in t?e=new at(t):"x"in t&&(e=new at(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=32,s=Math.min(e.width,r),a=Math.min(e.height,r),o=Oe._sampleContext;o?o.clearRect(0,0,r+1,r+1):o=Oe._sampleContext=ue.getContext(new rt(r)),o.save();var h=new yt().scale(s/e.width,a/e.height).translate(-e.x,-e.y);h.applyToContext(o),i&&i.draw(o,new L({clip:!0,matrices:[h]})),this._matrix.applyToContext(o);var l=this.getElement(),f=this._size;l&&o.drawImage(l,-f.width/2,-f.height/2),o.restore();for(var g=o.getImageData(.5,.5,Math.ceil(s),Math.ceil(a)).data,d=[0,0,0],c=0,v=0,S=g.length;v<S;v+=4){var b=g[v+3];c+=b,b/=255,d[0]+=g[v]*b,d[1]+=g[v+1]*b,d[2]+=g[v+2]*b}for(var v=0;v<3;v++)d[v]/=c;return c?Rt.read(d):null},getPixel:function(){var t=B.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new Rt("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=B.read(t),i=Rt.read(t),r=i._convert("rgb"),s=i._alpha,a=this.getContext(!0),o=a.createImageData(1,1),h=o.data;h[0]=r[0]*255,h[1]=r[1]*255,h[2]=r[2]*255,h[3]=s!=null?s*255:255,a.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=rt.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=at.read(arguments);return t.isEmpty()&&(t=new at(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=B.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var i=new at(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new ce("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,i){var r=this.getElement();if(r&&r.width>0&&r.height>0){t.globalAlpha=mt.clamp(this._opacity,0,1),this._setStyles(t,e,i);var s=this._smoothing,a=s==="off";kt.setPrefixed(t,a?"imageSmoothingEnabled":"imageSmoothingQuality",a?!1:s),t.drawImage(r,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Be=z.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,i){this._initialize(e,i!==G&&B.read(arguments,1))||this.setDefinition(e instanceof ee?e:new ee(e))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var r=e.extend({all:!1}),s=this._definition._item._hitTest(t,r,i);return s&&(s.item=this),s},_draw:function(t,e){this._definition._item.draw(t,e)}}),ee=L.extend({_class:"SymbolDefinition",initialize:function(e,i){this._id=Ae.get(),this.project=n.project,e&&this.setItem(e,i)},_serialize:function(t,e){return e.add(this,function(){return L.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){t&8&&z._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new B),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new Be(this,t)},clone:function(){return new ee(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),ce=L.extend({_class:"HitResult",initialize:function(e,i,r){this.type=e,this.item=i,r&&this.inject(r)},statics:{getOptions:function(t){var e=t&&L.read(t);return new L({type:null,tolerance:n.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),ot=L.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,i,r,s,a,o){var h=arguments.length,l,f,g,d;h>0&&(e==null||typeof e=="object"?h===1&&e&&"point"in e?(l=e.point,f=e.handleIn,g=e.handleOut,d=e.selection):(l=e,f=i,g=r,d=s):(l=[e,i],f=r!==G?[r,s]:null,g=a!==G?[a,o]:null)),new Ue(l,this,"_point"),new Ue(f,this,"_handleIn"),new Ue(g,this,"_handleOut"),d&&this.setSelection(d)},_serialize:function(t,e){var i=this._point,r=this._selection,s=r||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return r&&s.push(r),L.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i=e._curves,r=this._index,s;i&&((!t||t===this._point||t===this._handleIn)&&(s=r>0?i[r-1]:e._closed?i[i.length-1]:null)&&s._changed(),(!t||t===this._point||t===this._handleOut)&&(s=i[r])&&s._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(B.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(B.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(B.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(257))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==G?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new le(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var r=t||{},s=r.type,a=r.factor,o=this.getPrevious(),h=this.getNext(),l=(o||this)._point,f=this._point,g=(h||this)._point,d=l.getDistance(f),c=f.getDistance(g);if(!s||s==="catmull-rom"){var v=a===G?.5:a,S=Math.pow(d,v),b=S*S,x=Math.pow(c,v),m=x*x;if(!e&&o){var _=2*m+3*x*S+b,p=3*x*(x+S);this.setHandleIn(p!==0?new B((m*l._x+_*f._x-b*g._x)/p-f._x,(m*l._y+_*f._y-b*g._y)/p-f._y):new B)}if(!i&&h){var _=2*b+3*S*x+m,p=3*S*(S+x);this.setHandleOut(p!==0?new B((b*g._x+_*f._x-m*l._x)/p-f._x,(b*g._y+_*f._y-m*l._y)/p-f._y):new B)}}else if(s==="geometric"){if(o&&h){var y=l.subtract(g),C=a===G?.4:a,P=C*d/(d+c);e||this.setHandleIn(y.multiply(P)),i||this.setHandleOut(y.multiply(P-C))}}else throw new Error("Smoothing method '"+s+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new ot(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ot(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var r=1-i,s=i,a=t._point,o=e._point,h=t._handleIn,l=e._handleIn,f=e._handleOut,g=t._handleOut;this._point._set(r*a._x+s*o._x,r*a._y+s*o._y,!0),this._handleIn._set(r*h._x+s*l._x,r*h._y+s*l._y,!0),this._handleOut._set(r*g._x+s*f._x,r*g._y+s*f._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var r=this._point,s=!i||!this._handleIn.isZero()?this._handleIn:null,a=!i||!this._handleOut.isZero()?this._handleOut:null,o=r._x,h=r._y,l=2;return e[0]=o,e[1]=h,s&&(e[l++]=s._x+o,e[l++]=s._y+h),a&&(e[l++]=a._x+o,e[l++]=a._y+h),t&&(t._transformCoordinates(e,e,l/2),o=e[0],h=e[1],i?(r._x=o,r._y=h,l=2,s&&(s._x=e[l++]-o,s._y=e[l++]-h),a&&(a._x=e[l++]-o,a._y=e[l++]-h)):(s||(e[l++]=o,e[l++]=h),a||(e[l++]=o,e[l++]=h))),e}}),Ue=B.extend({initialize:function(e,i,r){var s,a,o;if(!e)s=a=0;else if((s=e[0])!==G)a=e[1];else{var h=e;(s=h.x)===G&&(h=B.read(arguments),s=h.x),a=h.y,o=h.selected}this._x=s,this._y=a,this._owner=i,i[r]=this,o&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=mt.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),J=L.extend({_class:"Curve",beans:!0,initialize:function(e,i,r,s,a,o,h,l){var f=arguments.length,g,d,c,v,S,b;f===3?(this._path=e,g=i,d=r):f?f===1?"segment1"in e?(g=new ot(e.segment1),d=new ot(e.segment2)):"point1"in e?(c=e.point1,S=e.handle1,b=e.handle2,v=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],v=[e[6],e[7]],S=[e[2]-e[0],e[3]-e[1]],b=[e[4]-e[6],e[5]-e[7]]):f===2?(g=new ot(e),d=new ot(i)):f===4?(c=e,S=i,b=r,v=s):f===8&&(c=[e,i],v=[h,l],S=[r-e,s-i],b=[a-h,o-l]):(g=new ot,d=new ot),this._segment1=g||new ot(c,null,S),this._segment2=d||new ot(v,b,null)},_serialize:function(t,e){return L.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=G},clone:function(){return new J(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return J.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(B.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(B.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(B.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(B.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return J.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new B(t[i],t[i+1]));return e}},{getLength:function(){return this._length==null&&(this._length=J.getLength(this.getValues(),0,1)),this._length},getArea:function(){return J.getArea(this.getValues())},getLine:function(){return new qt(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new J(J.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return J.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=1e-8,r=1-i,s=null;if(t>=i&&t<=r){var a=J.subdivide(this.getValues(),t),o=a[0],h=a[1],l=e||this.hasHandles(),f=this._segment1,g=this._segment2,d=this._path;l&&(f._handleOut._set(o[2]-o[0],o[3]-o[1]),g._handleIn._set(h[4]-h[6],h[5]-h[7]));var c=o[6],v=o[7],S=new ot(new B(c,v),l&&new B(o[4]-c,o[5]-v),l&&new B(h[2]-c,h[3]-v));d?(d.insert(f._index+1,S),s=this.getNext()):(this._segment2=S,this._changed(),s=new J(S,g))}return s},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===G?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===G?.5:e?t:this.getTimeAt(t))},reversed:function(){return new J(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,r){var s=t._point,a=t._handleOut,o=e._handleIn,h=e._point,l=s.x,f=s.y,g=h.x,d=h.y,c=r?[l,f,l,f,g,d,g,d]:[l,f,l+a._x,f+a._y,g+o._x,d+o._y,g,d];return i&&i._transformCoordinates(c,c,4),c},subdivide:function(t,e){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],f=t[7];e===G&&(e=.5);var g=1-e,d=g*i+e*s,c=g*r+e*a,v=g*s+e*o,S=g*a+e*h,b=g*o+e*l,x=g*h+e*f,m=g*d+e*v,_=g*c+e*S,p=g*v+e*b,y=g*S+e*x,C=g*m+e*p,P=g*_+e*y;return[[i,r,d,c,m,_,C,P],[C,P,p,y,b,x,l,f]]},getMonoCurves:function(t,e){var i=[],r=e?0:1,s=t[r+0],a=t[r+2],o=t[r+4],h=t[r+6];if(s>=a==a>=o&&a>=o==o>=h||J.isStraight(t))i.push(t);else{var l=3*(a-o)-s+h,f=2*(s+o)-4*a,g=a-s,d=1e-8,c=1-d,v=[],S=mt.solveQuadratic(l,f,g,v,d,c);if(!S)i.push(t);else{v.sort();var b=v[0],x=J.subdivide(t,b);i.push(x[0]),S>1&&(b=(v[1]-b)/(1-b),x=J.subdivide(x[1],b),i.push(x[0])),i.push(x[1])}}return i},solveCubic:function(t,e,i,r,s,a){var o=t[e],h=t[e+2],l=t[e+4],f=t[e+6],g=0;if(!(o<i&&f<i&&h<i&&l<i||o>i&&f>i&&h>i&&l>i)){var d=3*(h-o),c=3*(l-h)-d,v=f-o-d-c;g=mt.solveCubic(v,c,d,o-i,r,s,a)}return g},getTimeOf:function(t,e){var i=new B(t[0],t[1]),r=new B(t[6],t[7]),s=1e-12,a=1e-7,o=e.isClose(i,s)?0:e.isClose(r,s)?1:null;if(o===null)for(var h=[e.x,e.y],l=[],f=0;f<2;f++)for(var g=J.solveCubic(t,f,h[f],l,0,1),d=0;d<g;d++){var c=l[d];if(e.isClose(J.getPoint(t,c),a))return c}return e.isClose(i,a)?0:e.isClose(r,a)?1:null},getNearestTime:function(t,e){if(J.isStraight(t)){var i=t[0],r=t[1],s=t[6],a=t[7],o=s-i,h=a-r,l=o*o+h*h;if(l===0)return 0;var f=((e.x-i)*o+(e.y-r)*h)/l;return f<1e-12?0:f>.999999999999?1:J.getTimeOf(t,new B(i+f*o,r+f*h))}var g=100,d=1/0,c=0;function v(x){if(x>=0&&x<=1){var m=e.getDistance(J.getPoint(t,x),!0);if(m<d)return d=m,c=x,!0}}for(var S=0;S<=g;S++)v(S/g);for(var b=1/(g*2);b>1e-8;)!v(c-b)&&!v(c+b)&&(b/=2);return c},getPart:function(t,e,i){var r=e>i;if(r){var s=e;e=i,i=s}return e>0&&(t=J.subdivide(t,e)[1]),i<1&&(t=J.subdivide(t,(i-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],l=t[6],f=t[7],g=3*s-2*i-l,d=3*a-2*r-f,c=3*o-2*l-i,v=3*h-2*f-r;return Math.max(g*g,c*c)+Math.max(d*d,v*v)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7];return 3*((l-i)*(r+a)-(h-e)*(s+o)+s*(e-a)-r*(i-o)+l*(a+e/3)-h*(o+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),r=[0,0],s=0;s<2;s++)J._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,r);return new at(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,r,s,a,o,h,l){function f(C,P){var I=C-P,k=C+P;I<o[s]&&(o[s]=I),k>h[s]&&(h[s]=k)}a/=2;var g=o[s]+a,d=h[s]-a;if(t<g||e<g||i<g||r<g||t>d||e>d||i>d||r>d)if(e<t!=e<r&&i<t!=i<r)f(t,0),f(r,0);else{var c=3*(e-i)-t+r,v=2*(t+i)-4*e,S=e-t,b=mt.solveQuadratic(c,v,S,l),x=1e-8,m=1-x;f(r,0);for(var _=0;_<b;_++){var p=l[_],y=1-p;x<=p&&p<=m&&f(y*y*y*t+3*y*y*p*e+3*y*p*p*i+p*p*p*r,a)}}}}},L.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=vt[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),L.each({isStraight:function(t,e,i,r){if(e.isZero()&&i.isZero())return!0;var s=r.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(i)){var a=new qt(t,r),o=1e-7;if(a.getDistance(t.add(e))<o&&a.getDistance(r.add(i))<o){var h=s.dot(s),l=s.dot(e)/h,f=s.dot(i)/h;return l>=0&&l<=1&&f<=0&&f>=-1}}return!1},isLinear:function(t,e,i,r){var s=r.subtract(t).divide(3);return e.equals(s)&&i.negate().equals(s)}},function(t,e){this[e]=function(i){var r=this._segment1,s=this._segment2;return t(r._point,r._handleOut,s._handleIn,s._point,i)},this.statics[e]=function(i,r){var s=i[0],a=i[1],o=i[6],h=i[7];return t(new B(s,a),new B(i[2]-s,i[3]-a),new B(i[4]-o,i[5]-h),new B(o,h),r)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new le(this,t):null},getTimeAt:function(t,e){return J.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=B.read(arguments);return t.isZero()?[]:J.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(B.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return J.getTimeOf(this.getValues(),B.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=B.read(arguments),e=this.getValues(),i=J.getNearestTime(e,t),r=J.getPoint(e,i);return new le(this,i,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return L.each(t,function(e){this[e+"At"]=function(i,r){var s=this.getValues();return J[e](s,r?i:J.getTimeAt(s,i))},this[e+"AtTime"]=function(i){return J[e](this.getValues(),i)}},{statics:{_evaluateMethods:t}})},new function(){function t(r){var s=r[0],a=r[1],o=r[2],h=r[3],l=r[4],f=r[5],g=r[6],d=r[7],c=9*(o-l)+3*(g-s),v=6*(s+l)-12*o,S=3*(o-s),b=9*(h-f)+3*(d-a),x=6*(a+f)-12*h,m=3*(h-a);return function(_){var p=(c*_+v)*_+S,y=(b*_+x)*_+m;return Math.sqrt(p*p+y*y)}}function e(r,s){return Math.max(2,Math.min(16,Math.ceil(Math.abs(s-r)*32)))}function i(r,s,a,o){if(s==null||s<0||s>1)return null;var h=r[0],l=r[1],f=r[2],g=r[3],d=r[4],c=r[5],v=r[6],S=r[7],b=mt.isZero;b(f-h)&&b(g-l)&&(f=h,g=l),b(d-v)&&b(c-S)&&(d=v,c=S);var x=3*(f-h),m=3*(d-f)-x,_=v-h-x-m,p=3*(g-l),y=3*(c-g)-p,C=S-l-p-y,P,I;if(a===0)P=s===0?h:s===1?v:((_*s+m)*s+x)*s+h,I=s===0?l:s===1?S:((C*s+y)*s+p)*s+l;else{var k=1e-8,T=1-k;if(s<k?(P=x,I=p):s>T?(P=3*(v-d),I=3*(S-c)):(P=(3*_*s+2*m)*s+x,I=(3*C*s+2*y)*s+p),o){P===0&&I===0&&(s<k||s>T)&&(P=d-f,I=c-g);var O=Math.sqrt(P*P+I*I);O&&(P/=O,I/=O)}if(a===3){var d=6*_*s+2*m,c=6*C*s+2*y,M=Math.pow(P*P+I*I,3/2);P=M!==0?(P*c-I*d)/M:0,I=0}}return a===2?new B(I,-P):new B(P,I)}return{statics:{classify:function(r){var s=r[0],a=r[1],o=r[2],h=r[3],l=r[4],f=r[5],g=r[6],d=r[7],c=s*(d-f)+a*(l-g)+g*f-d*l,v=o*(a-d)+h*(g-s)+s*d-a*g,S=l*(h-a)+f*(s-o)+o*a-h*s,b=3*S,x=b-v,m=x-v+c,_=Math.sqrt(m*m+x*x+b*b),p=_!==0?1/_:0,y=mt.isZero,C="serpentine";m*=p,x*=p,b*=p;function P(O,M,A){var N=M!==G,V=N&&M>0&&M<1,F=N&&A>0&&A<1;return N&&(!(V||F)||O==="loop"&&!(V&&F))&&(O="arch",V=F=!1),{type:O,roots:V||F?V&&F?M<A?[M,A]:[A,M]:[V?M:A]:null}}if(y(m))return y(x)?P(y(b)?"line":"quadratic"):P(C,b/(3*x));var I=3*x*x-4*m*b;if(y(I))return P("cusp",x/(2*m));var k=I>0?Math.sqrt(I/3):Math.sqrt(-I),T=2*m;return P(I>0?C:"loop",(x+k)/T,(x-k)/T)},getLength:function(r,s,a,o){if(s===G&&(s=0),a===G&&(a=1),J.isStraight(r)){var h=r;a<1&&(h=J.subdivide(h,a)[0],s/=a),s>0&&(h=J.subdivide(h,s)[1]);var l=h[6]-h[0],f=h[7]-h[1];return Math.sqrt(l*l+f*f)}return mt.integrate(o||t(r),s,a,e(s,a))},getTimeAt:function(r,s,a){if(a===G&&(a=s<0?1:0),s===0)return a;var o=Math.abs,h=1e-12,l=s>0,f=l?a:0,g=l?1:a,d=t(r),c=J.getLength(r,f,g,d),v=o(s)-c;if(o(v)<h)return l?g:f;if(v>h)return null;var S=s/c,b=0;function x(m){return b+=mt.integrate(d,a,m,e(a,m)),a=m,b-s}return mt.findRoot(x,d,a+S,f,g,32,1e-12)},getPoint:function(r,s){return i(r,s,0,!1)},getTangent:function(r,s){return i(r,s,1,!0)},getWeightedTangent:function(r,s){return i(r,s,1,!1)},getNormal:function(r,s){return i(r,s,2,!0)},getWeightedNormal:function(r,s){return i(r,s,2,!1)},getCurvature:function(r,s){return i(r,s,3,!1).x},getPeaks:function(r){var s=r[0],a=r[1],o=r[2],h=r[3],l=r[4],f=r[5],g=r[6],d=r[7],c=-s+3*o-3*l+g,v=3*s-6*o+3*l,S=-3*s+3*o,b=-a+3*h-3*f+d,x=3*a-6*h+3*f,m=-3*a+3*h,_=1e-8,p=1-_,y=[];return mt.solveCubic(9*(c*c+b*b),9*(c*v+x*b),2*(v*v+x*x)+3*(S*c+m*b),S*v+x*m,y,_,p),y.sort()}}}},new function(){function t(v,S,b,x,m,_,p){var y=!p&&b.getPrevious()===m,C=!p&&b!==m&&b.getNext()===m,P=1e-8,I=1-P;if(x!==null&&x>=(y?P:0)&&x<=(C?I:1)&&_!==null&&_>=(C?P:0)&&_<=(y?I:1)){var k=new le(b,x,null,p),T=new le(m,_,null,p);k._intersection=T,T._intersection=k,(!S||S(k))&&le.insert(v,k,!0)}}function e(v,S,b,x,m,_,p,y,C,P,I,k,T){if(++C>=4096||++y>=40)return C;var O=1e-9,M=S[0],A=S[1],N=S[6],V=S[7],F=qt.getSignedDistance,D=F(M,A,N,V,S[2],S[3]),H=F(M,A,N,V,S[4],S[5]),W=D*H>0?3/4:4/9,X=W*Math.min(0,D,H),tt=W*Math.max(0,D,H),et=F(M,A,N,V,v[0],v[1]),j=F(M,A,N,V,v[2],v[3]),K=F(M,A,N,V,v[4],v[5]),it=F(M,A,N,V,v[6],v[7]),nt=i(et,j,K,it),ut=nt[0],lt=nt[1],ft,dt;if(D===0&&H===0&&et===0&&j===0&&K===0&&it===0||(ft=r(ut,lt,X,tt))==null||(dt=r(ut.reverse(),lt.reverse(),X,tt))==null)return C;var _t=P+(I-P)*ft,wt=P+(I-P)*dt;if(Math.max(T-k,wt-_t)<O){var Dt=(_t+wt)/2,Ht=(k+T)/2;t(m,_,p?x:b,p?Ht:Dt,p?b:x,p?Dt:Ht)}else{v=J.getPart(v,ft,dt);var ht=T-k;if(dt-ft>.8)if(wt-_t>ht){var It=J.subdivide(v,.5),Dt=(_t+wt)/2;C=e(S,It[0],x,b,m,_,!p,y,C,k,T,_t,Dt),C=e(S,It[1],x,b,m,_,!p,y,C,k,T,Dt,wt)}else{var It=J.subdivide(S,.5),Ht=(k+T)/2;C=e(It[0],v,x,b,m,_,!p,y,C,k,Ht,_t,wt),C=e(It[1],v,x,b,m,_,!p,y,C,Ht,T,_t,wt)}else ht===0||ht>=O?C=e(S,v,x,b,m,_,!p,y,C,k,T,_t,wt):C=e(v,S,b,x,m,_,p,y,C,_t,wt,k,T)}return C}function i(v,S,b,x){var m=[0,v],_=[1/3,S],p=[2/3,b],y=[1,x],C=S-(2*v+x)/3,P=b-(v+2*x)/3,I;if(C*P<0)I=[[m,_,y],[m,p,y]];else{var k=C/P;I=[k>=2?[m,_,y]:k<=.5?[m,p,y]:[m,_,p,y],[m,y]]}return(C||P)<0?I.reverse():I}function r(v,S,b,x){return v[0][1]<b?s(v,!0,b):S[0][1]>x?s(S,!1,x):v[0][0]}function s(v,S,b){for(var x=v[0][0],m=v[0][1],_=1,p=v.length;_<p;_++){var y=v[_][0],C=v[_][1];if(S?C>=b:C<=b)return C===b?y:x+(b-m)*(y-x)/(C-m);x=y,m=C}return null}function a(v,S,b,x,m){var _=mt.isZero;if(_(x)&&_(m)){var p=J.getTimeOf(v,new B(S,b));return p===null?[]:[p]}for(var y=Math.atan2(-m,x),C=Math.sin(y),P=Math.cos(y),I=[],k=[],T=0;T<8;T+=2){var O=v[T]-S,M=v[T+1]-b;I.push(O*P-M*C,O*C+M*P)}return J.solveCubic(I,1,0,k,0,1),k}function o(v,S,b,x,m,_,p){for(var y=S[0],C=S[1],P=S[6],I=S[7],k=a(v,y,C,P-y,I-C),T=0,O=k.length;T<O;T++){var M=k[T],A=J.getPoint(v,M),N=J.getTimeOf(S,A);N!==null&&t(m,_,p?x:b,p?N:M,p?b:x,p?M:N)}}function h(v,S,b,x,m,_){var p=qt.intersect(v[0],v[1],v[6],v[7],S[0],S[1],S[6],S[7]);p&&t(m,_,b,J.getTimeOf(v,p),x,J.getTimeOf(S,p))}function l(v,S,b,x,m,_){var p=1e-12,y=Math.min,C=Math.max;if(C(v[0],v[2],v[4],v[6])+p>y(S[0],S[2],S[4],S[6])&&y(v[0],v[2],v[4],v[6])-p<C(S[0],S[2],S[4],S[6])&&C(v[1],v[3],v[5],v[7])+p>y(S[1],S[3],S[5],S[7])&&y(v[1],v[3],v[5],v[7])-p<C(S[1],S[3],S[5],S[7])){var P=d(v,S);if(P)for(var I=0;I<2;I++){var k=P[I];t(m,_,b,k[0],x,k[1],!0)}else{var T=J.isStraight(v),O=J.isStraight(S),M=T&&O,A=T&&!O,N=m.length;if((M?h:T||O?o:e)(A?S:v,A?v:S,A?x:b,A?b:x,m,_,A,0,0,0,1,0,1),!M||m.length===N)for(var I=0;I<4;I++){var V=I>>1,F=I&1,D=V*6,H=F*6,W=new B(v[D],v[D+1]),X=new B(S[H],S[H+1]);W.isClose(X,p)&&t(m,_,b,V,x,F)}}}return m}function f(v,S,b,x){var m=J.classify(v);if(m.type==="loop"){var _=m.roots;t(b,x,S,_[0],S,_[1])}return b}function g(v,S,b,x,m,_){var p=1e-7,y=!S;y&&(S=v);for(var C=v.length,P=S.length,I=new Array(C),k=y?I:new Array(P),T=[],O=0;O<C;O++)I[O]=v[O].getValues(x);if(!y)for(var O=0;O<P;O++)k[O]=S[O].getValues(m);for(var M=Te.findCurveBoundsCollisions(I,k,p),A=0;A<C;A++){var N=v[A],V=I[A];y&&f(V,N,T,b);var F=M[A];if(F)for(var D=0;D<F.length;D++){if(_&&T.length)return T;var H=F[D];if(!y||H>A){var W=S[H],X=k[H];l(V,X,N,W,T,b)}}}return T}function d(v,S){function b(it){var nt=it[6]-it[0],ut=it[7]-it[1];return nt*nt+ut*ut}var x=Math.abs,m=qt.getDistance,_=1e-8,p=1e-7,y=J.isStraight(v),C=J.isStraight(S),P=y&&C,I=b(v)<b(S),k=I?S:v,T=I?v:S,O=k[0],M=k[1],A=k[6]-O,N=k[7]-M;if(m(O,M,A,N,T[0],T[1],!0)<p&&m(O,M,A,N,T[6],T[7],!0)<p)!P&&m(O,M,A,N,k[2],k[3],!0)<p&&m(O,M,A,N,k[4],k[5],!0)<p&&m(O,M,A,N,T[2],T[3],!0)<p&&m(O,M,A,N,T[4],T[5],!0)<p&&(y=C=P=!0);else if(P)return null;if(y^C)return null;for(var V=[v,S],F=[],D=0;D<4&&F.length<2;D++){var H=D&1,W=H^1,X=D>>1,tt=J.getTimeOf(V[H],new B(V[W][X?6:0],V[W][X?7:1]));if(tt!=null){var et=H?[X,tt]:[tt,X];(!F.length||x(et[0]-F[0][0])>_&&x(et[1]-F[0][1])>_)&&F.push(et)}if(D>2&&!F.length)break}if(F.length!==2)F=null;else if(!P){var j=J.getPart(v,F[0][0],F[1][0]),K=J.getPart(S,F[0][1],F[1][1]);(x(K[2]-j[2])>p||x(K[3]-j[3])>p||x(K[4]-j[4])>p||x(K[5]-j[5])>p)&&(F=null)}return F}function c(v,S){var b=v[0],x=v[1],m=v[2],_=v[3],p=v[4],y=v[5],C=v[6],P=v[7],I=S.normalize(),k=I.x,T=I.y,O=3*C-9*p+9*m-3*b,M=3*P-9*y+9*_-3*x,A=6*p-12*m+6*b,N=6*y-12*_+6*x,V=3*m-3*b,F=3*_-3*x,D=2*O*T-2*M*k,H=[];if(Math.abs(D)<mt.CURVETIME_EPSILON){var W=O*F-M*V,D=O*N-M*A;if(D!=0){var X=-W/D;X>=0&&X<=1&&H.push(X)}}else{var tt=(A*A-4*O*V)*T*T+(-2*A*N+4*M*V+4*O*F)*k*T+(N*N-4*M*F)*k*k,et=A*T-N*k;if(tt>=0&&D!=0){var j=Math.sqrt(tt),K=-(et+j)/D,it=(-et+j)/D;K>=0&&K<=1&&H.push(K),it>=0&&it<=1&&H.push(it)}}return H}return{getIntersections:function(v){var S=this.getValues(),b=v&&v!==this&&v.getValues();return b?l(S,b,this,v,[]):f(S,this,[])},statics:{getOverlaps:d,getIntersections:g,getCurveLineIntersections:a,getTimesWithTangent:c}}}),le=L.extend({_class:"CurveLocation",initialize:function(e,i,r,s,a){if(i>=.99999999){var o=e.getNext();o&&(i=0,e=o)}this._setCurve(e),this._time=i,this._point=r||e.getPointAtTime(i),this._overlap=s,this._distance=a,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();i===0?t=e._segment1:i===1?t=e._segment2:i!=null&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function i(r){var s=r&&r.getCurve();if(s&&(e._time=s.getTimeOf(e._point))!=null)return e._setCurve(s),s}return this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&e==null?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var e=this.getPath(),i=this.getIndex();if(e&&i!=null)for(var r=e.getCurves(),s=0;s<i;s++)t+=r[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=i!=null&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof le){var r=this.getCurve(),s=t.getCurve(),a=r._path,o=s._path;if(a===o){var h=Math.abs,l=1e-7,f=h(this.getOffset()-t.getOffset()),g=!e&&this._intersection,d=!e&&t._intersection;i=(f<l||a&&h(a.getLength()-f)<l)&&(!g&&!d||g&&d&&g.equals(d,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=te.instance;e&&t.push("point: "+e);var r=this.getIndex();r!=null&&t.push("index: "+r);var s=this.getTime();return s!=null&&t.push("time: "+i.number(s)),this._distance!=null&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),i=t.getTime(),r=1e-8,s=1-r,a=e>=r&&e<=s,o=i>=r&&i<=s;if(a&&o)return!this.isTouching();var h=this.getCurve(),l=h&&e<r?h.getPrevious():h,f=t.getCurve(),g=f&&i<r?f.getPrevious():f;if(e>s&&(h=h.getNext()),i>s&&(f=f.getNext()),!l||!h||!g||!f)return!1;var d=[];function c(k,T){var O=k.getValues(),M=J.classify(O).roots||J.getPeaks(O),A=M.length,N=J.getLength(O,T&&A?M[A-1]:0,!T&&A?M[0]:1);d.push(A?N:N/32)}function v(k,T,O){return T<O?k>T&&k<O:k>T||k<O}a||(c(l,!0),c(h,!1)),o||(c(g,!0),c(f,!1));var S=this.getPoint(),b=Math.min.apply(Math,d),x=a?h.getTangentAtTime(e):h.getPointAt(b).subtract(S),m=a?x.negate():l.getPointAt(-b).subtract(S),_=o?f.getTangentAtTime(i):f.getPointAt(b).subtract(S),p=o?_.negate():g.getPointAt(-b).subtract(S),y=m.getAngle(),C=x.getAngle(),P=p.getAngle(),I=_.getAngle();return!!(a?v(y,P,I)^v(C,P,I)&&v(y,I,P)^v(C,I,P):v(P,y,C)^v(I,y,C)&&v(P,C,y)^v(I,C,y))},hasOverlap:function(){return!!this._overlap}},L.each(J._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var i=this.getCurve(),r=this.getTime();return r!=null&&i&&i[e](r,!0)}},{preserve:!0}),new function(){function t(e,i,r){var s=e.length,a=0,o=s-1;function h(S,b){for(var x=S+b;x>=-1&&x<=s;x+=b){var m=e[(x%s+s)%s];if(!i.getPoint().isClose(m.getPoint(),1e-7))break;if(i.equals(m))return m}return null}for(;a<=o;){var l=a+o>>>1,f=e[l],g;if(r&&(g=i.equals(f)?f:h(l,-1)||h(l,1)))return i._overlap&&(g._overlap=g._intersection._overlap=!0),g;var d=i.getPath(),c=f.getPath(),v=d!==c?d._id-c._id:i.getIndex()+i.getTime()-(f.getIndex()+f.getTime());v<0?o=l-1:a=l+1}return e.splice(a,0,i),i}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),r=e.length-1;r>=0;r--)t(i,e[r]._intersection,!1);return i}}}}),Ce=z.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,r;if(L.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:typeof t=="string"&&(e=t),i){var s=i[0];r=s&&Array.isArray(s[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var a=r?ie:vt;return new a(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),i,r=!1,s,a,o=new B,h=new B;function l(p,y){var C=+i[p];return r&&(C+=o[y]),C}function f(p){return new B(l(p,"x"),l(p+1,"y"))}this.clear();for(var g=0,d=e&&e.length;g<d;g++){var c=e[g],v=c[0],S=v.toLowerCase();i=c.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var b=i&&i.length;switch(r=v===S,s==="z"&&!/[mz]/.test(S)&&this.moveTo(o),S){case"m":case"l":for(var x=S==="m",m=0;m<b;m+=2)this[x?"moveTo":"lineTo"](o=f(m)),x&&(h=o,x=!1);a=o;break;case"h":case"v":var _=S==="h"?"x":"y";o=o.clone();for(var m=0;m<b;m++)o[_]=l(m,_),this.lineTo(o);a=o;break;case"c":for(var m=0;m<b;m+=6)this.cubicCurveTo(f(m),a=f(m+2),o=f(m+4));break;case"s":for(var m=0;m<b;m+=4)this.cubicCurveTo(/[cs]/.test(s)?o.multiply(2).subtract(a):o,a=f(m),o=f(m+2)),s=S;break;case"q":for(var m=0;m<b;m+=4)this.quadraticCurveTo(a=f(m),o=f(m+2));break;case"t":for(var m=0;m<b;m+=2)this.quadraticCurveTo(a=/[qt]/.test(s)?o.multiply(2).subtract(a):o,o=f(m)),s=S;break;case"a":for(var m=0;m<b;m+=7)this.arcTo(o=f(m+5),new rt(+i[m],+i[m+1]),+i[m+2],+i[m+4],+i[m+3]);break;case"z":this.closePath(1e-12),o=h;break}s=S}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!(this.getFillRule()==="evenodd"?e.windingL&1||e.windingR&1:e.winding)},getIntersections:function(t,e,i,r){var s=this===t||!t,a=this._matrix._orNullIfIdentity(),o=s?a:(i||t._matrix)._orNullIfIdentity();return s||this.getBounds(a).intersects(t.getBounds(o),1e-12)?J.getIntersections(this.getCurves(),!s&&t.getCurves(),e,a,o,r):[]},getCrossings:function(t){return this.getIntersections(t,function(e){return e.isCrossing()})},getNearestLocation:function(){for(var t=B.read(arguments),e=this.getCurves(),i=1/0,r=null,s=0,a=e.length;s<a;s++){var o=e[s].getNearestLocation(t);o._distance<i&&(i=o._distance,r=o)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,i){var r=!this._children,s=r?"_segments":"_children",a=t[s],o=e[s],h=this[s];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=h.length,f=o.length;if(l<f)for(var g=r?ot:vt,d=l;d<f;d++)this.add(new g);else l>f&&this[r?"removeSegments":"removeChildren"](f,l);for(var d=0;d<f;d++)h[d].interpolate(a[d],o[d],i);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],r=t._children?t._children.slice():[t],s=i.length,a=r.length,o=[],h=0;e=!0;for(var l=Te.findItemBoundsCollisions(i,r,mt.GEOMETRIC_EPSILON),f=s-1;f>=0&&e;f--){var g=i[f];e=!1;var d=l[f];if(d)for(var c=d.length-1;c>=0&&!e;c--)g.compare(r[d[c]])&&(o[d[c]]||(o[d[c]]=!0,h++),e=!0)}e=e&&h===a}return e}}),vt=Ce.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var i=arguments,r=Array.isArray(e)?typeof e[0]=="object"?e:i:e&&e.size===G&&(e.x!==G||e.point!==G)?i:null;r&&r.length>0?this.setSegments(r):(this._curves=G,this._segmentSelection=0,!r&&typeof e=="string"&&(this.setPathData(e),e=null)),this._initialize(!r&&e)},_equals:function(t){return this._closed===t._closed&&L.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),e&8){if(this._length=this._area=G,e&32)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else e&64&&(this._bounds=G)},getStyle:function(){var t=this._parent;return(t instanceof ie?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=G,i){var r=t[i-1];typeof r=="boolean"&&(this.setClosed(r),i--),this._add(ot.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var r=0;r<i;r++)t[r]=new J(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new J(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var i=this._segments,r=i.length,s=new te(e),a=new Array(6),o=!0,h,l,f,g,d,c,v,S,b=[];function x(_,p){if(_._transformCoordinates(t,a),h=a[0],l=a[1],o)b.push("M"+s.pair(h,l)),o=!1;else if(d=a[2],c=a[3],d===h&&c===l&&v===f&&S===g){if(!p){var y=h-f,C=l-g;b.push(y===0?"v"+s.number(C):C===0?"h"+s.number(y):"l"+s.pair(y,C))}}else b.push("c"+s.pair(v-f,S-g)+" "+s.pair(d-f,c-g)+" "+s.pair(h-f,l-g));f=h,g=l,v=a[4],S=a[5]}if(!r)return"";for(var m=0;m<r;m++)x(i[m]);return this._closed&&r>0&&(x(i[0],!0),b.push("z")),b.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),r=0,s=e.length;r<s;r++)e[r]._transformCoordinates(t,i,!0);return!0},_add:function(t,o){for(var i=this._segments,r=this._curves,s=t.length,a=o==null,o=a?i.length:o,h=0;h<s;h++){var l=t[h];l._path&&(l=t[h]=l.clone()),l._path=this,l._index=o+h,l._selection&&this._updateSelection(l,0,l._selection)}if(a)L.push(i,t);else{i.splice.apply(i,[o,0].concat(t));for(var h=o+s,f=i.length;h<f;h++)i[h]._index=h}if(r){var g=this._countCurves(),d=o>0&&o+s-1===g?o-1:o,c=d,v=Math.min(d+s,g);t._curves&&(r.splice.apply(r,[d,0].concat(t._curves)),c+=t._curves.length);for(var h=c;h<v;h++)r.splice(h,0,new J(this,null,null));this._adjustCurves(d,v)}return this._changed(41),t},_adjustCurves:function(t,e){for(var i=this._segments,r=this._curves,s,a=t;a<e;a++)s=r[a],s._path=this,s._segment1=i[a],s._segment2=i[a+1]||i[0],s._changed();(s=r[this._closed&&!t?i.length-1:t-1])&&(s._segment2=i[t]||i[0],s._changed()),(s=r[e])&&(s._segment1=i[e],s._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&typeof t!="number"?this._add(ot.readList(e)):this._add([ot.read(e)])[0]},insert:function(t,e){var i=arguments;return i.length>2&&typeof e!="number"?this._add(ot.readList(i,1),t):this._add([ot.read(i,1)],t)[0]},addSegment:function(){return this._add([ot.read(arguments)])[0]},insertSegment:function(t){return this._add([ot.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(ot.readList(t))},insertSegments:function(t,e){return this._add(ot.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=L.pick(e,this._segments.length);var r=this._segments,s=this._curves,a=r.length,o=r.splice(t,e-t),h=o.length;if(!h)return o;for(var l=0;l<h;l++){var f=o[l];f._selection&&this._updateSelection(f,f._selection,0),f._index=f._path=null}for(var l=t,g=r.length;l<g;l++)r[l]._index=l;if(s){for(var d=t>0&&e===a+(this._closed?1:0)?t-1:t,s=s.splice(d,h),l=s.length-1;l>=0;l--)s[l]._path=null;i&&(o._curves=s.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(t==null){var e=this._segments,i=this._closed;t=0;for(var r=0,s=e.length;r<s;r++){var a=r+1===s;t+=J.getArea(J.getValues(e[r],e[a?0:r+1],null,a&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){e&1||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,r=t?7:0;this._segmentSelection=r*i;for(var s=0;s<i;s++)e[s]._selection=r},_updateSelection:function(t,e,i){t._selection=i;var r=this._segmentSelection+=i-e;r>0&&this.setSelected(!0)},divideAt:function(t){var e=this.getLocationAt(t),i;return e&&(i=e.getCurve().divideAt(e.getCurveOffset()))?i._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,r=e&&e.time,s=1e-8,a=1-s;r>a&&(i++,r=0);var o=this.getCurves();if(i>=0&&i<o.length){r>=s&&o[i++].divideAtTime(r);var h=this.removeSegments(i,this._segments.length,!0),l;return this._closed?(this.setClosed(!1),l=this):(l=new vt(z.NO_INSERT),l.insertAbove(this),l.copyAttributes(this)),l._add(h,0),this.addSegment(h[0]),l}return null},split:function(t,e){var i,r=e===G?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return r!=null?this.splitAt(r):null},join:function(t,e){var i=e||0;if(t&&t!==this){var r=t._segments,s=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;s&&s._point.isClose(a._point,i)&&t.reverse();var o=t.getFirstSegment();if(s&&s._point.isClose(o._point,i))s.setHandleOut(o._handleOut),this._add(r.slice(1));else{var h=this.getFirstSegment();h&&h._point.isClose(o._point,i)&&t.reverse(),a=t.getLastSegment(),h&&h._point.isClose(a._point,i)?(h.setHandleIn(a._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var l=this.getFirstSegment(),f=this.getLastSegment();return l!==f&&l._point.isClose(f._point,i)&&(l.setHandleIn(f._handleIn),f.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,r=i?1e-7:0,s=e.length-1;s>=0;s--){var a=e[s];!a.hasHandles()&&(!a.hasLength(r)||i&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new si(this,t||.25,256,!0),i=e.parts,r=i.length,s=[],a=0;a<r;a++)s.push(new ot(i[a].curve.slice(0,2)));!this._closed&&r>0&&s.push(new ot(i[r-1].curve.slice(6))),this.setSegments(s)},simplify:function(t){var e=new qe(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,i=t||{},r=i.type||"asymmetric",s=this._segments,a=s.length,o=this._closed;function h(ut,lt){var ft=ut&&ut.index;if(ft!=null){var dt=ut.path;if(dt&&dt!==e)throw new Error(ut._class+" "+ft+" of "+dt+" is not part of "+e);lt&&ut instanceof J&&ft++}else ft=typeof ut=="number"?ut:lt;return Math.min(ft<0&&o?ft%a:ft<0?ft+a:ft,a-1)}var l=o&&i.from===G&&i.to===G,f=h(i.from,0),g=h(i.to,a-1);if(f>g)if(o)f-=a;else{var d=f;f=g,g=d}if(/^(?:asymmetric|continuous)$/.test(r)){var c=r==="asymmetric",v=Math.min,S=g-f+1,b=S-1,x=l?v(S,4):1,m=x,_=x,p=[];if(o||(m=v(1,f),_=v(1,a-g-1)),b+=m+_,b<=1)return;for(var y=0,C=f-m;y<=b;y++,C++)p[y]=s[(C<0?C+a:C)%a]._point;for(var P=p[0]._x+2*p[1]._x,I=p[0]._y+2*p[1]._y,k=2,T=b-1,O=[P],M=[I],A=[k],N=[],V=[],y=1;y<b;y++){var F=y<T,D=F||c?1:2,H=F?4:c?2:7,W=F?4:c?3:8,X=F?2:c?0:1,tt=D/k;k=A[y]=H-tt,P=O[y]=W*p[y]._x+X*p[y+1]._x-tt*P,I=M[y]=W*p[y]._y+X*p[y+1]._y-tt*I}N[T]=O[T]/A[T],V[T]=M[T]/A[T];for(var y=b-2;y>=0;y--)N[y]=(O[y]-N[y+1])/A[y],V[y]=(M[y]-V[y+1])/A[y];N[b]=(3*p[b]._x-N[T])/2,V[b]=(3*p[b]._y-V[T])/2;for(var y=m,et=b-_,C=f;y<=et;y++,C++){var j=s[C<0?C+a:C],K=j._point,it=N[y]-K._x,nt=V[y]-K._y;(l||y<et)&&j.setHandleOut(it,nt),(l||y>m)&&j.setHandleIn(-it,-nt)}}else for(var y=f;y<=g;y++)s[y<0?y+a:y].smooth(i,!l&&y===f,!l&&y===g)},toShape:function(t){if(!this._closed)return null;var e=this._segments,i,r,s,a;function o(c,v){var S=e[c],b=S.getNext(),x=e[v],m=x.getNext();return S._handleOut.isZero()&&b._handleIn.isZero()&&x._handleOut.isZero()&&m._handleIn.isZero()&&b._point.subtract(S._point).isCollinear(m._point.subtract(x._point))}function h(c){var v=e[c],S=v.getPrevious(),b=v.getNext();return S._handleOut.isZero()&&v._handleIn.isZero()&&v._handleOut.isZero()&&b._handleIn.isZero()&&v._point.subtract(S._point).isOrthogonal(b._point.subtract(v._point))}function l(c){var v=e[c],S=v.getNext(),b=v._handleOut,x=S._handleIn,m=.5522847498307936;if(b.isOrthogonal(x)){var _=v._point,p=S._point,y=new qt(_,b,!0).intersect(new qt(p,x,!0),!0);return y&&mt.isZero(b.getLength()/y.subtract(_).getLength()-m)&&mt.isZero(x.getLength()/y.subtract(p).getLength()-m)}return!1}function f(c,v){return e[c]._point.getDistance(e[v]._point)}if(!this.hasHandles()&&e.length===4&&o(0,2)&&o(1,3)&&h(1)?(i=Ut.Rectangle,r=new rt(f(0,3),f(0,1)),a=e[1]._point.add(e[2]._point).divide(2)):e.length===8&&l(0)&&l(2)&&l(4)&&l(6)&&o(1,5)&&o(3,7)?(i=Ut.Rectangle,r=new rt(f(1,6),f(0,3)),s=r.subtract(new rt(f(0,7),f(1,2))).divide(2),a=e[3]._point.add(e[4]._point).divide(2)):e.length===4&&l(0)&&l(1)&&l(2)&&l(3)&&(mt.isZero(f(0,2)-f(1,3))?(i=Ut.Circle,s=f(0,2)/2):(i=Ut.Ellipse,s=new rt(f(2,0)/2,f(3,1)/2)),a=e[1]._point),i){var g=this.getPosition(!0),d=new i({center:g,size:r,radius:s,insert:!1});return d.copyAttributes(this,!0),d._matrix.prepend(this._matrix),d.rotate(a.subtract(g).getAngle()+90),(t===G||t)&&d.insertAbove(this),d}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof ie)return t.base.call(this,e);var i=this.getCurves(),r=e.getCurves(),s=i.length,a=r.length;if(!s||!a)return s==a;for(var o=i[0].getValues(),h=[],l=0,f,g=0,d,c=0;c<a;c++){var x=r[c].getValues();h.push(x);var v=J.getOverlaps(o,x);if(v){f=!c&&v[0][0]>0?a-1:c,d=v[0][1];break}}for(var S=Math.abs,b=1e-8,x=h[f],m;o&&x;){var v=J.getOverlaps(o,x);if(v){var _=v[0][0];if(S(_-g)<b){g=v[1][0],g===1&&(o=++l<s?i[l].getValues():null,g=0);var p=v[0][1];if(S(p-d)<b){if(m||(m=[f,p]),d=v[1][1],d===1&&(++f>=a&&(f=0),x=h[f]||r[f].getValues(),d=0),!o)return m[0]===f&&m[1]===d;continue}}}break}return!1},_hitTestSelf:function(t,e,i,r){var s=this,a=this.getStyle(),o=this._segments,h=o.length,l=this._closed,f=e._tolerancePadding,g=f,d,c,v,S,b,x,m=e.stroke&&a.hasStroke(),_=e.fill&&a.hasFill(),p=e.curves,y=m?a.getStrokeWidth()/2:_&&e.tolerance>0||p?0:null;y!==null&&(y>0?(d=a.getStrokeJoin(),c=a.getStrokeCap(),v=a.getMiterLimit(),g=g.add(vt._getStrokePadding(y,r))):d=c="round");function C(N,V){return t.subtract(N).divide(V).length<=1}function P(N,V,F){if(!e.selected||V.isSelected()){var D=N._point;if(V!==D&&(V=V.add(D)),C(V,g))return new ce(F,s,{segment:N,point:V})}}function I(N,V){return(V||e.segments)&&P(N,N._point,"segment")||!V&&e.handles&&(P(N,N._handleIn,"handle-in")||P(N,N._handleOut,"handle-out"))}function k(N){S.add(N)}function T(N){var V=l||N._index>0&&N._index<h-1;if((V?d:c)==="round")return C(N._point,g);if(S=new vt({internal:!0,closed:!0}),V?N.isSmooth()||vt._addBevelJoin(N,d,y,v,null,r,k,!0):c==="square"&&vt._addSquareCap(N,c,y,null,r,k,!0),!S.isEmpty()){var F;return S.contains(t)||(F=S.getNearestLocation(t))&&C(F.getPoint(),f)}}if(e.ends&&!e.segments&&!l){if(x=I(o[0],!0)||I(o[h-1],!0))return x}else if(e.segments||e.handles){for(var O=0;O<h;O++)if(x=I(o[O]))return x}if(y!==null){if(b=this.getNearestLocation(t),b){var M=b.getTime();M===0||M===1&&h>1?T(b.getSegment())||(b=null):C(b.getPoint(),g)||(b=null)}if(!b&&d==="miter"&&h>1)for(var O=0;O<h;O++){var A=o[O];if(t.getDistance(A._point)<=v*y&&T(A)){b=A.getLocation();break}}}return!b&&_&&this._contains(t)||b&&!m&&!p?new ce("fill",this):b?new ce(m?"stroke":"curve",this,{location:b,point:b.getPoint()}):null}},L.each(J._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=B.read(arguments),e=this.getCurves(),i=0,r=e.length;i<r;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var e=this.getCurves(),i=0,r=0,s=e.length;r<s;r++){var a=i,o=e[r];if(i+=o.getLength(),i>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new le(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=B.read(arguments);if(t.isZero())return[];for(var e=[],i=0,r=this.getCurves(),s=0,a=r.length;s<a;s++){for(var o=r[s],h=o.getTimesWithTangent(t),l=0,f=h.length;l<f;l++){var g=i+o.getOffsetAtTime(h[l]);e.indexOf(g)<0&&e.push(g)}i+=o.length}return e}}),new function(){function t(i,r,s,a){if(a<=0)return;var o=a/2,h=a-2,l=o-1,f=new Array(6),g,d;function c(_){var p=f[_],y=f[_+1];(g!=p||d!=y)&&(i.beginPath(),i.moveTo(g,d),i.lineTo(p,y),i.stroke(),i.beginPath(),i.arc(p,y,o,0,Math.PI*2,!0),i.fill())}for(var v=0,S=r.length;v<S;v++){var b=r[v],x=b._selection;if(b._transformCoordinates(s,f),g=f[0],d=f[1],x&2&&c(2),x&4&&c(4),i.fillRect(g-o,d-o,a,a),h>0&&!(x&1)){var m=i.fillStyle;i.fillStyle="#ffffff",i.fillRect(g-l,d-l,h,h),i.fillStyle=m}}}function e(i,r,s){var a=r._segments,o=a.length,h=new Array(6),l=!0,f,g,d,c,v,S,b,x;function m(p){if(s)p._transformCoordinates(s,h),f=h[0],g=h[1];else{var y=p._point;f=y._x,g=y._y}if(l)i.moveTo(f,g),l=!1;else{if(s)v=h[2],S=h[3];else{var C=p._handleIn;v=f+C._x,S=g+C._y}v===f&&S===g&&b===d&&x===c?i.lineTo(f,g):i.bezierCurveTo(b,x,v,S,f,g)}if(d=f,c=g,s)b=h[4],x=h[5];else{var C=p._handleOut;b=d+C._x,x=c+C._y}}for(var _=0;_<o;_++)m(a[_]);r._closed&&o>0&&m(a[0])}return{_draw:function(i,r,s,a){var o=r.dontStart,h=r.dontFinish||r.clip,l=this.getStyle(),f=l.hasFill(),g=l.hasStroke(),d=l.getDashArray(),c=!n.support.nativeDash&&g&&d&&d.length;o||i.beginPath(),(f||g&&!c||h)&&(e(i,this,a),this._closed&&i.closePath());function v(p){return d[(p%c+c)%c]}if(!h&&(f||g)&&(this._setStyles(i,r,s),f&&(i.fill(l.getFillRule()),i.shadowColor="rgba(0,0,0,0)"),g)){if(c){o||i.beginPath();for(var S=new si(this,.25,32,!1,a),b=S.length,x=-l.getDashOffset(),m,_=0;x>0;)x-=v(_--)+v(_--);for(;x<b;)m=x+v(_++),(x>0||m>0)&&S.drawPart(i,Math.max(x,0),Math.max(m,0)),x=m+v(_++)}i.stroke()}},_drawSelected:function(i,r){i.beginPath(),e(i,this,r),i.stroke(),t(i,this._segments,r,n.settings.handleSize)}}},new function(){function t(e){var i=e._segments;if(!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return{moveTo:function(){var e=this._segments;e.length===1&&this.removeSegment(0),e.length||this._add([new ot(B.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ot(B.read(arguments))])},cubicCurveTo:function(){var e=arguments,i=B.read(e),r=B.read(e),s=B.read(e),a=t(this);a.setHandleOut(i.subtract(a._point)),this._add([new ot(s,r.subtract(s))])},quadraticCurveTo:function(){var e=arguments,i=B.read(e),r=B.read(e),s=t(this)._point;this.cubicCurveTo(i.add(s.subtract(i).multiply(1/3)),i.add(r.subtract(i).multiply(1/3)),r)},curveTo:function(){var e=arguments,i=B.read(e),r=B.read(e),s=L.pick(L.read(e),.5),a=1-s,o=t(this)._point,h=i.subtract(o.multiply(a*a)).subtract(r.multiply(s*s)).divide(2*s*a);if(h.isNaN())throw new Error("Cannot put a curve through points with parameter = "+s);this.quadraticCurveTo(h,r)},arcTo:function(){var e=arguments,i=Math.abs,r=Math.sqrt,s=t(this),a=s._point,o=B.read(e),h,l=L.peek(e),f=L.pick(l,!0),g,d,c,v;if(typeof f=="boolean")var S=a.add(o).divide(2),h=S.add(S.subtract(a).rotate(f?-90:90));else if(L.remain(e)<=2)h=o,o=B.read(e);else if(!a.equals(o)){var b=rt.read(e),x=mt.isZero;if(x(b.width)||x(b.height))return this.lineTo(o);var m=L.read(e),f=!!L.read(e),_=!!L.read(e),S=a.add(o).divide(2),p=a.subtract(S).rotate(-m),y=p.x,C=p.y,P=i(b.width),I=i(b.height),k=P*P,T=I*I,O=y*y,M=C*C,A=r(O/k+M/T);if(A>1&&(P*=A,I*=A,k=P*P,T=I*I),A=(k*T-k*M-T*O)/(k*M+T*O),i(A)<1e-12&&(A=0),A<0)throw new Error("Cannot create an arc with the given arguments");g=new B(P*C/I,-I*y/P).multiply((_===f?-1:1)*r(A)).rotate(m).add(S),v=new yt().translate(g).rotate(m).scale(P,I),c=v._inverseTransform(a),d=c.getDirectedAngle(v._inverseTransform(o)),!f&&d>0?d-=360:f&&d<0&&(d+=360)}if(h){var N=new qt(a.add(h).divide(2),h.subtract(a).rotate(90),!0),V=new qt(h.add(o).divide(2),o.subtract(h).rotate(90),!0),F=new qt(a,o),D=F.getSide(h);if(g=N.intersect(V,!0),!g){if(!D)return this.lineTo(o);throw new Error("Cannot create an arc with the given arguments")}c=a.subtract(g),d=c.getDirectedAngle(o.subtract(g));var H=F.getSide(g,!0);H===0?d=D*i(d):D===H&&(d+=d<0?360:-360)}if(d){for(var W=1e-5,X=i(d),tt=X>=360?4:Math.ceil((X-W)/90),et=d/tt,j=et*Math.PI/360,K=4/3*Math.sin(j)/(1+Math.cos(j)),it=[],nt=0;nt<=tt;nt++){var p=o,ut=null;if(nt<tt&&(ut=c.rotate(90).multiply(K),v?(p=v._transformPoint(c),ut=v._transformPoint(c.add(ut)).subtract(p)):p=g.add(c)),!nt)s.setHandleOut(ut);else{var lt=c.rotate(-90).multiply(K);v&&(lt=v._transformPoint(c.add(lt)).subtract(p)),it.push(new ot(p,lt,ut))}c=c.rotate(et)}this._add(it)}},lineBy:function(){var e=B.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=arguments,i=B.read(e),r=B.read(e),s=L.read(e),a=t(this)._point;this.curveTo(a.add(i),a.add(r),s)},cubicCurveBy:function(){var e=arguments,i=B.read(e),r=B.read(e),s=B.read(e),a=t(this)._point;this.cubicCurveTo(a.add(i),a.add(r),a.add(s))},quadraticCurveBy:function(){var e=arguments,i=B.read(e),r=B.read(e),s=t(this)._point;this.quadraticCurveTo(s.add(i),s.add(r))},arcBy:function(){var e=arguments,i=t(this)._point,r=i.add(B.read(e)),s=L.pick(L.peek(e),!0);typeof s=="boolean"?this.arcTo(r,s):this.arcTo(r,i.add(B.read(e)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return vt[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,r,s,a){var o=t[0];if(!o)return new at;var h=new Array(6),l=o._transformCoordinates(r,new Array(6)),f=l.slice(0,2),g=f.slice(),d=new Array(2);function c(b){b._transformCoordinates(r,h);for(var x=0;x<2;x++)J._addBounds(l[x],l[x+4],h[x+2],h[x],x,a?a[x]:0,f,g,d);var m=l;l=h,h=m}for(var v=1,S=t.length;v<S;v++)c(t[v]);return e&&c(o),new at(f[0],f[1],g[0]-f[0],g[1]-f[1])},getStrokeBounds:function(t,e,i,r,s){var a=i.getStyle(),o=a.hasStroke(),h=a.getStrokeWidth(),l=o&&i._getStrokeMatrix(r,s),f=o&&vt._getStrokePadding(h,l),g=vt.getBounds(t,e,i,r,s,f);if(!o)return g;var d=h/2,c=a.getStrokeJoin(),v=a.getStrokeCap(),S=a.getMiterLimit(),b=new at(new rt(f));function x(P){g=g.include(P)}function m(P){g=g.unite(b.setCenter(P._point.transform(r)))}function _(P,I){I==="round"||P.isSmooth()?m(P):vt._addBevelJoin(P,I,d,S,r,l,x)}function p(P,I){I==="round"?m(P):vt._addSquareCap(P,I,d,r,l,x)}var y=t.length-(e?0:1);if(y>0){for(var C=1;C<y;C++)_(t[C],c);e?_(t[0],c):(p(t[0],v),p(t[t.length-1],v))}return g},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new B(t,0).transform(e),r=new B(0,t).transform(e),s=i.getAngleInRadians(),a=i.getLength(),o=r.getLength(),h=Math.sin(s),l=Math.cos(s),f=Math.tan(s),g=Math.atan2(o*f,a),d=Math.atan2(o,f*a);return[Math.abs(a*Math.cos(g)*l+o*Math.sin(g)*h),Math.abs(o*Math.sin(d)*l+a*Math.cos(d)*h)]},_addBevelJoin:function(t,e,i,r,s,a,o,h){var l=t.getCurve(),f=l.getPrevious(),g=l.getPoint1().transform(s),d=f.getNormalAtTime(1).multiply(i).transform(a),c=l.getNormalAtTime(0).multiply(i).transform(a),v=d.getDirectedAngle(c);if((v<0||v>=180)&&(d=d.negate(),c=c.negate()),h&&o(g),o(g.add(d)),e==="miter"){var S=new qt(g.add(d),new B(-d.y,d.x),!0).intersect(new qt(g.add(c),new B(-c.y,c.x),!0),!0);S&&g.getDistance(S)<=r*i&&o(S)}o(g.add(c))},_addSquareCap:function(t,e,i,r,s,a,o){var h=t._point.transform(r),l=t.getLocation(),f=l.getNormal().multiply(l.getTime()===0?i:-i).transform(s);e==="square"&&(o&&(a(h.subtract(f)),a(h.add(f))),h=h.add(f.rotate(-90))),a(h.add(f)),a(h.subtract(f))},getHandleBounds:function(t,e,i,r,s){var a=i.getStyle(),o=s.stroke&&a.hasStroke(),h,l;if(o){var f=i._getStrokeMatrix(r,s),g=a.getStrokeWidth()/2,d=g;a.getStrokeJoin()==="miter"&&(d=g*a.getMiterLimit()),a.getStrokeCap()==="square"&&(d=Math.max(d,g*Math.SQRT2)),h=vt._getStrokePadding(g,f),l=vt._getStrokePadding(d,f)}for(var c=new Array(6),v=1/0,S=-v,b=v,x=S,m=0,_=t.length;m<_;m++){var p=t[m];p._transformCoordinates(r,c);for(var y=0;y<6;y+=2){var C=y?h:l,P=C?C[0]:0,I=C?C[1]:0,k=c[y],T=c[y+1],O=k-P,M=k+P,A=T-I,N=T+I;O<v&&(v=O),M>S&&(S=M),A<b&&(b=A),N>x&&(x=N)}}return new at(v,b,S-v,x-b)}}});vt.inject({statics:new function(){var t=.5522847498307936,e=[new ot([-1,0],[0,t],[0,-t]),new ot([0,-1],[-t,0],[t,0]),new ot([1,0],[0,-t],[0,t]),new ot([0,1],[t,0],[-t,0])];function i(s,a,o){var h=L.getNamed(o),l=new vt(h&&(h.insert==!0?z.INSERT:h.insert==!1?z.NO_INSERT:null));return l._add(s),l._closed=a,l.set(h,z.INSERT)}function r(s,a,o){for(var h=new Array(4),l=0;l<4;l++){var f=e[l];h[l]=new ot(f._point.multiply(a).add(s),f._handleIn.multiply(a),f._handleOut.multiply(a))}return i(h,!0,o)}return{Line:function(){var s=arguments;return i([new ot(B.readNamed(s,"from")),new ot(B.readNamed(s,"to"))],!1,s)},Circle:function(){var s=arguments,a=B.readNamed(s,"center"),o=L.readNamed(s,"radius");return r(a,new rt(o),s)},Rectangle:function(){var s=arguments,a=at.readNamed(s,"rectangle"),o=rt.readNamed(s,"radius",0,{readNull:!0}),h=a.getBottomLeft(!0),l=a.getTopLeft(!0),f=a.getTopRight(!0),g=a.getBottomRight(!0),d;if(!o||o.isZero())d=[new ot(h),new ot(l),new ot(f),new ot(g)];else{o=rt.min(o,a.getSize(!0).divide(2));var c=o.width,v=o.height,S=c*t,b=v*t;d=[new ot(h.add(c,0),null,[-S,0]),new ot(h.subtract(0,v),[0,b]),new ot(l.add(0,v),null,[0,-b]),new ot(l.add(c,0),[-S,0],null),new ot(f.subtract(c,0),null,[S,0]),new ot(f.add(0,v),[0,-b],null),new ot(g.subtract(0,v),null,[0,b]),new ot(g.subtract(c,0),[S,0])]}return i(d,!0,s)},RoundRectangle:"#Rectangle",Ellipse:function(){var s=arguments,a=Ut._readEllipse(s);return r(a.center,a.radius,s)},Oval:"#Ellipse",Arc:function(){var s=arguments,a=B.readNamed(s,"from"),o=B.readNamed(s,"through"),h=B.readNamed(s,"to"),l=L.getNamed(s),f=new vt(l&&l.insert==!1&&z.NO_INSERT);return f.moveTo(a),f.arcTo(o,h),f.set(l)},RegularPolygon:function(){for(var s=arguments,a=B.readNamed(s,"center"),o=L.readNamed(s,"sides"),h=L.readNamed(s,"radius"),l=360/o,f=o%3===0,g=new B(0,f?-h:h),d=f?-1:.5,c=new Array(o),v=0;v<o;v++)c[v]=new ot(a.add(g.rotate((v+d)*l)));return i(c,!0,s)},Star:function(){for(var s=arguments,a=B.readNamed(s,"center"),o=L.readNamed(s,"points")*2,h=L.readNamed(s,"radius1"),l=L.readNamed(s,"radius2"),f=360/o,g=new B(0,-1),d=new Array(o),c=0;c<o;c++)d[c]=new ot(a.add(g.rotate(f*c).multiply(c%2?l:h)));return i(d,!0,s)}}}});var ie=Ce.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||(typeof e=="string"?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function t(e,i){var r=i,s=r[0];s&&typeof s[0]=="number"&&(r=[r]);for(var a=i.length-1;a>=0;a--){var o=r[a];r===i&&!(o instanceof vt)&&(r=L.slice(r)),Array.isArray(o)?r[a]=new vt({segments:o,insert:!1}):o instanceof ie&&(r.splice.apply(r,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var i=this._children,r=i.length-1;r>=0;r--){var s=i[r].reduce(e);s.isEmpty()&&s.remove()}if(!i.length){var s=new vt(z.NO_INSERT);return s.copyAttributes(this),s.insertAbove(this),this.remove(),s}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,r=t.length;i<r;i++)L.push(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,r=[],s=0,a=i.length;s<a;s++){var o=i[s],h=o._matrix;r.push(o.getPathData(t&&!h.isIdentity()?t.appended(h):t,e))}return r.join("")},_hitTestChildren:function t(e,i,r){return t.base.call(this,e,i.class===vt||i.type==="path"?i:L.set({},i,{fill:!1}),r)},_draw:function(t,e,i,r){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=s.length;a<o;a++)s[a].draw(t,e,r);if(!e.clip){this._setStyles(t,e,i);var h=this._style;h.hasFill()&&(t.fill(h.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s],h=o._matrix;i[o._id]||o._drawSelected(t,h.isIdentity()?e:e.appended(h))}}},new function(){function t(e,i){var r=e._children;if(i&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return L.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new vt(z.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),r=B.read(arguments);this.moveTo(i?r.add(i._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},L.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i=this._children,r,s=0,a=i.length;s<a;s++)r=i[s][t](e)||r;return r}},{}));Ce.inject(new function(){var t=Math.min,e=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(m){return m._children||[m]}function a(m,_){var p=m.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(_){for(var y=s(p),C=0,P=y.length;C<P;C++){var m=y[C];!m._closed&&!m.isEmpty()&&(m.closePath(1e-12),m.getFirstSegment().setHandleIn(0,0),m.getLastSegment().setHandleOut(0,0))}p=p.resolveCrossings().reorient(p.getFillRule()==="nonzero",!0)}return p}function o(m,_,p,y,C){var P=new ie(z.NO_INSERT);return P.addChildren(m,!0),P=P.reduce({simplify:_}),C&&C.insert==!1||P.insertAbove(y&&p.isSibling(y)&&p.getIndex()<y.getIndex()?y:p),P.copyAttributes(p,!0),P}function h(m){return m.hasOverlap()||m.isCrossing()}function l(m,_,p,y){if(y&&(y.trace==!1||y.stroke)&&/^(subtract|intersect)$/.test(p))return f(m,_,p);var C=a(m,!0),P=_&&m!==_&&a(_,!0),I=r[p];I[p]=!0,P&&(I.subtract||I.exclude)^(P.isClockwise()^C.isClockwise())&&P.reverse();var k=v(le.expand(C.getIntersections(P,h))),T=s(C),O=P&&s(P),M=[],A=[],N;function V(ut){for(var lt=0,ft=ut.length;lt<ft;lt++){var dt=ut[lt];L.push(M,dt._segments),L.push(A,dt.getCurves()),dt._overlapsOnly=!0}}function F(ut){for(var lt=[],ft=0,dt=ut&&ut.length;ft<dt;ft++)lt.push(A[ut[ft]]);return lt}if(k.length){V(T),O&&V(O);for(var D=new Array(A.length),H=0,W=A.length;H<W;H++)D[H]=A[H].getValues();for(var X=Te.findCurveBoundsCollisions(D,D,0,!0),tt={},H=0;H<A.length;H++){var et=A[H],j=et._path._id,K=tt[j]=tt[j]||{};K[et.getIndex()]={hor:F(X[H].hor),ver:F(X[H].ver)}}for(var H=0,W=k.length;H<W;H++)b(k[H]._segment,C,P,tt,I);for(var H=0,W=M.length;H<W;H++){var it=M[H],nt=it._intersection;it._winding||b(it,C,P,tt,I),nt&&nt._overlap||(it._path._overlapsOnly=!1)}N=x(M,I)}else N=c(O?T.concat(O):T.slice(),function(ut){return!!I[ut]});return o(N,!0,m,_,y)}function f(m,_,p){var y=a(m),C=a(_),P=y.getIntersections(C,h),I=p==="subtract",k=p==="divide",T={},O=[];function M(V){if(!T[V._id]&&(k||C.contains(V.getPointAt(V.getLength()/2))^I))return O.unshift(V),T[V._id]=!0}for(var A=P.length-1;A>=0;A--){var N=P[A].split();N&&(M(N)&&N.getFirstSegment().setHandleIn(0,0),y.getLastSegment().setHandleOut(0,0))}return M(y),o(O,!1,m,_)}function g(m,_){for(var p=m;p;){if(p===_)return;p=p._previous}for(;m._next&&m._next!==_;)m=m._next;if(!m._next){for(;_._previous;)_=_._previous;m._next=_,_._previous=m}}function d(m){for(var _=m.length-1;_>=0;_--)m[_].clearHandles()}function c(m,_,p){var y=m&&m.length;if(y){var C=L.each(m,function(X,tt){this[X._id]={container:null,winding:X.isClockwise()?1:-1,index:tt}},{}),P=m.slice().sort(function(X,tt){return i(tt.getArea())-i(X.getArea())}),I=P[0],k=Te.findItemBoundsCollisions(P,null,mt.GEOMETRIC_EPSILON);p==null&&(p=I.isClockwise());for(var T=0;T<y;T++){var O=P[T],M=C[O._id],A=0,N=k[T];if(N){for(var V=null,F=N.length-1;F>=0;F--)if(N[F]<T){V=V||O.getInteriorPoint();var D=P[N[F]];if(D.contains(V)){var H=C[D._id];A=H.winding,M.winding+=A,M.container=H.exclude?H.container:D;break}}}if(_(M.winding)===_(A))M.exclude=!0,m[M.index]=null;else{var W=M.container;O.setClockwise(W?!W.isClockwise():p)}}}return m}function v(m,_,p){var y=_&&[],C=1e-8,P=1-C,I=!1,k=p||[],T=p&&{},O,M,A;function N(lt){return lt._path._id+"."+lt._segment1._index}for(var V=(p&&p.length)-1;V>=0;V--){var F=p[V];F._path&&(T[N(F)]=!0)}for(var V=m.length-1;V>=0;V--){var D=m[V],H=D._time,W=H,X=_&&!_(D),F=D._curve,tt;if(F&&(F!==M?(I=!F.hasHandles()||T&&T[N(F)],O=[],A=null,M=F):A>=C&&(H/=A)),X){O&&O.push(D);continue}else _&&y.unshift(D);if(A=W,H<C)tt=F._segment1;else if(H>P)tt=F._segment2;else{var et=F.divideAtTime(H,!0);I&&k.push(F,et),tt=et._segment1;for(var j=O.length-1;j>=0;j--){var K=O[j];K._time=(K._time-H)/(1-H)}}D._setSegment(tt);var it=tt._intersection,nt=D._intersection;if(it){g(it,nt);for(var ut=it;ut;)g(ut._intersection,it),ut=ut._next}else tt._intersection=nt}return p||d(k),y||m}function S(m,_,p,y,C){var P=Array.isArray(_)?_:_[p?"hor":"ver"],I=p?1:0,k=I^1,T=[m.x,m.y],O=T[I],M=T[k],A=1e-9,N=1e-6,V=O-A,F=O+A,D=0,H=0,W=0,X=0,tt=!1,et=!1,j=1,K=[],it,nt;function ut(St){var Gt=St[k+0],jt=St[k+6];if(!(M<t(Gt,jt)||M>e(Gt,jt))){var ne=St[I+0],ge=St[I+2],pe=St[I+4],de=St[I+6];if(Gt===jt){(ne<F&&de>V||de<F&&ne>V)&&(tt=!0);return}var he=M===Gt?0:M===jt||V>e(ne,ge,pe,de)||F<t(ne,ge,pe,de)?1:J.solveCubic(St,k,M,K,0,1)>0?K[0]:1,Wt=he===0?ne:he===1?de:J.getPoint(St,he)[p?"y":"x"],Qt=Gt>jt?1:-1,me=it[k]>it[k+6]?1:-1,Ie=it[I+6];return M!==Gt?(Wt<V?W+=Qt:Wt>F?X+=Qt:tt=!0,Wt>O-N&&Wt<O+N&&(j/=2)):(Qt!==me?ne<V?W+=Qt:ne>F&&(X+=Qt):ne!=Ie&&(Ie<F&&Wt>F?(X+=Qt,tt=!0):Ie>V&&Wt<V&&(W+=Qt,tt=!0)),j/=4),it=St,!C&&Wt>V&&Wt<F&&J.getTangent(St,he)[p?"x":"y"]===0&&S(m,_,!p,y,!0)}}function lt(St){var Gt=St[k+0],jt=St[k+2],ne=St[k+4],ge=St[k+6];if(M<=e(Gt,jt,ne,ge)&&M>=t(Gt,jt,ne,ge)){for(var pe=St[I+0],de=St[I+2],he=St[I+4],Wt=St[I+6],Qt=V>e(pe,de,he,Wt)||F<t(pe,de,he,Wt)?[St]:J.getMonoCurves(St,p),me,Ie=0,wi=Qt.length;Ie<wi;Ie++)if(me=ut(Qt[Ie]))return me}}for(var ft=0,dt=P.length;ft<dt;ft++){var _t=P[ft],wt=_t._path,Dt=_t.getValues(),Ht;if((!ft||P[ft-1]._path!==wt)&&(it=null,wt._closed||(nt=J.getValues(wt.getLastCurve().getSegment2(),_t.getSegment1(),null,!y),nt[k]!==nt[k+6]&&(it=nt)),!it)){it=Dt;for(var ht=wt.getLastCurve();ht&&ht!==_t;){var It=ht.getValues();if(It[k]!==It[k+6]){it=It;break}ht=ht.getPrevious()}}if(Ht=lt(Dt))return Ht;if(ft+1===dt||P[ft+1]._path!==wt){if(nt&&(Ht=lt(nt)))return Ht;tt&&!W&&!X&&(W=X=wt.isClockwise(y)^p?1:-1),D+=W,H+=X,W=X=0,tt&&(et=!0,tt=!1),nt=null}}return D=i(D),H=i(H),{winding:e(D,H),windingL:D,windingR:H,quality:j,onPath:et}}function b(m,_,p,y,C){var P=[],I=m,k=0,A;do{var T=m.getCurve();if(T){var O=T.getLength();P.push({segment:m,curve:T,length:O}),k+=O}m=m.getNext()}while(m&&!m._intersection&&m!==I);for(var M=[.5,.25,.75],A={winding:0,quality:-1},N=.001,V=1-N,F=0;F<M.length&&A.quality<.5;F++)for(var O=k*M[F],D=0,H=P.length;D<H;D++){var W=P[D],X=W.length;if(O<=X){var T=W.curve,tt=T._path,et=tt._parent,j=et instanceof ie?et:tt,K=mt.clamp(T.getTimeAt(O),N,V),it=T.getPointAtTime(K),nt=i(T.getTangentAtTime(K).y)<Math.SQRT1_2,ut=null;if(C.subtract&&p){var lt=j===_?p:_,ft=lt._getWinding(it,nt,!0);if(j===_&&ft.winding||j===p&&!ft.winding){if(ft.quality<1)continue;ut={winding:0,quality:1}}}ut=ut||S(it,y[tt._id][T.getIndex()],nt,!0),ut.quality>A.quality&&(A=ut);break}O-=X}for(var D=P.length-1;D>=0;D--)P[D].segment._winding=A}function x(m,_){var p=[],y;function C(dt){var _t;return!!(dt&&!dt._visited&&(!_||_[(_t=dt._winding||{}).winding]&&!(_.unite&&_t.winding===2&&_t.windingL&&_t.windingR)))}function P(dt){if(dt){for(var _t=0,wt=y.length;_t<wt;_t++)if(dt===y[_t])return!0}return!1}function I(dt){for(var _t=dt._segments,wt=0,Dt=_t.length;wt<Dt;wt++)_t[wt]._visited=!0}function k(dt,_t){var wt=dt._intersection,Dt=wt,Ht=[];_t&&(y=[dt]);function ht(It,St){for(;It&&It!==St;){var Gt=It._segment,jt=Gt&&Gt._path;if(jt){var ne=Gt.getNext()||jt.getFirstSegment(),ge=ne._intersection;Gt!==dt&&(P(Gt)||P(ne)||ne&&C(Gt)&&(C(ne)||ge&&C(ge._segment)))&&Ht.push(Gt),_t&&y.push(Gt)}It=It._next}}if(wt){for(ht(wt);wt&&wt._previous;)wt=wt._previous;ht(wt,Dt)}return Ht}m.sort(function(dt,_t){var wt=dt._intersection,Dt=_t._intersection,Ht=!!(wt&&wt._overlap),ht=!!(Dt&&Dt._overlap),It=dt._path,St=_t._path;return Ht^ht?Ht?1:-1:!wt^!Dt?wt?1:-1:It!==St?It._id-St._id:dt._index-_t._index});for(var T=0,O=m.length;T<O;T++){var M=m[T],A=C(M),N=null,V=!1,F=!0,D=[],H,W,X;if(A&&M._path._overlapsOnly){var tt=M._path,et=M._intersection._segment._path;tt.compare(et)&&(tt.getArea()&&p.push(tt.clone(!1)),I(tt),I(et),A=!1)}for(;A;){var j=!N,K=k(M,j),it=K.shift(),V=!j&&(P(M)||P(it)),nt=!V&&it;if(j&&(N=new vt(z.NO_INSERT),H=null),V){(M.isFirst()||M.isLast())&&(F=M._path._closed),M._visited=!0;break}if(nt&&H&&(D.push(H),H=null),H||(nt&&K.push(M),H={start:N._segments.length,crossings:K,visited:W=[],handleIn:X}),nt&&(M=it),!C(M)){N.removeSegments(H.start);for(var ut=0,lt=W.length;ut<lt;ut++)W[ut]._visited=!1;W.length=0;do M=H&&H.crossings.shift(),(!M||!M._path)&&(M=null,H=D.pop(),H&&(W=H.visited,X=H.handleIn));while(H&&!C(M));if(!M)break}var ft=M.getNext();N.add(new ot(M._point,X,ft&&M._handleOut)),M._visited=!0,W.push(M),M=ft||M._path.getFirstSegment(),X=ft&&ft._handleIn}V&&(F&&(N.getFirstSegment().setHandleIn(X),N.setClosed(F)),N.getArea()!==0&&p.push(N))}return p}return{_getWinding:function(m,_,p){return S(m,this.getCurves(),_,p)},unite:function(m,_){return l(this,m,"unite",_)},intersect:function(m,_){return l(this,m,"intersect",_)},subtract:function(m,_){return l(this,m,"subtract",_)},exclude:function(m,_){return l(this,m,"exclude",_)},divide:function(m,_){return _&&(_.trace==!1||_.stroke)?f(this,m,"divide"):o([this.subtract(m,_),this.intersect(m,_)],!0,this,m,_)},resolveCrossings:function(){var m=this._children,_=m||[this];function p(H,W){var X=H&&H._intersection;return X&&X._overlap&&X._path===W}var y=!1,C=!1,P=this.getIntersections(null,function(H){return H.hasOverlap()&&(y=!0)||H.isCrossing()&&(C=!0)}),I=y&&C&&[];if(P=le.expand(P),y)for(var k=v(P,function(H){return H.hasOverlap()},I),T=k.length-1;T>=0;T--){var O=k[T],M=O._path,A=O._segment,N=A.getPrevious(),V=A.getNext();p(N,M)&&p(V,M)&&(A.remove(),N._handleOut._set(0,0),V._handleIn._set(0,0),N!==A&&!N.getCurve().hasLength()&&(V._handleIn.set(N._handleIn),N.remove()))}C&&(v(P,y&&function(H){var W=H.getCurve(),X=H.getSegment(),tt=H._intersection,et=tt._curve,j=tt._segment;if(W&&et&&W._path&&et._path)return!0;X&&(X._intersection=null),j&&(j._intersection=null)},I),I&&d(I),_=x(L.each(_,function(H){L.push(this,H._segments)},[])));var F=_.length,D;return F>1&&m?(_!==m&&this.setChildren(_),D=this):F===1&&!m&&(_[0]!==this&&this.setSegments(_[0].removeSegments()),D=this),D||(D=new ie(z.NO_INSERT),D.addChildren(_),D=D.reduce(),D.copyAttributes(this),this.replaceWith(D)),D},reorient:function(m,_){var p=this._children;return p&&p.length?this.setChildren(c(this.removeChildren(),function(y){return!!(m?y:y&1)},_)):_!==G&&this.setClockwise(_),this},getInteriorPoint:function(){var m=this.getBounds(),_=m.getCenter(!0);if(!this.contains(_)){for(var p=this.getCurves(),y=_.y,C=[],P=[],I=0,k=p.length;I<k;I++){var T=p[I].getValues(),O=T[1],M=T[3],A=T[5],N=T[7];if(y>=t(O,M,A,N)&&y<=e(O,M,A,N))for(var V=J.getMonoCurves(T),F=0,D=V.length;F<D;F++){var H=V[F],W=H[1],X=H[7];if(W!==X&&(y>=W&&y<=X||y>=X&&y<=W)){var tt=y===W?H[0]:y===X?H[6]:J.solveCubic(H,1,y,P,0,1)===1?J.getPoint(H,P[0]).x:(H[0]+H[6])/2;C.push(tt)}}}C.length>1&&(C.sort(function(et,j){return et-j}),_.x=(C[0]+C[1])/2)}return _}}});var si=L.extend({_class:"PathFlattener",initialize:function(t,e,i,r,s){var a=[],o=[],h=0,l=1/(i||32),f=t._segments,g=f[0],d;function c(x,m){var _=J.getValues(x,m,s);a.push(_),v(_,x._index,0,1)}function v(x,m,_,p){if(p-_>l&&!(r&&J.isStraight(x))&&!J.isFlatEnough(x,e||.25)){var y=J.subdivide(x,.5),C=(_+p)/2;v(y[0],m,_,C),v(y[1],m,C,p)}else{var P=x[6]-x[0],I=x[7]-x[1],k=Math.sqrt(P*P+I*I);k>0&&(h+=k,o.push({offset:h,curve:x,index:m,time:p}))}}for(var S=1,b=f.length;S<b;S++)d=f[S],c(g,d),g=d;t._closed&&c(d||g,f[0]),this.curves=a,this.parts=o,this.length=h,this.index=0},_get:function(t){for(var e=this.parts,i=e.length,r,s=this.index;r=s,!(!s||e[--s].offset<t););for(;r<i;r++){var a=e[r];if(a.offset>=t){this.index=r;var o=e[r-1],h=o&&o.index===a.index?o.time:0,l=o?o.offset:0;return{index:a.index,time:h+(a.time-h)*(t-l)/(a.offset-l)}}}return{index:e[i-1].index,time:1}},drawPart:function(t,e,i){for(var r=this._get(e),s=this._get(i),a=r.index,o=s.index;a<=o;a++){var h=J.getPart(this.curves[a],a===r.index?r.time:0,a===s.index?s.time:1);a===r.index&&t.moveTo(h[0],h[1]),t.bezierCurveTo.apply(t,h.slice(2))}}},L.each(J._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return J[t](this.curves[i.index],i.time)}},{})),qe=L.extend({initialize:function(t){for(var e=this.points=[],i=t._segments,r=t._closed,s=0,a,o=i.length;s<o;s++){var h=i[s].point;(!a||!a.equals(h))&&e.push(a=h.clone())}r&&(e.unshift(e[e.length-1]),e.push(e[1])),this.closed=r},fit:function(t){var e=this.points,i=e.length,r=null;return i>0&&(r=[new ot(e[0])],i>1&&(this.fitCubic(r,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,i,r,s,a){var o=this.points;if(r-i===1){var h=o[i],l=o[r],f=h.getDistance(l)/3;this.addCurve(t,[h,h.add(s.normalize(f)),l.add(a.normalize(f)),l]);return}for(var g=this.chordLengthParameterize(i,r),d=Math.max(e,e*e),c,v=!0,S=0;S<=4;S++){var b=this.generateBezier(i,r,g,s,a),x=this.findMaxError(i,r,b,g);if(x.error<e&&v){this.addCurve(t,b);return}if(c=x.index,x.error>=d)break;v=this.reparameterize(i,r,g,b),d=x.error}var m=o[c-1].subtract(o[c+1]);this.fitCubic(t,e,i,c,s,m),this.fitCubic(t,e,c,r,m.negate(),a)},addCurve:function(t,e){var i=t[t.length-1];i.setHandleOut(e[1].subtract(e[0])),t.push(new ot(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,r,s){for(var a=1e-12,o=Math.abs,h=this.points,l=h[t],f=h[e],g=[[0,0],[0,0]],d=[0,0],c=0,v=e-t+1;c<v;c++){var S=i[c],b=1-S,x=3*S*b,m=b*b*b,_=x*b,p=x*S,y=S*S*S,C=r.normalize(_),P=s.normalize(p),I=h[t+c].subtract(l.multiply(m+_)).subtract(f.multiply(p+y));g[0][0]+=C.dot(C),g[0][1]+=C.dot(P),g[1][0]=g[0][1],g[1][1]+=P.dot(P),d[0]+=C.dot(I),d[1]+=P.dot(I)}var k=g[0][0]*g[1][1]-g[1][0]*g[0][1],T,O;if(o(k)>a){var M=g[0][0]*d[1]-g[1][0]*d[0],A=d[0]*g[1][1]-d[1]*g[0][1];T=A/k,O=M/k}else{var N=g[0][0]+g[0][1],V=g[1][0]+g[1][1];T=O=o(N)>a?d[0]/N:o(V)>a?d[1]/V:0}var F=f.getDistance(l),D=a*F,H,W;if(T<D||O<D)T=O=F/3;else{var X=f.subtract(l);H=r.normalize(T),W=s.normalize(O),H.dot(X)-W.dot(X)>F*F&&(T=O=F/3,H=W=null)}return[l,l.add(H||r.normalize(T)),f.add(W||s.normalize(O)),f]},reparameterize:function(t,e,i,r){for(var s=t;s<=e;s++)i[s-t]=this.findRoot(r,this.points[s],i[s-t]);for(var s=1,a=i.length;s<a;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(t,e,i){for(var r=[],s=[],a=0;a<=2;a++)r[a]=t[a+1].subtract(t[a]).multiply(3);for(var a=0;a<=1;a++)s[a]=r[a+1].subtract(r[a]).multiply(2);var o=this.evaluate(3,t,i),h=this.evaluate(2,r,i),l=this.evaluate(1,s,i),f=o.subtract(e),g=h.dot(h)+f.dot(l);return mt.isMachineZero(g)?i:i-f.dot(h)/g},evaluate:function(t,e,i){for(var r=e.slice(),s=1;s<=t;s++)for(var a=0;a<=t-s;a++)r[a]=r[a].multiply(1-i).add(r[a+1].multiply(i));return r[0]},chordLengthParameterize:function(t,e){for(var i=[0],r=t+1;r<=e;r++)i[r-t]=i[r-t-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,s=e-t;r<=s;r++)i[r]/=i[s];return i},findMaxError:function(t,e,i,r){for(var s=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var h=this.evaluate(3,i,r[o-t]),l=h.subtract(this.points[o]),f=l.x*l.x+l.y*l.y;f>=a&&(a=f,s=o)}return{error:a,index:s}}}),ke=z.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var i=e&&L.isPlainObject(e)&&e.x===G&&e.y===G;this._initialize(i&&e,!i&&B.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ai=ke.extend({_class:"PointText",initialize:function(){ke.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new se(t.x,t.y,this,"setPoint")},setPoint:function(){var t=B.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var r=this._lines,s=this._style,a=s.hasFill(),o=s.hasStroke(),h=s.getLeading(),l=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var f=0,g=r.length;f<g;f++){t.shadowColor=l;var d=r[f];a&&(t.fillText(d,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(d,0,0),t.translate(0,h)}}},_getBounds:function(t,e){var i=this._style,r=this._lines,s=r.length,a=i.getJustification(),o=i.getLeading(),h=this.getView().getTextWidth(i.getFontStyle(),r),l=0;a!=="left"&&(l-=h/(a==="center"?2:1));var f=new at(l,s?-.75*o:0,h,s*o);return t?t._transformBounds(f,f):f}}),Rt=L.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},e={},i={transparent:[0,0,0,0]},r;function s(h){var l=h.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||h.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),f="rgb",g;if(l){var d=l[4]?4:3;g=new Array(d);for(var c=0;c<d;c++){var v=l[c+1];g[c]=parseInt(v.length==1?v+v:v,16)/255}}else if(l=h.match(/^(rgb|hsl)a?\((.*)\)$/)){f=l[1],g=l[2].trim().split(/[,\s]+/g);for(var S=f==="hsl",c=0,b=Math.min(g.length,4);c<b;c++){var x=g[c],v=parseFloat(x);if(S)if(c===0){var m=x.match(/([a-z]*)$/)[1];v*={turn:360,rad:180/Math.PI,grad:.9}[m]||1}else c<3&&(v/=100);else c<3&&(v/=/%$/.test(x)?100:255);g[c]=v}}else{var _=i[h];if(!_)if(Ct){r||(r=ue.getContext(1,1,{willReadFrequently:!0}),r.globalCompositeOperation="copy"),r.fillStyle="rgba(0,0,0,0)",r.fillStyle=h,r.fillRect(0,0,1,1);var p=r.getImageData(0,0,1,1).data;_=i[h]=[p[0]/255,p[1]/255,p[2]/255]}else _=[0,0,0];g=_.slice()}return[f,g]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(h,l,f){var g=Math.max(h,l,f),d=Math.min(h,l,f),c=g-d,v=c===0?0:(g==h?(l-f)/c+(l<f?6:0):g==l?(f-h)/c+2:(h-l)/c+4)*60;return[v,g===0?0:c/g,g]},"hsb-rgb":function(h,l,f){h=(h/60%6+6)%6;var d=Math.floor(h),g=h-d,d=a[d],c=[f,f*(1-l),f*(1-l*g),f*(1-l*(1-g))];return[c[d[0]],c[d[1]],c[d[2]]]},"rgb-hsl":function(h,l,f){var g=Math.max(h,l,f),d=Math.min(h,l,f),c=g-d,v=c===0,S=v?0:(g==h?(l-f)/c+(l<f?6:0):g==l?(f-h)/c+2:(h-l)/c+4)*60,b=(g+d)/2,x=v?0:b<.5?c/(g+d):c/(2-g-d);return[S,x,b]},"hsl-rgb":function(h,l,f){if(h=(h/360%1+1)%1,l===0)return[f,f,f];for(var g=[h+1/3,h,h-1/3],d=f<.5?f*(1+l):f+l-f*l,c=2*f-d,v=[],S=0;S<3;S++){var b=g[S];b<0&&(b+=1),b>1&&(b-=1),v[S]=6*b<1?c+(d-c)*6*b:2*b<1?d:3*b<2?c+(d-c)*(2/3-b)*6:c}return v},"rgb-gray":function(h,l,f){return[h*.2989+l*.587+f*.114]},"gray-rgb":function(h){return[h,h,h]},"gray-hsb":function(h){return[0,0,h]},"gray-hsl":function(h){return[0,0,h]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return L.each(t,function(h,l){e[l]=[],L.each(h,function(f,g){var d=L.capitalize(f),c=/^(hue|saturation)$/.test(f),v=e[l][g]=l==="gradient"?f==="gradient"?function(S){var b=this._components[0];return S=Ne.read(Array.isArray(S)?S:arguments,0,{readNull:!0}),b!==S&&(b&&b._removeOwner(this),S&&S._addOwner(this)),S}:function(){return B.read(arguments,0,{readNull:f==="highlight",clone:!0})}:function(S){return S==null||isNaN(S)?0:+S};this["get"+d]=function(){return this._type===l||c&&/^hs[bl]$/.test(this._type)?this._components[g]:this._convert(l)[g]},this["set"+d]=function(S){this._type!==l&&!(c&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(l),this._properties=t[l],this._type=l),this._components[g]=v.call(this,S),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function h(l){var f=arguments,g=this.__read,d=0,c,v,S,b;Array.isArray(l)&&(f=l,l=f[0]);var x=l!=null&&typeof l;if(x==="string"&&l in t&&(c=l,l=f[1],Array.isArray(l)?(v=l,S=f[2]):(g&&(d=1),f=L.slice(f,1),x=typeof l)),!v){if(b=x==="number"?f:x==="object"&&l.length!=null?l:null,b){c||(c=b.length>=3?"rgb":"gray");var m=t[c].length;S=b[m],g&&(d+=b===arguments?m+(S!=null?1:0):1),b.length>m&&(b=L.slice(b,0,m))}else if(x==="string"){var _=s(l);c=_[0],v=_[1],v.length===4&&(S=v[3],v.length--)}else if(x==="object")if(l.constructor===h){if(c=l._type,v=l._components.slice(),S=l._alpha,c==="gradient")for(var p=1,y=v.length;p<y;p++){var C=v[p];C&&(v[p]=C.clone())}}else if(l.constructor===Ne)c="gradient",b=f;else{c="hue"in l?"lightness"in l?"hsl":"hsb":"gradient"in l||"stops"in l||"radial"in l?"gradient":"gray"in l?"gray":"rgb";var P=t[c],I=e[c];this._components=v=[];for(var p=0,y=P.length;p<y;p++){var k=l[P[p]];k==null&&!p&&c==="gradient"&&"stops"in l&&(k={stops:l.stops,radial:l.radial}),k=I[p].call(this,k),k!=null&&(v[p]=k)}S=l.alpha}g&&c&&(d=1)}if(this._type=c||"rgb",!v){this._components=v=[];for(var I=e[this._type],p=0,y=I.length;p<y;p++){var k=I[p].call(this,b&&b[p]);k!=null&&(v[p]=k)}}return this._components=v,this._properties=t[this._type],this._alpha=S,g&&(this.__read=d),this},set:"#initialize",_serialize:function(h,l){var f=this.getComponents();return L.serialize(/^(gray|rgb)$/.test(this._type)?f:[this._type].concat(f),h,!0,l)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(h){var l;return this._type===h?this._components.slice():(l=o[this._type+"-"+h])?l.apply(this,this._components):o["rgb-"+h].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(h){return new Rt(h,this._convert(h),this._alpha)},getType:function(){return this._type},setType:function(h){this._components=this._convert(h),this._properties=t[h],this._type=h},getComponents:function(){var h=this._components.slice();return this._alpha!=null&&h.push(this._alpha),h},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(h){this._alpha=h==null?null:Math.min(Math.max(h,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(h){var l=L.isPlainValue(h,!0)?Rt.read(arguments):h;return l===this||l&&this._class===l._class&&this._type===l._type&&this.getAlpha()===l.getAlpha()&&L.equals(this._components,l._components)||!1},toString:function(){for(var h=this._properties,l=[],f=this._type==="gradient",g=te.instance,d=0,c=h.length;d<c;d++){var v=this._components[d];v!=null&&l.push(h[d]+": "+(f?v:g.number(v)))}return this._alpha!=null&&l.push("alpha: "+g.number(this._alpha)),"{ "+l.join(", ")+" }"},toCSS:function(h){var l=this._convert("rgb"),f=h||this._alpha==null?1:this._alpha;function g(d){return Math.round((d<0?0:d>1?1:d)*255)}return l=[g(l[0]),g(l[1]),g(l[2])],f<1&&l.push(f<0?0:f),h?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).slice(1):(l.length==4?"rgba(":"rgb(")+l.join(",")+")"},toCanvasStyle:function(h,l){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var f=this._components,g=f[0],d=g._stops,c=f[1],v=f[2],S=f[3],b=l&&l.inverted(),x;if(b&&(c=b._transformPoint(c),v=b._transformPoint(v),S&&(S=b._transformPoint(S))),g._radial){var m=v.getDistance(c);if(S){var _=S.subtract(c);_.getLength()>m&&(S=c.add(_.normalize(m-.1)))}var p=S||c;x=h.createRadialGradient(p.x,p.y,0,c.x,c.y,m)}else x=h.createLinearGradient(c.x,c.y,v.x,v.y);for(var y=0,C=d.length;y<C;y++){var P=d[y],I=P._offset;x.addColorStop(I??y/(C-1),P._color.toCanvasStyle())}return this._canvasStyle=x},transform:function(h){if(this._type==="gradient"){for(var l=this._components,f=1,g=l.length;f<g;f++){var d=l[f];h._transformPoint(d,d,!0)}this._changed()}},statics:{_types:t,random:function(){var h=Math.random;return new Rt(h(),h(),h())},_setOwner:function(h,l,f){return h&&(h._owner&&l&&h._owner!==l&&(h=h.clone()),!h._owner^!l&&(h._owner=l||null,h._setter=f||null)),h}}})},new function(){var t={add:function(e,i){return e+i},subtract:function(e,i){return e-i},multiply:function(e,i){return e*i},divide:function(e,i){return e/i}};return L.each(t,function(e,i){this[i]=function(r){r=Rt.read(arguments);for(var s=this._type,a=this._components,o=r._convert(s),h=0,l=a.length;h<l;h++)o[h]=e(a[h],o[h]);return new Rt(s,o,this._alpha!=null?e(this._alpha,r.getAlpha()):null)}},{})}),Ne=L.extend({_class:"Gradient",initialize:function(e,i){this._id=Ae.get(),e&&L.isPlainObject(e)&&(this.set(e),e=i=null),this._stops==null&&this.setStops(e||["white","black"]),this._radial==null&&this.setRadial(typeof i=="string"&&i==="radial"||i||!1)},_serialize:function(t,e){return e.add(this,function(){return L.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=G))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new Ne(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,r=e.length;i<r;i++)e[i]._owner=G;e=this._stops=Ze.readList(t,0,{clone:!0});for(var i=0,r=e.length;i<r;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,r=e.length;if(r===i.length){for(var s=0;s<r;s++)if(!e[s].equals(i[s]))return!1;return!0}}return!1}}),Ze=L.extend({_class:"GradientStop",initialize:function(e,i){var r=e,s=i;typeof e=="object"&&i===G&&(Array.isArray(e)&&typeof e[0]!="number"?(r=e[0],s=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(r=e.color,s=e.offset||e.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new Ze(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,r=this._offset;return L.serialize(r==null?[i]:[i,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Rt._setOwner(this._color,null),this._color=Rt._setOwner(Rt.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Ge=L.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new B,selectedColor:null},e=L.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=L.set({},e,{fillColor:new Rt}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},a={_class:"Style",beans:!0,initialize:function(h,l,f){this._values={},this._owner=l,this._project=l&&l._project||f||n.project,this._defaults=!l||l instanceof Kt?e:l instanceof ke?i:t,h&&this.set(h)}};return L.each(e,function(o,h){var l=/Color$/.test(h),f=h==="shadowOffset",g=L.capitalize(h),d=r[h],c="set"+g,v="get"+g;a[c]=function(S){var b=this._owner,x=b&&b._children,m=x&&x.length>0&&!(b instanceof ie);if(m)for(var _=0,p=x.length;_<p;_++)x[_]._style[c](S);if((h==="selectedColor"||!m)&&h in this._defaults){var y=this._values[h];y!==S&&(l&&(y&&(Rt._setOwner(y,null),y._canvasStyle=null),S&&S.constructor===Rt&&(S=Rt._setOwner(S,b,m&&c))),this._values[h]=S,b&&b._changed(d||129))}},a[v]=function(S){var b=this._owner,x=b&&b._children,m=x&&x.length>0&&!(b instanceof ie),_;if(m&&!S)for(var p=0,y=x.length;p<y;p++){var C=x[p]._style[v]();if(!p)_=C;else if(!L.equals(_,C))return G}else if(h in this._defaults){var _=this._values[h];if(_===G)_=this._defaults[h],_&&_.clone&&(_=_.clone());else{var P=l?Rt:f?B:null;P&&!(_&&_.constructor===P)&&(this._values[h]=_=P.read([_],0,{readNull:!0,clone:!0}))}}return _&&l&&(_=Rt._setOwner(_,b,m&&c)),_},s[v]=function(S){return this._style[v](S)},s[c]=function(S){this._style[c](S)}}),L.each({Font:"FontFamily",WindingRule:"FillRule"},function(o,h){var l="get"+h,f="set"+h;a[l]=s[l]="#get"+o,a[f]=s[f]="#set"+o}),z.inject(s),a},{set:function(t){var e=t instanceof Ge,i=e?t._values:t;if(i){for(var r in i)if(r in this._defaults){var s=i[r];this[r]=s&&e&&s.clone?s.clone():s}}},equals:function(t){function e(i,r,s){var a=i._values,o=r._values,h=r._defaults;for(var l in a){var f=a[l],g=o[l];if(!(s&&l in o)&&!L.equals(f,g===G?h[l]:g))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),e??i*1.2}}),kt=new function(){function t(e,i,r,s){for(var a=["","webkit","moz","Moz","ms","o"],o=i[0].toUpperCase()+i.substring(1),h=0;h<6;h++){var l=a[h],f=l?l+o:i;if(f in e){if(r)e[f]=s;else return e[f];break}}}return{getStyles:function(e){var i=e&&e.nodeType!==9?e.ownerDocument:e,r=i&&i.defaultView;return r&&r.getComputedStyle(e,"")},getBounds:function(e,i){var r=e.ownerDocument,s=r.body,a=r.documentElement,o;try{o=e.getBoundingClientRect()}catch{o={left:0,top:0,width:0,height:0}}var h=o.left-(a.clientLeft||s.clientLeft||0),l=o.top-(a.clientTop||s.clientTop||0);if(!i){var f=r.defaultView;h+=f.pageXOffset||a.scrollLeft||s.scrollLeft,l+=f.pageYOffset||a.scrollTop||s.scrollTop}return new at(h,l,o.width,o.height)},getViewportBounds:function(e){var i=e.ownerDocument,r=i.defaultView,s=i.documentElement;return new at(0,0,r.innerWidth||s.clientWidth,r.innerHeight||s.clientHeight)},getOffset:function(e,i){return kt.getBounds(e,i).getPoint()},getSize:function(e){return kt.getBounds(e,!0).getSize()},isInvisible:function(e){return kt.getSize(e).equals(new rt(0,0))},isInView:function(e){return!kt.isInvisible(e)&&kt.getViewportBounds(e).intersects(kt.getBounds(e,!0))},isInserted:function(e){return bt.body.contains(e)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,r){if(typeof i=="object")for(var s in i)t(e,s,!0,i[s]);else t(e,i,!0,r)}}},Nt={add:function(t,e){if(t)for(var i in e)for(var r=e[i],s=i.split(/[\s,]+/g),a=0,o=s.length;a<o;a++){var h=s[a],l=t===bt&&(h==="touchstart"||h==="touchmove")?{passive:!1}:!1;t.addEventListener(h,r,l)}},remove:function(t,e){if(t)for(var i in e)for(var r=e[i],s=i.split(/[\s,]+/g),a=0,o=s.length;a<o;a++)t.removeEventListener(s[a],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new B(e.pageX||e.clientX+bt.documentElement.scrollLeft,e.pageY||e.clientY+bt.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Nt.getPoint(t).subtract(kt.getOffset(e||Nt.getTarget(t)))}};Nt.requestAnimationFrame=new function(){var t=kt.getPrefixed(Ct,"requestAnimationFrame"),e=!1,i=[],r;function s(){var a=i;i=[];for(var o=0,h=a.length;o<h;o++)a[o]();e=t&&i.length,e&&t(s)}return function(a){i.push(a),t?e||(t(s),e=!0):r||(r=setInterval(s,1e3/60))}};var Tt=L.extend(re,{_class:"View",initialize:function t(e,i){function r(d){return i[d]||parseInt(i.getAttribute(d),10)}function s(){var d=kt.getSize(i);return d.isNaN()||d.isZero()?new rt(r("width"),r("height")):d}var a;if(Ct&&i){this._id=i.getAttribute("id"),this._id==null&&i.setAttribute("id",this._id="paper-view-"+t._id++),Nt.add(i,this._viewEvents);var o="none";if(kt.setPrefixed(i.style,{userDrag:o,userSelect:o,touchCallout:o,contentZooming:o,tapHighlightColor:"rgba(0,0,0,0)"}),Yt.hasAttribute(i,"resize")){var h=this;Nt.add(Ct,this._windowEvents={resize:function(){h.setViewSize(s())}})}if(a=s(),Yt.hasAttribute(i,"stats")&&typeof Stats<"u"){this._stats=new Stats;var l=this._stats.domElement,f=l.style,g=kt.getOffset(i);f.position="absolute",f.left=g.x+"px",f.top=g.y+"px",bt.body.appendChild(l)}}else a=new rt(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=Ct&&Ct.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new yt)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!n.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Tt._focused===this&&(Tt._focused=null),Tt._views.splice(Tt._views.indexOf(this),1),delete Tt._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Nt.remove(this._element,this._viewEvents),Nt.remove(Ct,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:L.each(z._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Nt.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;(!kt.getPrefixed(bt,"hidden")||Yt.getAttribute(e,"keepalive")==="true")&&kt.isInView(e)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){n=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new L({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete i[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new L(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=G},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new Ot(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=rt.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new at(new B,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return kt.isInView(this._element)},isInserted:function(){return kt.isInserted(this._element)},getPixelSize:function(t){var e=this._element,i;if(e){var r=e.parentNode,s=bt.createElement("div");s.style.fontSize=t,r.appendChild(s),i=parseFloat(kt.getStyles(s).fontSize),r.removeChild(s)}else i=parseFloat(i);return i},getTextWidth:function(t,e){return 0}},L.each(["rotate","scale","shear","skew"],function(t){var e=t==="rotate";this[t]=function(){var i=arguments,r=(e?L:B).read(i),s=B.read(i,0,{readNull:!0});return this.transform(new yt()[t](r,s||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new yt;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=B.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new yt().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();e!=null&&t!=null&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new se(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=B.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(B.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(B.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(B.read(arguments))},getEventPoint:function(t){return this.viewToProject(Nt.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){bt&&typeof e=="string"&&(e=bt.getElementById(e));var i=Ct?vi:Tt;return new i(t,e)}}},new function(){if(!Ct)return;var t,e,i=!1,r=!1;function s(A){var N=Nt.getTarget(A);return N.getAttribute&&Tt._viewsById[N.getAttribute("id")]}function a(){var A=Tt._focused;if(!A||!A.isVisible()){for(var N=0,V=Tt._views.length;N<V;N++)if((A=Tt._views[N]).isVisible()){Tt._focused=e=A;break}}}function o(A,N,V){A._handleMouseEvent("mousemove",N,V)}var h=Ct.navigator,l,f,g;h.pointerEnabled||h.msPointerEnabled?(l="pointerdown MSPointerDown",f="pointermove MSPointerMove",g="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",f="touchmove",g="touchend touchcancel","ontouchstart"in Ct&&h.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",f+=" mousemove",g+=" mouseup"));var d={},c={mouseout:function(A){var N=Tt._focused,V=Nt.getRelatedTarget(A);if(N&&(!V||V.nodeName==="HTML")){var F=Nt.getOffset(A,N._element),D=F.x,H=Math.abs,W=H(D),X=1<<25,tt=W-X;F.x=H(tt)<W?tt*(D<0?-1:1):D,o(N,A,N.viewToProject(F))}},scroll:a};d[l]=function(A){var N=Tt._focused=s(A);i||(i=!0,N._handleMouseEvent("mousedown",A))},c[f]=function(A){var N=Tt._focused;if(!r){var V=s(A);V?N!==V&&(N&&o(N,A),t||(t=N),N=Tt._focused=e=V):e&&e===N&&(t&&!t.isInserted()&&(t=null),N=Tt._focused=t,t=null,a())}N&&o(N,A)},c[l]=function(){r=!0},c[g]=function(A){var N=Tt._focused;N&&i&&N._handleMouseEvent("mouseup",A),r=i=!1},Nt.add(bt,c),Nt.add(Ct,{load:a});var v=!1,S=!1,b={doubleclick:"click",mousedrag:"mousemove"},x=!1,m,_,p,y,C,P,I,k;function T(A,N,V,F,D,H,W){var X=!1,tt;function et(j,K){if(j.responds(K)){if(tt||(tt=new yi(K,F,D,N||j,H?D.subtract(H):null)),j.emit(K,tt)&&(v=!0,tt.prevented&&(S=!0),tt.stopped))return X=!0}else{var it=b[K];if(it)return et(j,it)}}for(;A&&A!==W&&!et(A,V);)A=A._parent;return X}function O(A,N,V,F,D,H){return A._project.removeOn(V),S=v=!1,C&&T(C,null,V,F,D,H)||N&&N!==C&&!N.isDescendant(C)&&T(N,null,V==="mousedrag"?"mousemove":V,F,D,H,C)||T(A,C||N||A,V,F,D,H)}var M={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:d,_handleMouseEvent:function(A,N,V){var F=this._itemEvents,D=F.native[A],H=A==="mousemove",W=this._scope.tool,X=this;function tt(lt){return F.virtual[lt]||X.responds(lt)||W&&W.responds(lt)}H&&i&&tt("mousedrag")&&(A="mousedrag"),V||(V=this.getEventPoint(N));var et=this.getBounds().contains(V),j=D&&et&&X._project.hitTest(V,{tolerance:0,fill:!0,stroke:!0}),K=j&&j.item||null,it=!1,nt={};if(nt[A.substr(5)]=!0,D&&K!==y&&(y&&T(y,null,"mouseleave",N,V),K&&T(K,null,"mouseenter",N,V),y=K),x^et&&(T(this,null,et?"mouseenter":"mouseleave",N,V),it=!0),(et||nt.drag)&&!V.equals(_)&&(O(this,K,H?A:"mousemove",N,V,_),it=!0),x=et,nt.down&&et||nt.up&&m){if(O(this,K,A,N,V,m),nt.down){if(k=K===P&&Date.now()-I<300,p=P=K,!S&&K){for(var ut=K;ut&&!ut.responds("mousedrag");)ut=ut._parent;ut&&(C=K)}m=V}else nt.up&&(!S&&K===p&&(I=Date.now(),O(this,K,k?"doubleclick":"click",N,V,m),k=!1),p=C=null);x=!1,it=!0}_=V,it&&W&&(v=W._handleMouseEvent(A,N,V,nt)||v),N.cancelable!==!1&&(v&&!nt.move||nt.down&&tt("mouseup"))&&N.preventDefault()},_handleKeyEvent:function(A,N,V,F){var D=this._scope,H=D.tool,W;function X(tt){tt.responds(A)&&(n=D,tt.emit(A,W=W||new mi(A,N,V,F)))}this.isVisible()&&(X(this),H&&H.responds(A)&&X(H))},_countItemEvent:function(A,N){var V=this._itemEvents,F=V.native,D=V.virtual;for(var H in M)F[H]=(F[H]||0)+(M[H][A]||0)*N;D[A]=(D[A]||0)+N},statics:{updateFocus:a,_resetState:function(){i=r=v=x=!1,t=e=m=_=p=y=C=P=I=k=null}}}}),vi=Tt.extend({_class:"CanvasView",initialize:function(e,i){if(!(i instanceof Ct.HTMLCanvasElement)){var r=rt.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+L.slice(arguments,1));i=ue.getCanvas(r)}var s=this._context=i.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(Yt.getAttribute(i,"hidpi"))){var a=Ct.devicePixelRatio||1,o=kt.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=a/o}Tt.call(this,e,i),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var r=this._pixelRatio;if(t.base.call(this,e*r,i*r),r!==1){var s=this._element,a=this._context;if(!Yt.hasAttribute(s,"resize")){var o=s.style;o.width=e+"px",o.height=i+"px"}a.restore(),a.save(),a.scale(r,r)}},getContext:function(){return this._context},getPixelSize:function t(e){var i=n.agent,r;if(i&&i.firefox)r=t.base.call(this,e);else{var s=this._context,a=s.font;s.font=e+" serif",r=parseFloat(s.font),s.font=a}return r},getTextWidth:function(t,e){var i=this._context,r=i.font,s=0;i.font=t;for(var a=0,o=e.length;a<o;a++)s=Math.max(s,i.measureText(e[a]).width);return i.font=r,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),ze=L.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return We.modifiers}}),mi=ze.extend({_class:"KeyEvent",initialize:function(e,i,r,s){this.type=e,this.event=i,this.key=r,this.character=s},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),We=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},e={tab:"	",space:" ",enter:"\r"},i={},r={},s,a,o=new L({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var f=n&&n.agent;return f&&f.mac?this.meta:this.control}}});function h(f){var g=f.key||f.keyIdentifier;return g=/^U\+/.test(g)?String.fromCharCode(parseInt(g.substr(2),16)):/^Arrow[A-Z]/.test(g)?g.substr(5):g==="Unidentified"||g===G?String.fromCharCode(f.keyCode):g,t[g]||(g.length>1?L.hyphenate(g):g.toLowerCase())}function l(f,g,d,c){var v=Tt._focused,S;if(i[g]=f,f?r[g]=d:delete r[g],g.length>1&&(S=L.camelize(g))in o){o[S]=f;var b=n&&n.agent;if(S==="meta"&&b&&b.mac)if(f)s={};else{for(var x in s)x in r&&l(!1,x,s[x],c);s=null}}else f&&s&&(s[g]=d);v&&v._handleKeyEvent(f?"keydown":"keyup",c,g,d)}return Nt.add(bt,{keydown:function(f){var g=h(f),d=n&&n.agent;g.length>1||d&&d.chrome&&(f.altKey||d.mac&&f.metaKey||!d.mac&&f.ctrlKey)?l(!0,g,e[g]||(g.length>1?"":g),f):a=g},keypress:function(f){if(a){var g=h(f),d=f.charCode,c=d>=32?String.fromCharCode(d):g.length>1?"":g;g!==a&&(g=c.toLowerCase()),l(!0,g,c,f),a=null}},keyup:function(f){var g=h(f);g in r&&l(!1,g,r[g],f)}}),Nt.add(Ct,{blur:function(f){for(var g in r)l(!1,g,r[g],f)}}),{modifiers:o,isDown:function(f){return!!i[f]}}},yi=ze.extend({_class:"MouseEvent",initialize:function(e,i,r,s,a){this.type=e,this.event=i,this.point=r,this.target=s,this.delta=a},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),je=ze.extend({_class:"ToolEvent",_item:null,initialize:function(e,i,r){this.tool=e,this.type=i,this.event=r},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ui=be.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){be.call(this),this._moveCount=-1,this._downCount=-1,this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,r){n=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var s=r.move||r.drag,a=this.responds(t),o=!1,h=this;function l(g,d){var c=i,v=s?h._point:h._downPoint||c;if(s){if(h._moveCount>=0&&c.equals(v))return!1;if(v&&(g!=null||d!=null)){var S=c.subtract(v),b=S.getLength();if(b<(g||0))return!1;d&&(c=v.add(S.normalize(Math.min(b,d))))}h._moveCount++}return h._point=c,h._lastPoint=v||c,r.down&&(h._moveCount=-1,h._downPoint=c,h._downCount++),!0}function f(){a&&(o=h.emit(t,new je(h,t,e))||o)}if(r.down)l(),f();else if(r.up)l(null,this._maxDistance),f();else if(a)for(;l(this._minDistance,this._maxDistance);)f();return o}}),oi=L.extend(re,{_class:"Tween",statics:{easings:new L({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,i,r,s,a,o){this.object=e;var h=typeof a,l=h==="function";this.type=l?h:h==="string"?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var f=i||r;this._keys=f?Object.keys(f):[],this._parsedKeys=this._parseKeys(this._keys),this._from=f&&this._getState(i),this._to=f&&this._getState(r),o!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),i=this._keys,r=function(g){return typeof g=="function"?g(e,t):g},s=0,a=i&&i.length;s<a;s++){var o=i[s],h=r(this._from[o]),l=r(this._to[o]),f=h&&l&&h.__add&&l.__add?l.__subtract(h).__multiply(e).__add(h):(l-h)*e+h;this._setProperty(this._parsedKeys[o],f)}this.responds("update")&&this.emit("update",new L({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,i=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(i)},_getState:function(t){for(var e=this._keys,i={},r=0,s=e.length;r<s;r++){var a=e[r],o=this._parsedKeys[a],h=this._getProperty(o),l;if(t){var f=this._resolveValue(h,t[a]);this._setProperty(o,f),l=this._getProperty(o),l=l&&l.clone?l.clone():l,this._setProperty(o,h)}else l=h&&h.clone?h.clone():h;i[a]=l}return i},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&e.length===2){var i=e[0];return i&&i.match&&i.match(/^[+\-\*\/]=/)?this._calculate(t,i[0],e[1]):e}else if(typeof e=="string"){var r=e.match(/^[+\-*/]=(.*)/);if(r){var s=JSON.parse(r[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],s)}}}return e},_calculate:function(t,e,i){return n.PaperScript.calculateBinary(t,e,i)},_parseKeys:function(t){for(var e={},i=0,r=t.length;i<r;i++){var s=t[i],a=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=a.split("/")}return e},_getProperty:function(t,e){for(var i=this.object,r=0,s=t.length-(e||0);r<s&&i;r++)i=i[t[r]];return i},_setProperty:function(t,e){var i=this._getProperty(t,1);i&&(i[t[t.length-1]]=e)}}),ae={request:function(t){var e=new pt.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,L.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var i=e.status;i===0||i===200?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var i=e.status,r='Could not load "'+t.url+'" (Status: '+i+")";if(t.onError)t.onError(r,i);else throw new Error(r)},e.send(null)}},ue=L.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,i){if(!Ct)return null;var r,s=!0;typeof t=="object"&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=bt.createElement("canvas"),s=!1);var a=r.getContext("2d",i||{});if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?s&&a.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),a.save(),r},getContext:function(t,e,i){var r=this.getCanvas(t,e,i);return r?r.getContext("2d",i||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},Zt=new function(){var t=Math.min,e=Math.max,i=Math.abs,r,s,a,o,h,l,f,g,d,c,v;function S(C,P,I){return .2989*C+.587*P+.114*I}function b(C,P,I,O){var T=O-S(C,P,I);d=C+T,c=P+T,v=I+T;var O=S(d,c,v),M=t(d,c,v),A=e(d,c,v);if(M<0){var N=O-M;d=O+(d-O)*O/N,c=O+(c-O)*O/N,v=O+(v-O)*O/N}if(A>255){var V=255-O,F=A-O;d=O+(d-O)*V/F,c=O+(c-O)*V/F,v=O+(v-O)*V/F}}function x(C,P,I){return e(C,P,I)-t(C,P,I)}function m(C,P,I,k){var T=[C,P,I],O=e(C,P,I),M=t(C,P,I),A;M=M===C?0:M===P?1:2,O=O===C?0:O===P?1:2,A=t(M,O)===0?e(M,O)===1?2:1:0,T[O]>T[M]?(T[A]=(T[A]-T[M])*k/(T[O]-T[M]),T[O]=k):T[A]=T[O]=0,T[M]=0,d=T[0],c=T[1],v=T[2]}var _={multiply:function(){d=h*r/255,c=l*s/255,v=f*a/255},screen:function(){d=h+r-h*r/255,c=l+s-l*s/255,v=f+a-f*a/255},overlay:function(){d=h<128?2*h*r/255:255-2*(255-h)*(255-r)/255,c=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255,v=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255},"soft-light":function(){var C=r*h/255;d=C+h*(255-(255-h)*(255-r)/255-C)/255,C=s*l/255,c=C+l*(255-(255-l)*(255-s)/255-C)/255,C=a*f/255,v=C+f*(255-(255-f)*(255-a)/255-C)/255},"hard-light":function(){d=r<128?2*r*h/255:255-2*(255-r)*(255-h)/255,c=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255,v=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255},"color-dodge":function(){d=h===0?0:r===255?255:t(255,255*h/(255-r)),c=l===0?0:s===255?255:t(255,255*l/(255-s)),v=f===0?0:a===255?255:t(255,255*f/(255-a))},"color-burn":function(){d=h===255?255:r===0?0:e(0,255-(255-h)*255/r),c=l===255?255:s===0?0:e(0,255-(255-l)*255/s),v=f===255?255:a===0?0:e(0,255-(255-f)*255/a)},darken:function(){d=h<r?h:r,c=l<s?l:s,v=f<a?f:a},lighten:function(){d=h>r?h:r,c=l>s?l:s,v=f>a?f:a},difference:function(){d=h-r,d<0&&(d=-d),c=l-s,c<0&&(c=-c),v=f-a,v<0&&(v=-v)},exclusion:function(){d=h+r*(255-h-h)/255,c=l+s*(255-l-l)/255,v=f+a*(255-f-f)/255},hue:function(){m(r,s,a,x(h,l,f)),b(d,c,v,S(h,l,f))},saturation:function(){m(h,l,f,x(r,s,a)),b(d,c,v,S(h,l,f))},luminosity:function(){b(h,l,f,S(r,s,a))},color:function(){b(r,s,a,S(h,l,f))},add:function(){d=t(h+r,255),c=t(l+s,255),v=t(f+a,255)},subtract:function(){d=e(h-r,0),c=e(l-s,0),v=e(f-a,0)},average:function(){d=(h+r)/2,c=(l+s)/2,v=(f+a)/2},negation:function(){d=255-i(255-r-h),c=255-i(255-s-l),v=255-i(255-a-f)}},p=this.nativeModes=L.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(C){this[C]=!0},{}),y=ue.getContext(1,1,{willReadFrequently:!0});y&&(L.each(_,function(C,P){var I=P==="darken",k=!1;y.save();try{y.fillStyle=I?"#300":"#a00",y.fillRect(0,0,1,1),y.globalCompositeOperation=P,y.globalCompositeOperation===P&&(y.fillStyle=I?"#a00":"#300",y.fillRect(0,0,1,1),k=y.getImageData(0,0,1,1).data[0]!==I?170:51)}catch{}y.restore(),p[P]=k}),ue.release(y)),this.process=function(C,P,I,k,T){var O=P.canvas,M=C==="normal";if(M||p[C])I.save(),I.setTransform(1,0,0,1,0,0),I.globalAlpha=k,M||(I.globalCompositeOperation=C),I.drawImage(O,T.x,T.y),I.restore();else{var A=_[C];if(!A)return;for(var N=I.getImageData(T.x,T.y,O.width,O.height),V=N.data,F=P.getImageData(0,0,O.width,O.height).data,D=0,H=V.length;D<H;D+=4){r=F[D],h=V[D],s=F[D+1],l=V[D+1],a=F[D+2],f=V[D+2],o=F[D+3],g=V[D+3],A();var W=o*k/255,X=1-W;V[D]=W*d+X*h,V[D+1]=W*c+X*l,V[D+2]=W*v+X*f,V[D+3]=o*k+X*g}I.putImageData(N,T.x,T.y)}}},oe=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",r={href:i,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function s(h,l,f){return o(bt.createElementNS(t,h),l,f)}function a(h,l){var f=r[l],g=f?h.getAttributeNS(f,l):h.getAttribute(l);return g==="null"?null:g}function o(h,l,f){for(var g in l){var d=l[g],c=r[g];typeof d=="number"&&f&&(d=f.number(d)),c?h.setAttributeNS(c,g,d):h.setAttribute(g,d)}return h}return{svg:t,xmlns:e,xlink:i,create:s,get:a,set:o}},Bt=L.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof Ce||t instanceof Ut||t instanceof ke)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=L.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&L.each(r,function(s,a){this[s]=a},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});new function(){var t;function e(_,p,y){var C=new L,P=_.getTranslation();if(p){var I;_.isInvertible()?(_=_._shiftless(),I=_._inverseTransform(P),P=null):I=new B,C[y?"cx":"x"]=I.x,C[y?"cy":"y"]=I.y}if(!_.isIdentity()){var k=_.decompose();if(k){var T=[],O=k.rotation,M=k.scaling,A=k.skewing;P&&!P.isZero()&&T.push("translate("+t.point(P)+")"),O&&T.push("rotate("+t.number(O)+")"),(!mt.isZero(M.x-1)||!mt.isZero(M.y-1))&&T.push("scale("+t.point(M)+")"),A.x&&T.push("skewX("+t.number(A.x)+")"),A.y&&T.push("skewY("+t.number(A.y)+")"),C.transform=T.join(" ")}else C.transform="matrix("+_.getValues().join(",")+")"}return C}function i(_,p){for(var y=e(_._matrix),C=_._children,P=oe.create("g",y,t),I=0,k=C.length;I<k;I++){var T=C[I],O=x(T,p);if(O)if(T.isClipMask()){var M=oe.create("clipPath");M.appendChild(O),S(T,M,"clip"),oe.set(P,{"clip-path":"url(#"+M.id+")"})}else P.appendChild(O)}return P}function r(_,p){var y=e(_._matrix,!0),C=_.getSize(),P=_.getImage();return y.x-=C.width/2,y.y-=C.height/2,y.width=C.width,y.height=C.height,y.href=p.embedImages==!1&&P&&P.src||_.toDataURL(),oe.create("image",y,t)}function s(_,p){var y=p.matchShapes;if(y){var C=_.toShape(!1);if(C)return a(C)}var P=_._segments,I=P.length,k,T=e(_._matrix);if(y&&I>=2&&!_.hasHandles())if(I>2){k=_._closed?"polygon":"polyline";for(var O=[],M=0;M<I;M++)O.push(t.point(P[M]._point));T.points=O.join(" ")}else{k="line";var A=P[0]._point,N=P[1]._point;T.set({x1:A.x,y1:A.y,x2:N.x,y2:N.y})}else k="path",T.d=_.getPathData(null,p.precision);return oe.create(k,T,t)}function a(_){var p=_._type,y=_._radius,C=e(_._matrix,!0,p!=="rectangle");if(p==="rectangle"){p="rect";var P=_._size,I=P.width,k=P.height;C.x-=I/2,C.y-=k/2,C.width=I,C.height=k,y.isZero()&&(y=null)}return y&&(p==="circle"?C.r=y:(C.rx=y.width,C.ry=y.height)),oe.create(p,C,t)}function o(_,p){var y=e(_._matrix),C=_.getPathData(null,p.precision);return C&&(y.d=C),oe.create("path",y,t)}function h(_,p){var y=e(_._matrix,!0),C=_._definition,P=v(C,"symbol"),I=C._item,k=I.getStrokeBounds();return P||(P=oe.create("symbol",{viewBox:t.rectangle(k)}),P.appendChild(x(I,p)),S(C,P,"symbol")),y.href="#"+P.id,y.x+=k.x,y.y+=k.y,y.width=k.width,y.height=k.height,y.overflow="visible",oe.create("use",y,t)}function l(_){var p=v(_,"color");if(!p){var y=_.getGradient(),C=y._radial,P=_.getOrigin(),I=_.getDestination(),k;if(C){k={cx:P.x,cy:P.y,r:P.getDistance(I)};var T=_.getHighlight();T&&(k.fx=T.x,k.fy=T.y)}else k={x1:P.x,y1:P.y,x2:I.x,y2:I.y};k.gradientUnits="userSpaceOnUse",p=oe.create((C?"radial":"linear")+"Gradient",k,t);for(var O=y._stops,M=0,A=O.length;M<A;M++){var N=O[M],V=N._color,F=V.getAlpha(),D=N._offset;k={offset:D??M/(A-1)},V&&(k["stop-color"]=V.toCSS(!0)),F<1&&(k["stop-opacity"]=F),p.appendChild(oe.create("stop",k,t))}S(_,p,"color")}return"url(#"+p.id+")"}function f(_){var p=oe.create("text",e(_._matrix,!0),t);return p.textContent=_._content,p}var g={Group:i,Layer:i,Raster:r,Path:s,Shape:a,CompoundPath:o,SymbolItem:h,PointText:f};function d(_,p,y,C){var P={},I=!C&&_.getParent(),k=[];return _._name!=null&&(P.id=_._name),L.each(Bt,function(T){var O=T.get,M=T.type,A=_[O]();if(T.exportFilter?T.exportFilter(_,A):y.reduceAttributes==!1||!I||!L.equals(I[O](),A)){if(M==="color"&&A!=null){var N=A.getAlpha();N<1&&(P[T.attribute+"-opacity"]=N)}M==="style"?k.push(T.attribute+": "+A):P[T.attribute]=A==null?"none":M==="color"?A.gradient?l(A):A.toCSS(!0):M==="array"?A.join(","):M==="lookup"?T.toSVG[A]:A}}),k.length&&(P.style=k.join(";")),P.opacity===1&&delete P.opacity,_._visible||(P.visibility="hidden"),oe.set(p,P,t)}var c;function v(_,p){return c||(c={ids:{},svgs:{}}),_&&c.svgs[p+"-"+(_._id||_.__id||(_.__id=Ae.get("svg")))]}function S(_,p,y){c||v();var C=c.ids[y]=(c.ids[y]||0)+1;p.id=y+"-"+C,c.svgs[y+"-"+(_._id||_.__id)]=p}function b(_,p){var y=_,C=null;if(c){y=_.nodeName.toLowerCase()==="svg"&&_;for(var P in c.svgs)C||(y||(y=oe.create("svg"),y.appendChild(_)),C=y.insertBefore(oe.create("defs"),y.firstChild)),C.appendChild(c.svgs[P]);c=null}return p.asString?new pt.XMLSerializer().serializeToString(y):y}function x(_,p,y){var C=g[_._class],P=C&&C(_,p);if(P){var I=p.onExport;I&&(P=I(_,P,p)||P);var k=JSON.stringify(_._data);k&&k!=="{}"&&k!=="null"&&P.setAttribute("data-paper-data",k)}return P&&d(_,P,p,y)}function m(_){return _||(_={}),t=new te(_.precision),_}z.inject({exportSVG:function(_){return _=m(_),b(x(this,_,!0),_)}}),Lt.inject({exportSVG:function(_){_=m(_);var p=this._children,y=this.getView(),C=L.pick(_.bounds,"view"),P=_.matrix||C==="view"&&y._matrix,I=P&&yt.read([P]),k=C==="view"?new at([0,0],y.getViewSize()):C==="content"?z._getBounds(p,I,{stroke:!0}).rect:at.read([C],0,{readNull:!0}),T={version:"1.1",xmlns:oe.svg,"xmlns:xlink":oe.xlink};k&&(T.width=k.width,T.height=k.height,(k.x||k.x===0||k.y||k.y===0)&&(T.viewBox=t.rectangle(k)));var O=oe.create("svg",T,t),M=O;I&&!I.isIdentity()&&(M=O.appendChild(oe.create("g",e(I),t)));for(var A=0,N=p.length;A<N;A++)M.appendChild(x(p[A],_,!0));return b(O,_)}})},new function(){var t={},e;function i(p,y,C,P,I,k){var T=oe.get(p,y)||k,O=T==null?P?null:C?"":0:C?T:parseFloat(T);return/%\s*$/.test(T)?O/100*(I?1:e[/x|^width/.test(y)?"width":"height"]):O}function r(p,y,C,P,I,k,T){return y=i(p,y||"x",!1,P,I,k),C=i(p,C||"y",!1,P,I,T),P&&(y==null||C==null)?null:new B(y,C)}function s(p,y,C,P,I){return y=i(p,y||"width",!1,P,I),C=i(p,C||"height",!1,P,I),P&&(y==null||C==null)?null:new rt(y,C)}function a(p,y,C){return p==="none"?null:y==="number"?parseFloat(p):y==="array"?p?p.split(/[\s,]+/g).map(parseFloat):[]:y==="color"?x(p)||p:y==="lookup"?C[p]:p}function o(p,y,C,P){var I=p.childNodes,k=y==="clippath",T=y==="defs",O=new Kt,M=O._project,A=M._currentStyle,N=[];if(!k&&!T&&(O=b(O,p,P),M._currentStyle=O._style.clone()),P)for(var V=p.querySelectorAll("defs"),F=0,D=V.length;F<D;F++)m(V[F],C,!1);for(var F=0,D=I.length;F<D;F++){var H=I[F],W;H.nodeType===1&&!/^defs$/i.test(H.nodeName)&&(W=m(H,C,!1))&&!(W instanceof ee)&&N.push(W)}return O.addChildren(N),k&&(O=b(O.reduce(),p,P)),M._currentStyle=A,(k||T)&&(O.remove(),O=null),O}function h(p,y){for(var C=p.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),P=[],I=0,k=C.length;I<k;I+=2)P.push(new B(parseFloat(C[I]),parseFloat(C[I+1])));var T=new vt(P);return y==="polygon"&&T.closePath(),T}function l(p){return Ce.create(p.getAttribute("d"))}function f(p,y){var C=(i(p,"href",!0)||"").substring(1),P=y==="radialgradient",I;if(C)I=t[C].getGradient(),I._radial^P&&(I=I.clone(),I._radial=P);else{for(var k=p.childNodes,T=[],O=0,M=k.length;O<M;O++){var A=k[O];A.nodeType===1&&T.push(b(new Ze,A))}I=new Ne(T,P)}var N,V,F,D=i(p,"gradientUnits",!0)!=="userSpaceOnUse";P?(N=r(p,"cx","cy",!1,D,"50%","50%"),V=N.add(i(p,"r",!1,!1,D,"50%"),0),F=r(p,"fx","fy",!0,D)):(N=r(p,"x1","y1",!1,D,"0%","0%"),V=r(p,"x2","y2",!1,D,"100%","0%"));var H=b(new Rt(I,N,V,F),p);return H._scaleToBounds=D,null}var g={"#document":function(p,y,C,P){for(var I=p.childNodes,k=0,T=I.length;k<T;k++){var O=I[k];if(O.nodeType===1)return m(O,C,P)}},g:o,svg:o,clippath:o,polygon:h,polyline:h,path:l,lineargradient:f,radialgradient:f,image:function(p){var y=new Oe(i(p,"href",!0));return y.on("load",function(){var C=s(p);this.setSize(C);var P=r(p).add(C.divide(2));this._matrix.append(new yt().translate(P))}),y},symbol:function(p,y,C,P){return new ee(o(p,y,C,P),!0)},defs:o,use:function(p){var y=(i(p,"href",!0)||"").substring(1),C=t[y],P=r(p);return C?C instanceof ee?C.place(P):C.clone().translate(P):null},circle:function(p){return new Ut.Circle(r(p,"cx","cy"),i(p,"r"))},ellipse:function(p){return new Ut.Ellipse({center:r(p,"cx","cy"),radius:s(p,"rx","ry")})},rect:function(p){return new Ut.Rectangle(new at(r(p),s(p)),s(p,"rx","ry"))},line:function(p){return new vt.Line(r(p,"x1","y1"),r(p,"x2","y2"))},text:function(p){var y=new ai(r(p).add(r(p,"dx","dy")));return y.setContent(p.textContent.trim()||""),y},switch:o};function d(p,y,C,P){if(p.transform){for(var I=(P.getAttribute(C)||"").split(/\)\s*/g),k=new yt,T=0,O=I.length;T<O;T++){var M=I[T];if(!M)break;for(var A=M.split(/\(\s*/),N=A[0].trim(),V=A[1].split(/[\s,]+/g),F=0,D=V.length;F<D;F++)V[F]=parseFloat(V[F]);switch(N){case"matrix":k.append(new yt(V[0],V[1],V[2],V[3],V[4],V[5]));break;case"rotate":k.rotate(V[0],V[1]||0,V[2]||0);break;case"translate":k.translate(V[0],V[1]||0);break;case"scale":k.scale(V);break;case"skewX":k.skew(V[0],0);break;case"skewY":k.skew(0,V[0]);break}}p.transform(k)}}function c(p,y,C){var P=C==="fill-opacity"?"getFillColor":"getStrokeColor",I=p[P]&&p[P]();I&&I.setAlpha(parseFloat(y))}var v=L.set(L.each(Bt,function(p){this[p.attribute]=function(y,C){if(y[p.set]&&(y[p.set](a(C,p.type,p.fromSVG)),p.type==="color")){var P=y[p.get]();if(P&&P._scaleToBounds){var I=y.getBounds();P.transform(new yt().translate(I.getPoint()).scale(I.getSize()))}}}},{}),{id:function(p,y){t[y]=p,p.setName&&p.setName(y)},"clip-path":function(p,y){var C=x(y);if(C)if(C=C.clone(),C.setClipMask(!0),p instanceof Kt)p.insertChild(0,C);else return new Kt(C,p)},gradientTransform:d,transform:d,"fill-opacity":c,"stroke-opacity":c,visibility:function(p,y){p.setVisible&&p.setVisible(y==="visible")},display:function(p,y){p.setVisible&&p.setVisible(y!==null)},"stop-color":function(p,y){p.setColor&&p.setColor(y)},"stop-opacity":function(p,y){p._color&&p._color.setAlpha(parseFloat(y))},offset:function(p,y){if(p.setOffset){var C=y.match(/(.*)%$/);p.setOffset(C?C[1]/100:parseFloat(y))}},viewBox:function(p,y,C,P,I){var k=new at(a(y,"array")),T=s(P,null,null,!0),O,M;if(p instanceof Kt){var A=T?T.divide(k.getSize()):1,M=new yt().scale(A).translate(k.getPoint().negate());O=p}else p instanceof ee&&(T&&k.setSize(T),O=p._item);if(O){if(S(P,"overflow",I)!=="visible"){var N=new Ut.Rectangle(k);N.setClipMask(!0),O.addChild(N)}M&&O.transform(M)}}});function S(p,y,C){var P=p.attributes[y],I=P&&P.value;if(!I&&p.style){var k=L.camelize(y);I=p.style[k],!I&&C.node[k]!==C.parent[k]&&(I=C.node[k])}return I?I==="none"?null:I:G}function b(p,y,C){var P=y.parentNode,I={node:kt.getStyles(y)||{},parent:!C&&!/^defs$/i.test(P.tagName)&&kt.getStyles(P)||{}};return L.each(v,function(k,T){var O=S(y,T,I);p=O!==G&&k(p,O,T,y,I)||p}),p}function x(p){var y=p&&p.match(/\((?:["'#]*)([^"')]+)/),C=y&&y[1],P=C&&t[Ct?C.replace(Ct.location.href.split("#")[0]+"#",""):C];return P&&P._scaleToBounds&&(P=P.clone(),P._scaleToBounds=!0),P}function m(p,y,C){var P=p.nodeName.toLowerCase(),I=P!=="#document",k=bt.body,T,O,M;C&&I&&(e=n.getView().getSize(),e=s(p,null,null,!0)||e,T=oe.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),O=p.parentNode,M=p.nextSibling,T.appendChild(p),k.appendChild(T));var A=n.settings,N=A.applyMatrix,V=A.insertItems;A.applyMatrix=!1,A.insertItems=!1;var F=g[P],D=F&&F(p,P,y,C)||null;if(A.insertItems=V,A.applyMatrix=N,D){I&&!(D instanceof Kt)&&(D=b(D,p,C));var H=y.onImport,W=I&&p.getAttribute("data-paper-data");H&&(D=H(p,D,y)||D),y.expandShapes&&D instanceof Ut&&(D.remove(),D=D.toPath()),W&&(D._data=JSON.parse(W))}return T&&(k.removeChild(T),O&&(M?O.insertBefore(p,M):O.appendChild(p))),C&&(t={},D&&L.pick(y.applyMatrix,N)&&D.matrix.apply(!0,!0)),D}function _(p,y,C){if(!p)return null;y=typeof y=="function"?{onLoad:y}:y||{};var P=n,I=null;function k(A){try{var N=typeof A=="object"?A:new pt.DOMParser().parseFromString(A.trim(),"image/svg+xml");if(!N.nodeName)throw N=null,new Error("Unsupported SVG source: "+p);n=P,I=m(N,y,!0),(!y||y.insert!==!1)&&C._insertItem(G,I);var V=y.onLoad;V&&V(I,A)}catch(F){T(F)}}function T(A,N){var V=y.onError;if(V)V(A,N);else throw new Error(A)}if(typeof p=="string"&&!/^[\s\S]*</.test(p)){var O=bt.getElementById(p);O?k(O):ae.request({url:p,async:!0,onLoad:k,onError:T})}else if(typeof File<"u"&&p instanceof File){var M=new FileReader;return M.onload=function(){k(M.result)},M.onerror=function(){T(M.error)},M.readAsText(p)}else k(p);return I}z.inject({importSVG:function(p,y){return _(p,y,this)}}),Lt.inject({importSVG:function(p,y){return this.activate(),_(p,y,this)}})},L.exports.PaperScript=(function(){var t=this,e=t.acorn;if(!e&&typeof tr<"u")try{e=nr()}catch{}if(!e){var i,r;e=i=r={},function(b,x){if(typeof i=="object"&&typeof r=="object")return x(i);if(typeof G=="function"&&G.amd)return G(["exports"],x);x(b.acorn||(b.acorn={}))}(this,function(b){b.version="0.5.0";var x,m,_,p;b.parse=function(U,Z){return m=String(U),_=m.length,C(Z),hn(),Hn(x.program)};var y=b.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function C(U){x=U||{};for(var Z in y)Object.prototype.hasOwnProperty.call(x,Z)||(x[Z]=y[Z]);p=x.sourceFile||null}var P=b.getLineInfo=function(U,Z){for(var $=1,st=0;;){Si.lastIndex=st;var Pt=Si.exec(U);if(Pt&&Pt.index<Z)++$,st=Pt.index+Pt[0].length;else break}return{line:$,column:Z-st}};b.tokenize=function(U,Z){m=String(U),_=m.length,C(Z),hn();var $={};function st(Pt){return W=T,di(Pt),$.start=k,$.end=T,$.startLoc=O,$.endLoc=M,$.type=A,$.value=N,$}return st.jumpTo=function(Pt,Et){if(I=Pt,x.locations){F=1,D=Si.lastIndex=0;for(var Mt;(Mt=Si.exec(m))&&Mt.index<Pt;)++F,D=Mt.index+Mt[0].length}V=Et,Ci()},st};var I,k,T,O,M,A,N,V,F,D,H,W,X,tt,et,j;function K(U,Z){var $=P(m,U);Z+=" ("+$.line+":"+$.column+")";var st=new SyntaxError(Z);throw st.pos=U,st.loc=$,st.raisedAt=I,st}var it=[],nt={type:"num"},ut={type:"regexp"},lt={type:"string"},ft={type:"name"},dt={type:"eof"},_t={keyword:"break"},wt={keyword:"case",beforeExpr:!0},Dt={keyword:"catch"},Ht={keyword:"continue"},ht={keyword:"debugger"},It={keyword:"default"},St={keyword:"do",isLoop:!0},Gt={keyword:"else",beforeExpr:!0},jt={keyword:"finally"},ne={keyword:"for",isLoop:!0},ge={keyword:"function"},pe={keyword:"if"},de={keyword:"return",beforeExpr:!0},he={keyword:"switch"},Wt={keyword:"throw",beforeExpr:!0},Qt={keyword:"try"},me={keyword:"var"},Ie={keyword:"while",isLoop:!0},wi={keyword:"with"},Mi={keyword:"new",beforeExpr:!0},Li={keyword:"this"},Ni={keyword:"null",atomValue:null},hi={keyword:"true",atomValue:!0},Pi={keyword:"false",atomValue:!1},li={keyword:"in",binop:7,beforeExpr:!0},xi={break:_t,case:wt,catch:Dt,continue:Ht,debugger:ht,default:It,do:St,else:Gt,finally:jt,for:ne,function:ge,if:pe,return:de,switch:he,throw:Wt,try:Qt,var:me,while:Ie,with:wi,null:Ni,true:hi,false:Pi,new:Mi,in:li,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Li,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Ke={type:"[",beforeExpr:!0},Vt={type:"]"},Qe={type:"{",beforeExpr:!0},He={type:"}"},Le={type:"(",beforeExpr:!0},Me={type:")"},Ve={type:",",beforeExpr:!0},Re={type:";",beforeExpr:!0},$e={type:":",beforeExpr:!0},u={type:"."},w={type:"?",beforeExpr:!0},E={binop:10,beforeExpr:!0},R={isAssign:!0,beforeExpr:!0},q={isAssign:!0,beforeExpr:!0},Y={postfix:!0,prefix:!0,isUpdate:!0},Q={prefix:!0,beforeExpr:!0},ct={binop:1,beforeExpr:!0},gt={binop:2,beforeExpr:!0},zt={binop:3,beforeExpr:!0},At={binop:4,beforeExpr:!0},_e={binop:5,beforeExpr:!0},Xe={binop:6,beforeExpr:!0},fi={binop:7,beforeExpr:!0},ti={binop:8,beforeExpr:!0},bi={binop:9,prefix:!0,beforeExpr:!0},ei={binop:10,beforeExpr:!0};b.tokTypes={bracketL:Ke,bracketR:Vt,braceL:Qe,braceR:He,parenL:Le,parenR:Me,comma:Ve,semi:Re,colon:$e,dot:u,question:w,slash:E,eq:R,name:ft,eof:dt,num:nt,regexp:ut,string:lt};for(var Je in xi)b.tokTypes["_"+Je]=xi[Je];function ki(U){U=U.split(" ");var Z="",$=[];t:for(var st=0;st<U.length;++st){for(var Pt=0;Pt<$.length;++Pt)if($[Pt][0].length==U[st].length){$[Pt].push(U[st]);continue t}$.push([U[st]])}function Et($t){if($t.length==1)return Z+="return str === "+JSON.stringify($t[0])+";";Z+="switch(str){";for(var De=0;De<$t.length;++De)Z+="case "+JSON.stringify($t[De])+":";Z+="return true}return false;"}if($.length>3){$.sort(function($t,De){return De.length-$t.length}),Z+="switch(str.length){";for(var st=0;st<$.length;++st){var Mt=$[st];Z+="case "+Mt[0].length+":",Et(Mt)}Z+="}"}else Et(U);return new Function("str",Z)}var Cn=ki("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),In=ki("class enum extends super const export import"),sn=ki("implements interface let package private protected public static yield"),zi=ki("eval arguments"),Pn=ki("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),kn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,an="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Tn="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",un=new RegExp("["+an+"]"),An=new RegExp("["+an+Tn+"]"),Ri=/[\n\r\u2028\u2029]/,Si=/\r\n|[\n\r\u2028\u2029]/g,Bi=b.isIdentifierStart=function(U){return U<65?U===36:U<91?!0:U<97?U===95:U<123?!0:U>=170&&un.test(String.fromCharCode(U))},on=b.isIdentifierChar=function(U){return U<48?U===36:U<58?!0:U<65?!1:U<91?!0:U<97?U===95:U<123?!0:U>=170&&An.test(String.fromCharCode(U))};function ci(){this.line=F,this.column=I-D}function hn(){F=1,I=D=0,V=!0,Ci()}function ye(U,Z){T=I,x.locations&&(M=new ci),A=U,Ci(),N=Z,V=U.beforeExpr}function En(){var U=x.onComment&&x.locations&&new ci,Z=I,$=m.indexOf("*/",I+=2);if($===-1&&K(I-2,"Unterminated comment"),I=$+2,x.locations){Si.lastIndex=Z;for(var st;(st=Si.exec(m))&&st.index<I;)++F,D=st.index+st[0].length}x.onComment&&x.onComment(!0,m.slice(Z+2,$),Z,I,U,x.locations&&new ci)}function Zi(){for(var U=I,Z=x.onComment&&x.locations&&new ci,$=m.charCodeAt(I+=2);I<_&&$!==10&&$!==13&&$!==8232&&$!==8233;)++I,$=m.charCodeAt(I);x.onComment&&x.onComment(!1,m.slice(U+2,I),U,I,Z,x.locations&&new ci)}function Ci(){for(;I<_;){var U=m.charCodeAt(I);if(U===32)++I;else if(U===13){++I;var Z=m.charCodeAt(I);Z===10&&++I,x.locations&&(++F,D=I)}else if(U===10||U===8232||U===8233)++I,x.locations&&(++F,D=I);else if(U>8&&U<14)++I;else if(U===47){var Z=m.charCodeAt(I+1);if(Z===42)En();else if(Z===47)Zi();else break}else if(U===160)++I;else if(U>=5760&&kn.test(String.fromCharCode(U)))++I;else break}}function On(){var U=m.charCodeAt(I+1);return U>=48&&U<=57?fn(!0):(++I,ye(u))}function Mn(){var U=m.charCodeAt(I+1);return V?(++I,ln()):U===61?we(q,2):we(E,1)}function Ln(){var U=m.charCodeAt(I+1);return U===61?we(q,2):we(ei,1)}function Nn(U){var Z=m.charCodeAt(I+1);return Z===U?we(U===124?ct:gt,2):Z===61?we(q,2):we(U===124?zt:_e,1)}function zn(){var U=m.charCodeAt(I+1);return U===61?we(q,2):we(At,1)}function Rn(U){var Z=m.charCodeAt(I+1);return Z===U?Z==45&&m.charCodeAt(I+2)==62&&Ri.test(m.slice(W,I))?(I+=3,Zi(),Ci(),di()):we(Y,2):Z===61?we(q,2):we(bi,1)}function Bn(U){var Z=m.charCodeAt(I+1),$=1;return Z===U?($=U===62&&m.charCodeAt(I+2)===62?3:2,m.charCodeAt(I+$)===61?we(q,$+1):we(ti,$)):Z==33&&U==60&&m.charCodeAt(I+2)==45&&m.charCodeAt(I+3)==45?(I+=4,Zi(),Ci(),di()):(Z===61&&($=m.charCodeAt(I+2)===61?3:2),we(fi,$))}function Vn(U){var Z=m.charCodeAt(I+1);return Z===61?we(Xe,m.charCodeAt(I+2)===61?3:2):we(U===61?R:Q,1)}function Fn(U){switch(U){case 46:return On();case 40:return++I,ye(Le);case 41:return++I,ye(Me);case 59:return++I,ye(Re);case 44:return++I,ye(Ve);case 91:return++I,ye(Ke);case 93:return++I,ye(Vt);case 123:return++I,ye(Qe);case 125:return++I,ye(He);case 58:return++I,ye($e);case 63:return++I,ye(w);case 48:var Z=m.charCodeAt(I+1);if(Z===120||Z===88)return Dn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return fn(!1);case 34:case 39:return qn(U);case 47:return Mn();case 37:case 42:return Ln();case 124:case 38:return Nn(U);case 94:return zn();case 43:case 45:return Rn(U);case 60:case 62:return Bn(U);case 61:case 33:return Vn(U);case 126:return we(Q,1)}return!1}function di(U){if(U?I=k+1:k=I,x.locations&&(O=new ci),U)return ln();if(I>=_)return ye(dt);var Z=m.charCodeAt(I);if(Bi(Z)||Z===92)return dn();var $=Fn(Z);if($===!1){var st=String.fromCharCode(Z);if(st==="\\"||un.test(st))return dn();K(I,"Unexpected character '"+st+"'")}return $}function we(U,Z){var $=m.slice(I,I+Z);I+=Z,ye(U,$)}function ln(){for(var Pt="",U,Z,$=I;;){I>=_&&K($,"Unterminated regular expression");var st=m.charAt(I);if(Ri.test(st)&&K($,"Unterminated regular expression"),U)U=!1;else{if(st==="[")Z=!0;else if(st==="]"&&Z)Z=!1;else if(st==="/"&&!Z)break;U=st==="\\"}++I}var Pt=m.slice($,I);++I;var Et=cn();Et&&!/^[gmsiy]*$/.test(Et)&&K($,"Invalid regexp flag");try{var Mt=new RegExp(Pt,Et)}catch($t){$t instanceof SyntaxError&&K($,$t.message),K($t)}return ye(ut,Mt)}function Ti(U,Z){for(var $=I,st=0,Pt=0,Et=Z??1/0;Pt<Et;++Pt){var Mt=m.charCodeAt(I),$t;if(Mt>=97?$t=Mt-97+10:Mt>=65?$t=Mt-65+10:Mt>=48&&Mt<=57?$t=Mt-48:$t=1/0,$t>=U)break;++I,st=st*U+$t}return I===$||Z!=null&&I-$!==Z?null:st}function Dn(){I+=2;var U=Ti(16);return U==null&&K(k+2,"Expected hexadecimal number"),Bi(m.charCodeAt(I))&&K(I,"Identifier directly after number"),ye(nt,U)}function fn(U){var Z=I,$=!1,st=m.charCodeAt(I)===48;!U&&Ti(10)===null&&K(Z,"Invalid number"),m.charCodeAt(I)===46&&(++I,Ti(10),$=!0);var Pt=m.charCodeAt(I);(Pt===69||Pt===101)&&(Pt=m.charCodeAt(++I),(Pt===43||Pt===45)&&++I,Ti(10)===null&&K(Z,"Invalid number"),$=!0),Bi(m.charCodeAt(I))&&K(I,"Identifier directly after number");var Et=m.slice(Z,I),Mt;return $?Mt=parseFloat(Et):!st||Et.length===1?Mt=parseInt(Et,10):/[89]/.test(Et)||j?K(Z,"Invalid number"):Mt=parseInt(Et,8),ye(nt,Mt)}function qn(U){I++;for(var Z="";;){I>=_&&K(k,"Unterminated string constant");var $=m.charCodeAt(I);if($===U)return++I,ye(lt,Z);if($===92){$=m.charCodeAt(++I);var st=/^[0-7]+/.exec(m.slice(I,I+3));for(st&&(st=st[0]);st&&parseInt(st,8)>255;)st=st.slice(0,-1);if(st==="0"&&(st=null),++I,st)j&&K(I-2,"Octal literal in strict mode"),Z+=String.fromCharCode(parseInt(st,8)),I+=st.length-1;else switch($){case 110:Z+=`
`;break;case 114:Z+="\r";break;case 120:Z+=String.fromCharCode(Vi(2));break;case 117:Z+=String.fromCharCode(Vi(4));break;case 85:Z+=String.fromCharCode(Vi(8));break;case 116:Z+="	";break;case 98:Z+="\b";break;case 118:Z+="\v";break;case 102:Z+="\f";break;case 48:Z+="\0";break;case 13:m.charCodeAt(I)===10&&++I;case 10:x.locations&&(D=I,++F);break;default:Z+=String.fromCharCode($);break}}else($===13||$===10||$===8232||$===8233)&&K(k,"Unterminated string constant"),Z+=String.fromCharCode($),++I}}function Vi(U){var Z=Ti(16,U);return Z===null&&K(k,"Bad character escape sequence"),Z}var Ii;function cn(){Ii=!1;for(var U,Z=!0,$=I;;){var st=m.charCodeAt(I);if(on(st))Ii&&(U+=m.charAt(I)),++I;else if(st===92){Ii||(U=m.slice($,I)),Ii=!0,m.charCodeAt(++I)!=117&&K(I,"Expecting Unicode escape sequence \\uXXXX"),++I;var Pt=Vi(4),Et=String.fromCharCode(Pt);Et||K(I-1,"Invalid Unicode escape"),(Z?Bi(Pt):on(Pt))||K(I-4,"Invalid Unicode escape"),U+=Et}else break;Z=!1}return Ii?U:m.slice($,I)}function dn(){var U=cn(),Z=ft;return!Ii&&Pn(U)&&(Z=xi[U]),ye(Z,U)}function Xt(){H=k,W=T,X=M,di()}function Gi(U){if(j=U,I=k,x.locations)for(;I<D;)D=m.lastIndexOf(`
`,D-2)+1,--F;Ci(),di()}function _n(){this.type=null,this.start=k,this.end=null}function gn(){this.start=O,this.end=null,p!==null&&(this.source=p)}function xe(){var U=new _n;return x.locations&&(U.loc=new gn),x.directSourceFile&&(U.sourceFile=x.directSourceFile),x.ranges&&(U.range=[k,0]),U}function ii(U){var Z=new _n;return Z.start=U.start,x.locations&&(Z.loc=new gn,Z.loc.start=U.loc.start),x.ranges&&(Z.range=[U.range[0],0]),Z}function Ft(U,Z){return U.type=Z,U.end=W,x.locations&&(U.loc.end=X),x.ranges&&(U.range[1]=W),U}function Wi(U){return x.ecmaVersion>=5&&U.type==="ExpressionStatement"&&U.expression.type==="Literal"&&U.expression.value==="use strict"}function fe(U){if(A===U)return Xt(),!0}function Fi(){return!x.strictSemicolons&&(A===dt||A===He||Ri.test(m.slice(W,k)))}function _i(){!fe(Re)&&!Fi()&&Ye()}function ve(U){A===U?Xt():Ye()}function Ye(){K(k,"Unexpected token")}function Di(U){U.type!=="Identifier"&&U.type!=="MemberExpression"&&K(U.start,"Assigning to rvalue"),j&&U.type==="Identifier"&&zi(U.name)&&K(U.start,"Assigning to "+U.name+" in strict mode")}function Hn(U){H=W=I,x.locations&&(X=new ci),tt=j=null,et=[],di();var Z=U||xe(),$=!0;for(U||(Z.body=[]);A!==dt;){var st=Fe();Z.body.push(st),$&&Wi(st)&&Gi(!0),$=!1}return Ft(Z,"Program")}var ji={kind:"loop"},Un={kind:"switch"};function Fe(){(A===E||A===q&&N=="/=")&&di(!0);var U=A,Z=xe();switch(U){case _t:case Ht:Xt();var $=U===_t;fe(Re)||Fi()?Z.label=null:A!==ft?Ye():(Z.label=ni(),_i());for(var st=0;st<et.length;++st){var Pt=et[st];if((Z.label==null||Pt.name===Z.label.name)&&(Pt.kind!=null&&($||Pt.kind==="loop")||Z.label&&$))break}return st===et.length&&K(Z.start,"Unsyntactic "+U.keyword),Ft(Z,$?"BreakStatement":"ContinueStatement");case ht:return Xt(),_i(),Ft(Z,"DebuggerStatement");case St:return Xt(),et.push(ji),Z.body=Fe(),et.pop(),ve(Ie),Z.test=Ai(),_i(),Ft(Z,"DoWhileStatement");case ne:if(Xt(),et.push(ji),ve(Le),A===Re)return Ki(Z,null);if(A===me){var Et=xe();return Xt(),vn(Et,!0),Ft(Et,"VariableDeclaration"),Et.declarations.length===1&&fe(li)?pn(Z,Et):Ki(Z,Et)}var Et=Pe(!1,!0);return fe(li)?(Di(Et),pn(Z,Et)):Ki(Z,Et);case ge:return Xt(),$i(Z,!0);case pe:return Xt(),Z.test=Ai(),Z.consequent=Fe(),Z.alternate=fe(Gt)?Fe():null,Ft(Z,"IfStatement");case de:return!tt&&!x.allowReturnOutsideFunction&&K(k,"'return' outside of function"),Xt(),fe(Re)||Fi()?Z.argument=null:(Z.argument=Pe(),_i()),Ft(Z,"ReturnStatement");case he:Xt(),Z.discriminant=Ai(),Z.cases=[],ve(Qe),et.push(Un);for(var Mt,$t;A!=He;)if(A===wt||A===It){var De=A===wt;Mt&&Ft(Mt,"SwitchCase"),Z.cases.push(Mt=xe()),Mt.consequent=[],Xt(),De?Mt.test=Pe():($t&&K(H,"Multiple default clauses"),$t=!0,Mt.test=null),ve($e)}else Mt||Ye(),Mt.consequent.push(Fe());return Mt&&Ft(Mt,"SwitchCase"),Xt(),et.pop(),Ft(Z,"SwitchStatement");case Wt:return Xt(),Ri.test(m.slice(W,k))&&K(W,"Illegal newline after throw"),Z.argument=Pe(),_i(),Ft(Z,"ThrowStatement");case Qt:if(Xt(),Z.block=Ei(),Z.handler=null,A===Dt){var gi=xe();Xt(),ve(Le),gi.param=ni(),j&&zi(gi.param.name)&&K(gi.param.start,"Binding "+gi.param.name+" in strict mode"),ve(Me),gi.guard=null,gi.body=Ei(),Z.handler=Ft(gi,"CatchClause")}return Z.guardedHandlers=it,Z.finalizer=fe(jt)?Ei():null,!Z.handler&&!Z.finalizer&&K(Z.start,"Missing catch or finally clause"),Ft(Z,"TryStatement");case me:return Xt(),vn(Z),_i(),Ft(Z,"VariableDeclaration");case Ie:return Xt(),Z.test=Ai(),et.push(ji),Z.body=Fe(),et.pop(),Ft(Z,"WhileStatement");case wi:return j&&K(k,"'with' in strict mode"),Xt(),Z.object=Ai(),Z.body=Fe(),Ft(Z,"WithStatement");case Qe:return Ei();case Re:return Xt(),Ft(Z,"EmptyStatement");default:var en=N,qi=Pe();if(U===ft&&qi.type==="Identifier"&&fe($e)){for(var st=0;st<et.length;++st)et[st].name===en&&K(qi.start,"Label '"+en+"' is already declared");var Xn=A.isLoop?"loop":A===he?"switch":null;return et.push({name:en,kind:Xn}),Z.body=Fe(),et.pop(),Z.label=qi,Ft(Z,"LabeledStatement")}else return Z.expression=qi,_i(),Ft(Z,"ExpressionStatement")}}function Ai(){ve(Le);var U=Pe();return ve(Me),U}function Ei(U){var Z=xe(),$=!0,st=!1,Pt;for(Z.body=[],ve(Qe);!fe(He);){var Et=Fe();Z.body.push(Et),$&&U&&Wi(Et)&&(Pt=st,Gi(st=!0)),$=!1}return st&&!Pt&&Gi(!1),Ft(Z,"BlockStatement")}function Ki(U,Z){return U.init=Z,ve(Re),U.test=A===Re?null:Pe(),ve(Re),U.update=A===Me?null:Pe(),ve(Me),U.body=Fe(),et.pop(),Ft(U,"ForStatement")}function pn(U,Z){return U.left=Z,U.right=Pe(),ve(Me),U.body=Fe(),et.pop(),Ft(U,"ForInStatement")}function vn(U,Z){for(U.declarations=[],U.kind="var";;){var $=xe();if($.id=ni(),j&&zi($.id.name)&&K($.id.start,"Binding "+$.id.name+" in strict mode"),$.init=fe(R)?Pe(!0,Z):null,U.declarations.push(Ft($,"VariableDeclarator")),!fe(Ve))break}return U}function Pe(U,Z){var $=Xi(Z);if(!U&&A===Ve){var st=ii($);for(st.expressions=[$];fe(Ve);)st.expressions.push(Xi(Z));return Ft(st,"SequenceExpression")}return $}function Xi(U){var Z=Zn(U);if(A.isAssign){var $=ii(Z);return $.operator=N,$.left=Z,Xt(),$.right=Xi(U),Di(Z),Ft($,"AssignmentExpression")}return Z}function Zn(U){var Z=Gn(U);if(fe(w)){var $=ii(Z);return $.test=Z,$.consequent=Pe(!0),ve($e),$.alternate=Pe(!0,U),Ft($,"ConditionalExpression")}return Z}function Gn(U){return Ji(Yi(),-1,U)}function Ji(U,Z,$){var st=A.binop;if(st!=null&&(!$||A!==li)&&st>Z){var Pt=ii(U);Pt.left=U,Pt.operator=N;var Et=A;Xt(),Pt.right=Ji(Yi(),st,$);var Mt=Ft(Pt,Et===ct||Et===gt?"LogicalExpression":"BinaryExpression");return Ji(Mt,Z,$)}return U}function Yi(){if(A.prefix){var U=xe(),Z=A.isUpdate;return U.operator=N,U.prefix=!0,V=!0,Xt(),U.argument=Yi(),Z?Di(U.argument):j&&U.operator==="delete"&&U.argument.type==="Identifier"&&K(U.start,"Deleting local variable in strict mode"),Ft(U,Z?"UpdateExpression":"UnaryExpression")}for(var $=Wn();A.postfix&&!Fi();){var U=ii($);U.operator=N,U.prefix=!1,U.argument=$,Di($),Xt(),$=Ft(U,"UpdateExpression")}return $}function Wn(){return Oi(Qi())}function Oi(U,Z){if(fe(u)){var $=ii(U);return $.object=U,$.property=ni(!0),$.computed=!1,Oi(Ft($,"MemberExpression"),Z)}else if(fe(Ke)){var $=ii(U);return $.object=U,$.property=Pe(),$.computed=!0,ve(Vt),Oi(Ft($,"MemberExpression"),Z)}else if(!Z&&fe(Le)){var $=ii(U);return $.callee=U,$.arguments=tn(Me,!1),Oi(Ft($,"CallExpression"),Z)}else return U}function Qi(){switch(A){case Li:var st=xe();return Xt(),Ft(st,"ThisExpression");case ft:return ni();case nt:case lt:case ut:var st=xe();return st.value=N,st.raw=m.slice(k,T),Xt(),Ft(st,"Literal");case Ni:case hi:case Pi:var st=xe();return st.value=A.atomValue,st.raw=A.keyword,Xt(),Ft(st,"Literal");case Le:var U=O,Z=k;Xt();var $=Pe();return $.start=Z,$.end=T,x.locations&&($.loc.start=U,$.loc.end=M),x.ranges&&($.range=[Z,T]),ve(Me),$;case Ke:var st=xe();return Xt(),st.elements=tn(Vt,!0,!0),Ft(st,"ArrayExpression");case Qe:return Kn();case ge:var st=xe();return Xt(),$i(st,!1);case Mi:return jn();default:Ye()}}function jn(){var U=xe();return Xt(),U.callee=Oi(Qi(),!0),fe(Le)?U.arguments=tn(Me,!1):U.arguments=it,Ft(U,"NewExpression")}function Kn(){var U=xe(),Z=!0,$=!1;for(U.properties=[],Xt();!fe(He);){if(Z)Z=!1;else if(ve(Ve),x.allowTrailingCommas&&fe(He))break;var st={key:mn()},Pt=!1,Et;if(fe($e)?(st.value=Pe(!0),Et=st.kind="init"):x.ecmaVersion>=5&&st.key.type==="Identifier"&&(st.key.name==="get"||st.key.name==="set")?(Pt=$=!0,Et=st.kind=st.key.name,st.key=mn(),A!==Le&&Ye(),st.value=$i(xe(),!1)):Ye(),st.key.type==="Identifier"&&(j||$))for(var Mt=0;Mt<U.properties.length;++Mt){var $t=U.properties[Mt];if($t.key.name===st.key.name){var De=Et==$t.kind||Pt&&$t.kind==="init"||Et==="init"&&($t.kind==="get"||$t.kind==="set");De&&!j&&Et==="init"&&$t.kind==="init"&&(De=!1),De&&K(st.key.start,"Redefinition of property")}}U.properties.push(st)}return Ft(U,"ObjectExpression")}function mn(){return A===nt||A===lt?Qi():ni(!0)}function $i(U,Z){A===ft?U.id=ni():Z?Ye():U.id=null,U.params=[];var $=!0;for(ve(Le);!fe(Me);)$?$=!1:ve(Ve),U.params.push(ni());var st=tt,Pt=et;if(tt=!0,et=[],U.body=Ei(!0),tt=st,et=Pt,j||U.body.body.length&&Wi(U.body.body[0]))for(var Et=U.id?-1:0;Et<U.params.length;++Et){var Mt=Et<0?U.id:U.params[Et];if((sn(Mt.name)||zi(Mt.name))&&K(Mt.start,"Defining '"+Mt.name+"' in strict mode"),Et>=0)for(var $t=0;$t<Et;++$t)Mt.name===U.params[$t].name&&K(Mt.start,"Argument name clash in strict mode")}return Ft(U,Z?"FunctionDeclaration":"FunctionExpression")}function tn(U,Z,$){for(var st=[],Pt=!0;!fe(U);){if(Pt)Pt=!1;else if(ve(Ve),Z&&x.allowTrailingCommas&&fe(U))break;$&&A===Ve?st.push(null):st.push(Pe(!0))}return st}function ni(U){var Z=xe();return U&&x.forbidReserved=="everywhere"&&(U=!1),A===ft?(!U&&(x.forbidReserved&&(x.ecmaVersion===3?Cn:In)(N)||j&&sn(N))&&m.slice(k,T).indexOf("\\")==-1&&K(k,"The keyword '"+N+"' is reserved"),Z.name=N):U&&A.keyword?Z.name=A.keyword:Ye(),V=!1,Xt(),Ft(Z,"Identifier")}}),e.version||(e=null)}function s(b,x){return(t.acorn||e).parse(b,x)}var a={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},o={"-":"__negate","+":"__self"},h=L.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(b){this["__"+b]="#"+b},{__self:function(){return this}});B.inject(h),rt.inject(h),Rt.inject(h);function l(b,x,m){var _=a[x];if(b&&b[_]){var p=b[_](m);return x==="!="?!p:p}switch(x){case"+":return b+m;case"-":return b-m;case"*":return b*m;case"/":return b/m;case"%":return b%m;case"==":return b==m;case"!=":return b!=m}}function f(b,x){var m=o[b];if(x&&x[m])return x[m]();switch(b){case"+":return+x;case"-":return-x}}function g(b,x){if(!b)return"";x=x||{};var m=[];function _(j){for(var K=0,it=m.length;K<it;K++){var nt=m[K];if(nt[0]>=j)break;j+=nt[1]}return j}function p(j){return b.substring(_(j.range[0]),_(j.range[1]))}function y(j,K){return b.substring(_(j.range[1]),_(K.range[0]))}function C(j,K){for(var it=_(j.range[0]),nt=_(j.range[1]),ut=0,lt=m.length-1;lt>=0;lt--)if(it>m[lt][0]){ut=lt+1;break}m.splice(ut,0,[it,K.length-nt+it]),b=b.substring(0,it)+K+b.substring(nt)}function P(j,K){switch(j.type){case"UnaryExpression":if(j.operator in o&&j.argument.type!=="Literal"){var it=p(j.argument);C(j,'$__("'+j.operator+'", '+it+")")}break;case"BinaryExpression":if(j.operator in a&&j.left.type!=="Literal"){var nt=p(j.left),ut=p(j.right),lt=y(j.left,j.right),ft=j.operator;C(j,"__$__("+nt+","+lt.replace(new RegExp("\\"+ft),'"'+ft+'"')+", "+ut+")")}break;case"UpdateExpression":case"AssignmentExpression":var dt=K&&K.type;if(!(dt==="ForStatement"||dt==="BinaryExpression"&&/^[=!<>]/.test(K.operator)||dt==="MemberExpression"&&K.computed)){if(j.type==="UpdateExpression"){var it=p(j.argument),_t="__$__("+it+', "'+j.operator[0]+'", 1)',wt=it+" = "+_t;j.prefix?wt="("+wt+")":(dt==="AssignmentExpression"||dt==="VariableDeclarator"||dt==="BinaryExpression")&&(p(K.left||K.id)===it&&(wt=_t),wt=it+"; "+wt),C(j,wt)}else if(/^.=$/.test(j.operator)&&j.left.type!=="Literal"){var nt=p(j.left),ut=p(j.right),_t=nt+" = __$__("+nt+', "'+j.operator[0]+'", '+ut+")";C(j,/^\(.*\)$/.test(p(j))?"("+_t+")":_t)}}break}}function I(j){switch(j.type){case"ExportDefaultDeclaration":C({range:[j.start,j.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var K=j.declaration,it=j.specifiers;if(K){var nt=K.declarations;nt&&(nt.forEach(function(lt){C(lt,"module.exports."+p(lt))}),C({range:[j.start,K.start+K.kind.length]},""))}else if(it){var ut=it.map(function(lt){var ft=p(lt);return"module.exports."+ft+" = "+ft+"; "}).join("");ut&&C(j,ut)}break}}function k(j,K,it){if(j){for(var nt in j)if(nt!=="range"&&nt!=="loc"){var ut=j[nt];if(Array.isArray(ut))for(var lt=0,ft=ut.length;lt<ft;lt++)k(ut[lt],j,it);else ut&&typeof ut=="object"&&k(ut,j,it)}it.operatorOverloading!==!1&&P(j,K),it.moduleExports!==!1&&I(j)}}function T(j){var K="",it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(j=(Math.abs(j)<<1)+(j<0?1:0);j||!K;){var nt=j&31;j>>=5,j&&(nt|=32),K+=it[nt]}return K}var O=x.url||"",M=x.sourceMaps,A=x.paperFeatures||{},N=x.source||b,V=x.offset||0,F=n.agent,D=F.versionNumber,H=!1,W=/\r\n|\n|\r/mg,X;if(M&&(F.chrome&&D>=30||F.webkit&&D>=537.76||F.firefox&&D>=23||F.node)){if(F.node)V-=2;else if(Ct&&O&&!Ct.location.href.indexOf(O)){var tt=bt.getElementsByTagName("html")[0].innerHTML;V=tt.substr(0,tt.indexOf(b)+1).match(W).length+1}H=V>0&&!(F.chrome&&D>=36||F.safari&&D>=600||F.firefox&&D>=40||F.node);var et=["AA"+T(H?0:V)+"A"];et.length=(b.match(W)||[]).length+1+(H?V:0),X={version:3,file:O,names:[],mappings:et.join(";AACA"),sourceRoot:"",sources:[O],sourcesContent:[N]}}return(A.operatorOverloading!==!1||A.moduleExports!==!1)&&k(s(b,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,A),X&&(H&&(b=new Array(V+1).join(`
`)+b),/^(inline|both)$/.test(M)&&(b+=`
//# sourceMappingURL=data:application/json;base64,`+pt.btoa(unescape(encodeURIComponent(JSON.stringify(X))))),b+=`
//# sourceURL=`+(O||"paperscript")),{url:O,source:N,code:b,map:X}}function d(b,x,m){n=x;var _=x.getView(),p=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(b)&&!/\bnew\s+Tool\b/.test(b)?new ui:null,y=p?p._events:[],C=["onFrame","onResize"].concat(y),P=[],I=[],k,T=typeof b=="object"?b:g(b,m);b=T.code;function O(D,H){for(var W in D)(H||!/^_/.test(W))&&new RegExp("([\\b\\s\\W]|^)"+W.replace(/\$/g,"\\$")+"\\b").test(b)&&(P.push(W),I.push(D[W]))}O({__$__:l,$__:f,paper:x,tool:p},!0),O(x),b="var module = { exports: {} }; "+b;var V=L.each(C,function(D){new RegExp("\\s+"+D+"\\b").test(b)&&(P.push(D),this.push("module.exports."+D+" = "+D+";"))},[]).join(`
`);V&&(b+=`
`+V),b+=`
return module.exports;`;var M=n.agent;if(bt&&(M.chrome||M.firefox&&M.versionNumber<40)){var A=bt.createElement("script"),N=bt.head||bt.getElementsByTagName("head")[0];M.firefox&&(b=`
`+b),A.appendChild(bt.createTextNode("document.__paperscript__ = function("+P+") {"+b+`
}`)),N.appendChild(A),k=bt.__paperscript__,delete bt.__paperscript__,N.removeChild(A)}else k=Function(P,b);var V=k&&k.apply(x,I),F=V||{};return L.each(y,function(D){var H=F[D];H&&(p[D]=H)}),_&&(F.onResize&&_.setOnResize(F.onResize),_.emit("resize",{size:_.size,delta:new B}),F.onFrame&&_.setOnFrame(F.onFrame),_.requestUpdate()),V}function c(b){if(/^text\/(?:x-|)paperscript$/.test(b.type)&&Yt.getAttribute(b,"ignore")!=="true"){var x=Yt.getAttribute(b,"canvas"),m=bt.getElementById(x),_=b.src||b.getAttribute("data-src"),p=Yt.hasAttribute(b,"async"),y="data-paper-scope";if(!m)throw new Error('Unable to find canvas with id "'+x+'"');var C=Yt.get(m.getAttribute(y))||new Yt().setup(m);return m.setAttribute(y,C._id),_?ae.request({url:_,async:p,mimeType:"text/plain",onLoad:function(P){d(P,C,_)}}):d(b.innerHTML,C,b.baseURI),b.setAttribute("data-paper-ignore","true"),C}}function v(){L.each(bt&&bt.getElementsByTagName("script"),c)}function S(b){return b?c(b):v()}return Ct&&(bt.readyState==="complete"?setTimeout(v):Nt.add(Ct,{load:v})),{compile:g,execute:d,load:S,parse:s,calculateBinary:l,calculateUnary:f}}).call(this);var n=new(Yt.inject(L.exports,{Base:L,Numerical:mt,Key:We,DomEvent:Nt,DomElement:kt,document:bt,window:Ct,Symbol:ee,PlacedSymbol:Be}));return n.agent.node&&Ui(n),typeof G=="function"&&G.amd?G("paper",n):xt&&(xt.exports=n),n}).call(rn,typeof self=="object"?self:null)})(bn);var rr=bn.exports;const nn=Qn(rr);var Sn={exports:{}};/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(xt){(function(pt,G){pt=pt||Ui;var Ct=pt.window,bt=pt.document,L=new function(){var n=/^(statics|enumerable|beans|preserve)$/,t=[],e=t.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=t.forEach||function(d,c){for(var v=0,S=this.length;v<S;v++)d.call(c,this[v],v,this)},o=function(d,c){for(var v in this)this.hasOwnProperty(v)&&d.call(c,this[v],v,this)},h=Object.assign||function(d){for(var c=1,v=arguments.length;c<v;c++){var S=arguments[c];for(var b in S)S.hasOwnProperty(b)&&(d[b]=S[b])}return d},l=function(d,c,v){if(d){var S=r(d,"length");(S&&typeof S.value=="number"?a:o).call(d,c,v=v||d)}return v};function f(d,c,v,S,b){var x={};function m(P,I){I=I||(I=r(c,P))&&(I.get?I:I.value),typeof I=="string"&&I[0]==="#"&&(I=d[I.substring(1)]||I);var k=typeof I=="function",T=I,O=b||k&&!I.base?I&&I.get?P in d:d[P]:null,M;(!b||!O)&&(k&&O&&(I.base=O),k&&S!==!1&&(M=P.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(x[M[3].toLowerCase()+M[4]]=M[2]),(!T||k||!T.get||typeof T.get!="function"||!g.isPlainObject(T))&&(T={value:T,writable:!0}),(r(d,P)||{configurable:!0}).configurable&&(T.configurable=!0,T.enumerable=v??!M),s(d,P,T))}if(c){for(var _ in c)c.hasOwnProperty(_)&&!n.test(_)&&m(_);for(var _ in x){var p=x[_],y=d["set"+p],C=d["get"+p]||y&&d["is"+p];C&&(S===!0||C.length===0)&&m(_,{get:C,set:y})}}return d}function g(){for(var d=0,c=arguments.length;d<c;d++){var v=arguments[d];v&&h(this,v)}return this}return f(g,{inject:function(d){if(d){var c=d.statics===!0?d:d.statics,v=d.beans,S=d.preserve;c!==d&&f(this.prototype,d,d.enumerable,v,S),f(this,c,null,v,S)}for(var b=1,x=arguments.length;b<x;b++)this.inject(arguments[b]);return this},extend:function(){for(var d=this,c,v,S=0,b,x=arguments.length;S<x&&!(c&&v);S++)b=arguments[S],c=c||b.initialize,v=v||b.prototype;return c=c||function(){d.apply(this,arguments)},v=c.prototype=v||i(this.prototype),s(v,"constructor",{value:c,writable:!0,configurable:!0}),f(c,this),arguments.length&&this.inject.apply(c,arguments),c.base=d,c}}).inject({enumerable:!1,initialize:g,set:g,inject:function(){for(var d=0,c=arguments.length;d<c;d++){var v=arguments[d];v&&f(this,v,v.enumerable,v.beans,v.preserve)}return this},extend:function(){var d=i(this);return d.inject.apply(d,arguments)},each:function(d,c){return l(this,d,c)},clone:function(){return new this.constructor(this)},statics:{set:h,each:l,create:i,define:s,describe:r,clone:function(d){return h(new d.constructor,d)},isPlainObject:function(d){var c=d!=null&&d.constructor;return c&&(c===Object||c===g||c.name==="Object")},pick:function(d,c){return d!==G?d:c},slice:function(d,c,v){return e.call(d,c,v)}}})};xt.exports=L,L.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+L.each(this,function(n,t){if(!/^_/.test(t)){var e=typeof n;this.push(t+": "+(e==="number"?te.instance.number(n):e==="string"?"'"+n+"'":n))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(n){return L.importJSON(n,this)},exportJSON:function(n){return L.exportJSON(this,n)},toJSON:function(){return L.serialize(this)},set:function(n,t){return n&&L.filter(this,n,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function n(){var t=n.base.apply(this,arguments),e=t.prototype._class;return e&&!L.exports[e]&&(L.exports[e]=t),t},equals:function(n,t){if(n===t)return!0;if(n&&n.equals)return n.equals(t);if(t&&t.equals)return t.equals(n);if(n&&t&&typeof n=="object"&&typeof t=="object"){if(Array.isArray(n)&&Array.isArray(t)){var e=n.length;if(e!==t.length)return!1;for(;e--;)if(!L.equals(n[e],t[e]))return!1}else{var i=Object.keys(n),e=i.length;if(e!==Object.keys(t).length)return!1;for(;e--;){var r=i[e];if(!(t.hasOwnProperty(r)&&L.equals(n[r],t[r])))return!1}}return!0}return!1},read:function(n,t,e,i){if(this===L){var r=this.peek(n,t);return n.__index++,r}var s=this.prototype,a=s._readIndex,o=t||a&&n.__index||0,h=n.length,l=n[o];if(i=i||h-o,l instanceof this||e&&e.readNull&&l==null&&i<=1)return a&&(n.__index=o+1),l&&e&&e.clone?l.clone():l;if(l=L.create(s),a&&(l.__read=!0),l=l.initialize.apply(l,o>0||o+i<h?L.slice(n,o,o+i):n)||l,a){n.__index=o+l.__read;var f=l.__filtered;f&&(n.__filtered=f,l.__filtered=G),l.__read=G}return l},peek:function(n,t){return n[n.__index=t||n.__index||0]},remain:function(n){return n.length-(n.__index||0)},readList:function(n,t,e,i){for(var r=[],s,a=t||0,o=i?a+i:n.length,h=a;h<o;h++)r.push(Array.isArray(s=n[h])?this.read(s,0,e):this.read(n,h,e,1));return r},readNamed:function(n,t,e,i,r){var s=this.getNamed(n,t),a=s!==G;if(a){var o=n.__filtered;if(!o){var h=this.getSource(n);o=n.__filtered=L.create(h),o.__unfiltered=h}o[t]=G}return this.read(a?[s]:n,e,i,r)},readSupported:function(n,t){var e=this.getSource(n),i=this,r=!1;return e&&Object.keys(e).forEach(function(s){if(s in t){var a=i.readNamed(n,s);a!==G&&(t[s]=a),r=!0}}),r},getSource:function(n){var t=n.__source;if(t===G){var e=n.length===1&&n[0];t=n.__source=e&&L.isPlainObject(e)?e:null}return t},getNamed:function(n,t){var e=this.getSource(n);if(e)return t?e[t]:n.__filtered||e},hasNamed:function(n,t){return!!this.getNamed(n,t)},filter:function(n,t,e,i){var r;function s(f){if(!(e&&f in e)&&!(r&&f in r)){var g=t[f];g!==G&&(n[f]=g)}}if(i){for(var a={},o=0,h,l=i.length;o<l;o++)(h=i[o])in t&&(s(h),a[h]=!0);r=a}return Object.keys(t.__unfiltered||t).forEach(s),n},isPlainValue:function(n,t){return L.isPlainObject(n)||Array.isArray(n)||t&&typeof n=="string"},serialize:function(n,t,e,i){t=t||{};var r=!i,s;if(r&&(t.formatter=new te(t.precision),i={length:0,definitions:{},references:{},add:function(g,d){var c="#"+g._id,v=this.references[c];if(!v){this.length++;var S=d.call(g),b=g._class;b&&S[0]!==b&&S.unshift(b),this.definitions[c]=S,v=this.references[c]=[c]}return v}}),n&&n._serialize){s=n._serialize(t,i);var a=n._class;a&&!n._compactSerialize&&(r||!e)&&s[0]!==a&&s.unshift(a)}else if(Array.isArray(n)){s=[];for(var o=0,h=n.length;o<h;o++)s[o]=L.serialize(n[o],t,e,i)}else if(L.isPlainObject(n)){s={};for(var l=Object.keys(n),o=0,h=l.length;o<h;o++){var f=l[o];s[f]=L.serialize(n[f],t,e,i)}}else typeof n=="number"?s=t.formatter.number(n,t.precision):s=n;return r&&i.length>0?[["dictionary",i.definitions],s]:s},deserialize:function(n,t,e,i,r){var s=n,a=!e,o=a&&n&&n.length&&n[0][0]==="dictionary";if(e=e||{},Array.isArray(n)){var h=n[0],l=h==="dictionary";if(n.length==1&&/^#/.test(h))return e.dictionary[h];h=L.exports[h],s=[];for(var f=h?1:0,g=n.length;f<g;f++)s.push(L.deserialize(n[f],t,e,l,o));if(h){var d=s;t?s=t(h,d,a||r):s=new h(d)}}else if(L.isPlainObject(n)){s={},i&&(e.dictionary=s);for(var c in n)s[c]=L.deserialize(n[c],t,e)}return o?s[1]:s},exportJSON:function(n,t){var e=L.serialize(n,t);return t&&t.asString==!1?e:JSON.stringify(e)},importJSON:function(n,t){return L.deserialize(typeof n=="string"?JSON.parse(n):n,function(e,i,r){var s=r&&t&&t.constructor===e,a=s?t:L.create(e.prototype);if(i.length===1&&a instanceof z&&(s||!(a instanceof Ee))){var o=i[0];L.isPlainObject(o)&&(o.insert=!1,s&&(i=i.concat([z.INSERT])))}return(s?a.set:e).apply(a,i),s&&(t=null),a})},push:function(n,t){var e=t.length;if(e<4096)n.push.apply(n,t);else{var i=n.length;n.length+=e;for(var r=0;r<e;r++)n[i+r]=t[r]}return n},splice:function(n,t,e,i){var r=t&&t.length,s=e===G;e=s?n.length:e,e>n.length&&(e=n.length);for(var a=0;a<r;a++)t[a]._index=e+a;if(s)return L.push(n,t),[];var o=[e,i];t&&L.push(o,t);for(var h=n.splice.apply(n,o),a=0,l=h.length;a<l;a++)h[a]._index=G;for(var a=e+r,l=n.length;a<l;a++)n[a]._index=a;return h},capitalize:function(n){return n.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(n){return n.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var re={on:function(n,t){if(typeof n!="string")L.each(n,function(s,a){this.on(a,s)},this);else{var e=this._eventTypes,i=e&&e[n],r=this._callbacks=this._callbacks||{};r=r[n]=r[n]||[],r.indexOf(t)===-1&&(r.push(t),i&&i.install&&r.length===1&&i.install.call(this,n))}return this},off:function(n,t){if(typeof n!="string"){L.each(n,function(a,o){this.off(o,a)},this);return}var e=this._eventTypes,i=e&&e[n],r=this._callbacks&&this._callbacks[n],s;return r&&(!t||(s=r.indexOf(t))!==-1&&r.length===1?(i&&i.uninstall&&i.uninstall.call(this,n),delete this._callbacks[n]):s!==-1&&r.splice(s,1)),this},once:function(n,t){return this.on(n,function e(){t.apply(this,arguments),this.off(n,e)})},emit:function(n,t){var e=this._callbacks&&this._callbacks[n];if(!e)return!1;var i=L.slice(arguments,1),r=t&&t.target&&!t.currentTarget;e=e.slice(),r&&(t.currentTarget=this);for(var s=0,a=e.length;s<a;s++)if(e[s].apply(this,i)==!1){t&&t.stop&&t.stop();break}return r&&delete t.currentTarget,!0},responds:function(n){return!!(this._callbacks&&this._callbacks[n])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(n){var t=this._eventTypes,e=this._callbacks,i=n?"install":"uninstall";if(t){for(var r in e)if(e[r].length>0){var s=t[r],a=s&&s[i];a&&a.call(this,r)}}},statics:{inject:function n(t){var e=t._events;if(e){var i={};L.each(e,function(r,s){var a=typeof r=="string",o=a?r:s,h=L.capitalize(o),l=o.substring(2).toLowerCase();i[l]=a?{}:r,o="_"+o,t["get"+h]=function(){return this[o]},t["set"+h]=function(f){var g=this[o];g&&this.off(l,g),f&&this.on(l,f),this[o]=f}}),t._eventTypes=i}return n.base.apply(this,arguments)}}},Yt=L.extend({_class:"PaperScope",initialize:function n(){Bt=this,this.settings=new L({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=n._id++,n._scopes[this._id]=this;var t=n.prototype;if(!this.support){var e=ae.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in e||"mozDash"in e,nativeBlendModes:ue.nativeModes},ae.release(e)}if(!this.agent){var i=pt.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],s=r==="darwin"?"mac":r,a=t.agent=t.browser={platform:s};s&&(a[s]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(o,h,l,f,g){if(!a.chrome){var d=h==="opera"?f:/^(node|trident)$/.test(h)?g:l;a.version=d,a.versionNumber=parseFloat(d),h={trident:"msie",jsdom:"node"}[h]||h,a.name=h,a[h]=!0}}),a.chrome&&delete a.webkit,a.atom&&delete a.chrome}},version:"0.12.18",getView:function(){var n=this.project;return n&&n._view},getPaper:function(){return this},execute:function(n,t){},install:function(n){var t=this;L.each(["project","view","tool"],function(i){L.define(n,i,{configurable:!0,get:function(){return t[i]}})});for(var e in this)!/^_/.test(e)&&this[e]&&(n[e]=this[e])},setup:function(n){return Bt=this,this.project=new Lt(n),this},createCanvas:function(n,t){return ae.getCanvas(n,t)},activate:function(){Bt=this},clear:function(){for(var n=this.projects,t=this.tools,e=n.length-1;e>=0;e--)n[e].remove();for(var e=t.length-1;e>=0;e--)t[e].remove()},remove:function(){this.clear(),delete Yt._scopes[this._id]},statics:new function(){function n(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:n("get"),hasAttribute:n("has")}}}),be=L.extend(re,{initialize:function(n){this._scope=Bt,this._index=this._scope[this._list].push(this)-1,(n||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var n=this._scope[this._reference];return n&&n!==this&&n.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",n),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(L.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),Te={findItemBoundsCollisions:function(n,t,e){function i(a){for(var o=new Array(a.length),h=0;h<a.length;h++){var l=a[h].getBounds();o[h]=[l.left,l.top,l.right,l.bottom]}return o}var r=i(n),s=!t||t===n?r:i(t);return this.findBoundsCollisions(r,s,e||0)},findCurveBoundsCollisions:function(n,t,e,i){function r(d){for(var c=Math.min,v=Math.max,S=new Array(d.length),b=0;b<d.length;b++){var x=d[b];S[b]=[c(x[0],x[2],x[4],x[6]),c(x[1],x[3],x[5],x[7]),v(x[0],x[2],x[4],x[6]),v(x[1],x[3],x[5],x[7])]}return S}var s=r(n),a=!t||t===n?s:r(t);if(i){for(var o=this.findBoundsCollisions(s,a,e||0,!1,!0),h=this.findBoundsCollisions(s,a,e||0,!0,!0),l=[],f=0,g=o.length;f<g;f++)l[f]={hor:o[f],ver:h[f]};return l}return this.findBoundsCollisions(s,a,e||0)},findBoundsCollisions:function(n,t,e,i,r){var s=!t||n===t,a=s?n:n.concat(t),o=n.length,h=a.length;function l(W,X,tt){for(var et=0,j=W.length;et<j;){var K=j+et>>>1;a[W[K]][X]<tt?et=K+1:j=K}return et-1}for(var f=i?1:0,g=f+2,d=i?0:1,c=d+2,v=new Array(h),S=0;S<h;S++)v[S]=S;v.sort(function(W,X){return a[W][f]-a[X][f]});for(var b=[],x=new Array(o),S=0;S<h;S++){var m=v[S],_=a[m],p=s?m:m-o,y=m<o,C=s||!y,P=y?[]:null;if(b.length){var I=l(b,g,_[f]-e)+1;if(b.splice(0,I),s&&r){P=P.concat(b);for(var k=0;k<b.length;k++){var T=b[k];x[T].push(p)}}else for(var O=_[c],M=_[d],k=0;k<b.length;k++){var T=b[k],A=a[T],N=T<o,V=s||T>=o;(r||(y&&V||C&&N)&&O>=A[d]-e&&M<=A[c]+e)&&(y&&V&&P.push(s?T:T-o),C&&N&&x[T].push(p))}}if(y&&(n===t&&P.push(m),x[m]=P),b.length){var F=_[g],D=l(b,g,F);b.splice(D+1,0,m)}else b.push(m)}for(var S=0;S<x.length;S++){var H=x[S];H&&H.sort(function(X,tt){return X-tt})}return x}},te=L.extend({initialize:function(n){this.precision=L.pick(n,5),this.multiplier=Math.pow(10,this.precision)},number:function(n){return this.precision<16?Math.round(n*this.multiplier)/this.multiplier:n},pair:function(n,t,e){return this.number(n)+(e||",")+this.number(t)},point:function(n,t){return this.number(n.x)+(t||",")+this.number(n.y)},size:function(n,t){return this.number(n.width)+(t||",")+this.number(n.height)},rectangle:function(n,t){return this.point(n,t)+(t||",")+this.size(n,t)}});te.instance=new te;var mt=new function(){var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],e=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.log2||function(g){return Math.log(g)*Math.LOG2E},a=1e-12,o=112e-18;function h(g,d,c){return g<d?d:g>c?c:g}function l(g,d,c){function v(I){var k=I*134217729,T=I-k,O=T+k,M=I-O;return[O,M]}var S=d*d-g*c,b=d*d+g*c;if(e(S)*3<b){var x=v(g),m=v(d),_=v(c),p=d*d,y=m[0]*m[0]-p+2*m[0]*m[1]+m[1]*m[1],C=g*c,P=x[0]*_[0]-C+x[0]*_[1]+x[1]*_[0]+x[1]*_[1];S=p-C+(y-P)}return S}function f(){var g=Math.max.apply(Math,arguments);return g&&(g<1e-8||g>1e8)?r(2,-Math.round(s(g))):0}return{EPSILON:a,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(i(2)-1)/3,isZero:function(g){return g>=-a&&g<=a},isMachineZero:function(g){return g>=-o&&g<=o},clamp:h,integrate:function(g,d,c,v){for(var S=n[v-2],b=t[v-2],x=(c-d)*.5,m=x+d,_=0,p=v+1>>1,y=v&1?b[_++]*g(m):0;_<p;){var C=x*S[_];y+=b[_++]*(g(m+C)+g(m-C))}return x*y},findRoot:function(g,d,c,v,S,b,x){for(var m=0;m<b;m++){var _=g(c),p=_/d(c),y=c-p;if(e(p)<x){c=y;break}_>0?(S=c,c=y<=v?(v+S)*.5:y):(v=c,c=y>=S?(v+S)*.5:y)}return h(c,v,S)},solveQuadratic:function(g,d,c,v,S,b){var x,m=1/0;if(e(g)<a){if(e(d)<a)return e(c)<a?-1:0;x=-c/d}else{d*=-.5;var _=l(g,d,c);if(_&&e(_)<o){var p=f(e(g),e(d),e(c));p&&(g*=p,d*=p,c*=p,_=l(g,d,c))}if(_>=-o){var y=_<0?0:i(_),C=d+(d<0?-y:y);C===0?(x=c/g,m=-x):(x=C/g,m=c/C)}}var P=0,I=S==null,k=S-a,T=b+a;return isFinite(x)&&(I||x>k&&x<T)&&(v[P++]=I?x:h(x,S,b)),m!==x&&isFinite(m)&&(I||m>k&&m<T)&&(v[P++]=I?m:h(m,S,b)),P},solveCubic:function(g,d,c,v,S,b,x){var m=f(e(g),e(d),e(c),e(v)),_,p,y,C,P;m&&(g*=m,d*=m,c*=m,v*=m);function I(D){_=D;var H=g*_;p=H+d,y=p*_+c,C=(H+p)*_+y,P=y*_+v}if(e(g)<a)g=d,p=c,y=v,_=1/0;else if(e(v)<a)p=d,y=c,_=0;else{I(-(d/g)/3);var k=P/g,T=r(e(k),1/3),O=k<0?-1:1,M=-C/g,A=M>0?1.324717957244746*Math.max(T,i(M)):T,N=_-O*A;if(N!==_){do I(N),N=C===0?_:_-P/C/(1+o);while(O*N>O*_);e(g)*_*_>e(v/_)&&(y=-v/_,p=(y-c)/_)}}var V=mt.solveQuadratic(g,p,y,S,b,x),F=b==null;return isFinite(_)&&(V===0||V>0&&_!==S[0]&&_!==S[1])&&(F||_>b-a&&_<x+a)&&(S[V++]=F?_:h(_,b,x)),V}}},Ae={_id:1,_pools:{},get:function(n){if(n){var t=this._pools[n];return t||(t=this._pools[n]={_id:1}),t._id++}else return this._id++}},B=L.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,r=this.__read,s=0;if(i==="number"){var a=typeof e=="number";this._set(t,a?e:t),r&&(s=a?2:1)}else if(i==="undefined"||t===null)this._set(0,0),r&&(s=t===null?1:0);else{var o=i==="string"?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),s=0)}return r&&(this.__read=s),this},set:"#initialize",_set:function(n,t){return this.x=n,this.y=t,this},equals:function(n){return this===n||n&&(this.x===n.x&&this.y===n.y||Array.isArray(n)&&this.x===n[0]&&this.y===n[1])||!1},clone:function(){return new B(this.x,this.y)},toString:function(){var n=te.instance;return"{ x: "+n.number(this.x)+", y: "+n.number(this.y)+" }"},_serialize:function(n){var t=n.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(n){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*n,Math.sin(t)*n)}else{var e=n/this.getLength();mt.isZero(e)&&this.getAngle(),this._set(this.x*e,this.y*e)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(n){this.setAngleInRadians.call(this,n*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var n=B.read(arguments),t=this.getLength()*n.getLength();if(mt.isZero(t))return NaN;var e=this.dot(n)/t;return Math.acos(e<-1?-1:e>1?1:e)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(n){if(this._angle=n,!this.isZero()){var t=this.getLength();this._set(Math.cos(n)*t,Math.sin(n)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var n=B.read(arguments);return Math.atan2(this.cross(n),this.dot(n))*180/Math.PI},getDistance:function(){var n=arguments,t=B.read(n),e=t.x-this.x,i=t.y-this.y,r=e*e+i*i,s=L.read(n);return s?r:Math.sqrt(r)},normalize:function(n){n===G&&(n=1);var t=this.getLength(),e=t!==0?n/t:0,i=new B(this.x*e,this.y*e);return e>=0&&(i._angle=this._angle),i},rotate:function(n,t){if(n===0)return this.clone();n=n*Math.PI/180;var e=t?this.subtract(t):this,i=Math.sin(n),r=Math.cos(n);return e=new B(e.x*r-e.y*i,e.x*i+e.y*r),t?e.add(t):e},transform:function(n){return n?n._transformPoint(this):this},add:function(){var n=B.read(arguments);return new B(this.x+n.x,this.y+n.y)},subtract:function(){var n=B.read(arguments);return new B(this.x-n.x,this.y-n.y)},multiply:function(){var n=B.read(arguments);return new B(this.x*n.x,this.y*n.y)},divide:function(){var n=B.read(arguments);return new B(this.x/n.x,this.y/n.y)},modulo:function(){var n=B.read(arguments);return new B(this.x%n.x,this.y%n.y)},negate:function(){return new B(-this.x,-this.y)},isInside:function(){return at.read(arguments).contains(this)},isClose:function(){var n=arguments,t=B.read(n),e=L.read(n);return this.getDistance(t)<=e},isCollinear:function(){var n=B.read(arguments);return B.isCollinear(this.x,this.y,n.x,n.y)},isColinear:"#isCollinear",isOrthogonal:function(){var n=B.read(arguments);return B.isOrthogonal(this.x,this.y,n.x,n.y)},isZero:function(){var n=mt.isZero;return n(this.x)&&n(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(n){return this.x*(n>1&&n<4?-1:1)>=0&&this.y*(n>2?-1:1)>=0},dot:function(){var n=B.read(arguments);return this.x*n.x+this.y*n.y},cross:function(){var n=B.read(arguments);return this.x*n.y-this.y*n.x},project:function(){var n=B.read(arguments),t=n.isZero()?0:this.dot(n)/n.dot(n);return new B(n.x*t,n.y*t)},statics:{min:function(){var n=arguments,t=B.read(n),e=B.read(n);return new B(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var n=arguments,t=B.read(n),e=B.read(n);return new B(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new B(Math.random(),Math.random())},isCollinear:function(n,t,e,i){return Math.abs(n*i-t*e)<=Math.sqrt((n*n+t*t)*(e*e+i*i))*1e-8},isOrthogonal:function(n,t,e,i){return Math.abs(n*e+t*i)<=Math.sqrt((n*n+t*t)*(e*e+i*i))*1e-8}}},L.each(["round","ceil","floor","abs"],function(n){var t=Math[n];this[n]=function(){return new B(t(this.x),t(this.y))}},{})),se=B.extend({initialize:function(t,e,i,r){this._x=t,this._y=e,this._owner=i,this._setter=r},_set:function(n,t,e){return this._x=n,this._y=t,e||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(n){this._x=n,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(n){this._y=n,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(n){this._owner._changeSelection(this._getSelection(),n)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),rt=L.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,r=this.__read,s=0;if(i==="number"){var a=typeof e=="number";this._set(t,a?e:t),r&&(s=a?2:1)}else if(i==="undefined"||t===null)this._set(0,0),r&&(s=t===null?1:0);else{var o=i==="string"?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),s=0)}return r&&(this.__read=s),this},set:"#initialize",_set:function(n,t){return this.width=n,this.height=t,this},equals:function(n){return n===this||n&&(this.width===n.width&&this.height===n.height||Array.isArray(n)&&this.width===n[0]&&this.height===n[1])||!1},clone:function(){return new rt(this.width,this.height)},toString:function(){var n=te.instance;return"{ width: "+n.number(this.width)+", height: "+n.number(this.height)+" }"},_serialize:function(n){var t=n.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var n=rt.read(arguments);return new rt(this.width+n.width,this.height+n.height)},subtract:function(){var n=rt.read(arguments);return new rt(this.width-n.width,this.height-n.height)},multiply:function(){var n=rt.read(arguments);return new rt(this.width*n.width,this.height*n.height)},divide:function(){var n=rt.read(arguments);return new rt(this.width/n.width,this.height/n.height)},modulo:function(){var n=rt.read(arguments);return new rt(this.width%n.width,this.height%n.height)},negate:function(){return new rt(-this.width,-this.height)},isZero:function(){var n=mt.isZero;return n(this.width)&&n(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(n,t){return new rt(Math.min(n.width,t.width),Math.min(n.height,t.height))},max:function(n,t){return new rt(Math.max(n.width,t.width),Math.max(n.height,t.height))},random:function(){return new rt(Math.random(),Math.random())}}},L.each(["round","ceil","floor","abs"],function(n){var t=Math[n];this[n]=function(){return new rt(t(this.width),t(this.height))}},{})),Ot=rt.extend({initialize:function(t,e,i,r){this._width=t,this._height=e,this._owner=i,this._setter=r},_set:function(n,t,e){return this._width=n,this._height=t,e||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(n){this._width=n,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(n){this._height=n,this._owner[this._setter](this)}}),at=L.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,i,r){var s=arguments,a=typeof t,o;if(a==="number"?(this._set(t,e,i,r),o=4):a==="undefined"||t===null?(this._set(0,0,0,0),o=t===null?1:0):s.length===1&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==G||t.width!==G?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===G&&t.to===G&&(this._set(0,0,0,0),L.readSupported(s,this)&&(o=1))),o===G){var h=B.readNamed(s,"from"),l=L.peek(s),f=h.x,g=h.y,d,c;if(l&&l.x!==G||L.hasNamed(s,"to")){var v=B.readNamed(s,"to");d=v.x-f,c=v.y-g,d<0&&(f=v.x,d=-d),c<0&&(g=v.y,c=-c)}else{var S=rt.read(s);d=S.width,c=S.height}this._set(f,g,d,c),o=s.__index}var b=s.__filtered;return b&&(this.__filtered=b),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(n,t,e,i){return this.x=n,this.y=t,this.width=e,this.height=i,this},clone:function(){return new at(this.x,this.y,this.width,this.height)},equals:function(n){var t=L.isPlainValue(n)?at.read(arguments):n;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var n=te.instance;return"{ x: "+n.number(this.x)+", y: "+n.number(this.y)+", width: "+n.number(this.width)+", height: "+n.number(this.height)+" }"},_serialize:function(n){var t=n.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(n){var t=n?B:se;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var n=B.read(arguments);this.x=n.x,this.y=n.y},getSize:function(n){var t=n?rt:Ot;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var n=rt.read(arguments),t=this._sx,e=this._sy,i=n.width,r=n.height;t&&(this.x+=(this.width-i)*t),e&&(this.y+=(this.height-r)*e),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(n){if(!this._fw){var t=n-this.x;this.width-=this._sx===.5?t*2:t}this.x=n,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(n){if(!this._fh){var t=n-this.y;this.height-=this._sy===.5?t*2:t}this.y=n,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(n){if(!this._fw){var t=n-this.x;this.width=this._sx===.5?t*2:t}this.x=n-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(n){if(!this._fh){var t=n-this.y;this.height=this._sy===.5?t*2:t}this.y=n-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(n){this._fw||this._sx===.5?this.x=n-this.width/2:(this._sx&&(this.x+=(n-this.x)*2*this._sx),this.width=(n-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(n){this._fh||this._sy===.5?this.y=n-this.height/2:(this._sy&&(this.y+=(n-this.y)*2*this._sy),this.height=(n-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(n){var t=n?B:se;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var n=B.read(arguments);return this.setCenterX(n.x),this.setCenterY(n.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(n){return n&&n.width!==G||(Array.isArray(n)?n:arguments).length===4?this._containsRectangle(at.read(arguments)):this._containsPoint(B.read(arguments))},_containsPoint:function(n){var t=n.x,e=n.y;return t>=this.x&&e>=this.y&&t<=this.x+this.width&&e<=this.y+this.height},_containsRectangle:function(n){var t=n.x,e=n.y;return t>=this.x&&e>=this.y&&t+n.width<=this.x+this.width&&e+n.height<=this.y+this.height},intersects:function(){var n=at.read(arguments),t=L.read(arguments)||0;return n.x+n.width>this.x-t&&n.y+n.height>this.y-t&&n.x<this.x+this.width+t&&n.y<this.y+this.height+t},intersect:function(){var n=at.read(arguments),t=Math.max(this.x,n.x),e=Math.max(this.y,n.y),i=Math.min(this.x+this.width,n.x+n.width),r=Math.min(this.y+this.height,n.y+n.height);return new at(t,e,i-t,r-e)},unite:function(){var n=at.read(arguments),t=Math.min(this.x,n.x),e=Math.min(this.y,n.y),i=Math.max(this.x+this.width,n.x+n.width),r=Math.max(this.y+this.height,n.y+n.height);return new at(t,e,i-t,r-e)},include:function(){var n=B.read(arguments),t=Math.min(this.x,n.x),e=Math.min(this.y,n.y),i=Math.max(this.x+this.width,n.x),r=Math.max(this.y+this.height,n.y);return new at(t,e,i-t,r-e)},expand:function(){var n=rt.read(arguments),t=n.width,e=n.height;return new at(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(n,t){return this.expand(this.width*n-this.width,this.height*(t===G?n:t)-this.height)}},L.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(n,t){var e=n.join(""),i=/^[RL]/.test(e);t>=4&&(n[1]+=i?"Y":"X");var r=n[i?0:1],s=n[i?1:0],a="get"+r,o="get"+s,h="set"+r,l="set"+s,f="get"+e,g="set"+e;this[f]=function(d){var c=d?B:se;return new c(this[a](),this[o](),this,g)},this[g]=function(){var d=B.read(arguments);this[h](d.x),this[l](d.y)}},{beans:!0})),Se=at.extend({initialize:function(t,e,i,r,s,a){this._set(t,e,i,r,!0),this._owner=s,this._setter=a},_set:function(n,t,e,i,r){return this._x=n,this._y=t,this._width=e,this._height=i,r||this._owner[this._setter](this),this}},new function(){var n=at.prototype;return L.each(["x","y","width","height"],function(t){var e=L.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(r){this[i]=r,this._dontNotify||this._owner[this._setter](this)}},L.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var e="set"+t;this[e]=function(){this._dontNotify=!0,n[e].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),yt=L.extend({_class:"Matrix",initialize:function n(t,e){var i=arguments,r=i.length,s=!0;if(r>=6?this._set.apply(this,i):r===1||r===2?t instanceof n?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,e):Array.isArray(t)?this._set.apply(this,e?t.concat([e]):t):s=!1:r?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(n,t,e,i,r,s,a){return this._a=n,this._b=t,this._c=e,this._d=i,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(n,t){return L.serialize(this.getValues(),n,!0,t)},_changed:function(){var n=this._owner;n&&(n._applyMatrix?n.transform(null,!0):n._changed(25))},clone:function(){return new yt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(n){return n===this||n&&this._a===n._a&&this._b===n._b&&this._c===n._c&&this._d===n._d&&this._tx===n._tx&&this._ty===n._ty},toString:function(){var n=te.instance;return"[["+[n.number(this._a),n.number(this._c),n.number(this._tx)].join(", ")+"], ["+[n.number(this._b),n.number(this._d),n.number(this._ty)].join(", ")+"]]"},reset:function(n){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,n||this._changed(),this},apply:function(n,t){var e=this._owner;return e?(e.transform(null,L.pick(n,!0),t),this.isIdentity()):!1},translate:function(){var n=B.read(arguments),t=n.x,e=n.y;return this._tx+=t*this._a+e*this._c,this._ty+=t*this._b+e*this._d,this._changed(),this},scale:function(){var n=arguments,t=B.read(n),e=B.read(n,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(n){n*=Math.PI/180;var t=B.read(arguments,1),e=t.x,i=t.y,r=Math.cos(n),s=Math.sin(n),a=e-e*r+i*s,o=i-e*s-i*r,h=this._a,l=this._b,f=this._c,g=this._d;return this._a=r*h+s*f,this._b=r*l+s*g,this._c=-s*h+r*f,this._d=-s*l+r*g,this._tx+=a*h+o*f,this._ty+=a*l+o*g,this._changed(),this},shear:function(){var n=arguments,t=B.read(n),e=B.read(n,0,{readNull:!0});e&&this.translate(e);var i=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*r,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var n=arguments,t=B.read(n),e=B.read(n,0,{readNull:!0}),i=Math.PI/180,r=new B(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(r,e)},append:function(n,t){if(n){var e=this._a,i=this._b,r=this._c,s=this._d,a=n._a,o=n._c,h=n._b,l=n._d,f=n._tx,g=n._ty;this._a=a*e+h*r,this._c=o*e+l*r,this._b=a*i+h*s,this._d=o*i+l*s,this._tx+=f*e+g*r,this._ty+=f*i+g*s,t||this._changed()}return this},prepend:function(n,t){if(n){var e=this._a,i=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,h=n._a,l=n._c,f=n._b,g=n._d,d=n._tx,c=n._ty;this._a=h*e+l*i,this._c=h*r+l*s,this._b=f*e+g*i,this._d=f*r+g*s,this._tx=h*a+l*o+d,this._ty=f*a+g*o+c,t||this._changed()}return this},appended:function(n){return this.clone().append(n)},prepended:function(n){return this.clone().prepend(n)},invert:function(){var n=this._a,t=this._b,e=this._c,i=this._d,r=this._tx,s=this._ty,a=n*i-t*e,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=i/a,this._b=-t/a,this._c=-e/a,this._d=n/a,this._tx=(e*s-i*r)/a,this._ty=(t*r-n*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new yt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var n=this._a*this._d-this._c*this._b;return n&&!isNaN(n)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(n,t,e){return arguments.length<3?this._transformPoint(B.read(arguments)):this._transformCoordinates(n,t,e)},_transformPoint:function(n,t,e){var i=n.x,r=n.y;return t||(t=new B),t._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,e)},_transformCoordinates:function(n,t,e){for(var i=0,r=2*e;i<r;i+=2){var s=n[i],a=n[i+1];t[i]=s*this._a+a*this._c+this._tx,t[i+1]=s*this._b+a*this._d+this._ty}return t},_transformCorners:function(n){var t=n.x,e=n.y,i=t+n.width,r=e+n.height,s=[t,e,i,e,i,r,t,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(n,t,e){for(var i=this._transformCorners(n),r=i.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=i[a],h=a&1;o<r[h]?r[h]=o:o>s[h]&&(s[h]=o)}return t||(t=new at),t._set(r[0],r[1],s[0]-r[0],s[1]-r[1],e)},inverseTransform:function(){return this._inverseTransform(B.read(arguments))},_inverseTransform:function(n,t,e){var i=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,l=i*a-r*s,f=null;if(l&&!isNaN(l)&&isFinite(o)&&isFinite(h)){var g=n.x-this._tx,d=n.y-this._ty;t||(t=new B),f=t._set((g*a-d*s)/l,(d*i-g*r)/l,e)}return f},decompose:function(){var n=this._a,t=this._b,e=this._c,i=this._d,r=n*i-t*e,s=Math.sqrt,a=Math.atan2,o=180/Math.PI,h,l,f;if(n!==0||t!==0){var g=s(n*n+t*t);h=Math.acos(n/g)*(t>0?1:-1),l=[g,r/g],f=[a(n*e+t*i,g*g),0]}else if(e!==0||i!==0){var d=s(e*e+i*i);h=Math.asin(e/d)*(i>0?1:-1),l=[r/d,d],f=[0,a(n*e+t*i,d*d)]}else h=0,f=l=[0,0];return{translation:this.getTranslation(),rotation:h*o,scaling:new B(l),skewing:new B(f[0]*o,f[1]*o)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new B(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(n){this.isIdentity()||n.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},L.each(["a","b","c","d","tx","ty"],function(n){var t=L.capitalize(n),e="_"+n;this["get"+t]=function(){return this[e]},this["set"+t]=function(i){this[e]=i,this._changed()}},{})),qt=L.extend({_class:"Line",initialize:function(t,e,i,r,s){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=r,a=s):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=i),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new B(this._px,this._py)},getVector:function(){return new B(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(n,t){return qt.intersect(this._px,this._py,this._vx,this._vy,n._px,n._py,n._vx,n._vy,!0,t)},getSide:function(n,t){return qt.getSide(this._px,this._py,this._vx,this._vy,n.x,n.y,!0,t)},getDistance:function(n){return Math.abs(this.getSignedDistance(n))},getSignedDistance:function(n){return qt.getSignedDistance(this._px,this._py,this._vx,this._vy,n.x,n.y,!0)},isCollinear:function(n){return B.isCollinear(this._vx,this._vy,n._vx,n._vy)},isOrthogonal:function(n){return B.isOrthogonal(this._vx,this._vy,n._vx,n._vy)},statics:{intersect:function(n,t,e,i,r,s,a,o,h,l){h||(e-=n,i-=t,a-=r,o-=s);var f=e*o-i*a;if(!mt.isMachineZero(f)){var g=n-r,d=t-s,c=(a*d-o*g)/f,v=(e*d-i*g)/f,S=1e-12,b=-S,x=1+S;if(l||b<c&&c<x&&b<v&&v<x)return l||(c=c<=0?0:c>=1?1:c),new B(n+c*e,t+c*i)}},getSide:function(n,t,e,i,r,s,a,o){a||(e-=n,i-=t);var h=r-n,l=s-t,f=h*i-l*e;return!o&&mt.isMachineZero(f)&&(f=(h*e+h*e)/(e*e+i*i),f>=0&&f<=1&&(f=0)),f<0?-1:f>0?1:0},getSignedDistance:function(n,t,e,i,r,s,a){return a||(e-=n,i-=t),e===0?i>0?r-n:n-r:i===0?e<0?s-t:t-s:((r-n)*i-(s-t)*e)/(i>e?i*Math.sqrt(1+e*e/(i*i)):e*Math.sqrt(1+i*i/(e*e)))},getDistance:function(n,t,e,i,r,s,a){return Math.abs(qt.getSignedDistance(n,t,e,i,r,s,a))}}}),Lt=be.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){be.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Ge(null,null,this),this._view=Tt.create(this,t||ae.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(n,t){return L.serialize(this._children,n,!0,t)},_changed:function(n,t){if(n&1){var e=this._view;e&&(e._needsUpdate=!0,!e._requested&&e._autoUpdate&&e.requestUpdate())}var i=this._changes;if(i&&t){var r=this._changesById,s=t._id,a=r[s];a?a.flags|=n:i.push(r[s]={item:t,flags:n})}},clear:function(){for(var n=this._children,t=n.length-1;t>=0;t--)n[t].remove()},isEmpty:function(){return!this._children.length},remove:function n(){return n.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(n){this._currentStyle.set(n)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ee({project:this,insert:!0})},getSymbolDefinitions:function(){var n=[],t={};return this.getItems({class:Be,match:function(e){var i=e._definition,r=i._id;return t[r]||(t[r]=!0,n.push(i)),!1}}),n},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var n=this._selectionItems,t=[];for(var e in n){var i=n[e],r=i._selection;r&1&&i.isInserted()?t.push(i):r||this._updateSelection(i)}return t},_updateSelection:function(n){var t=n._id,e=this._selectionItems;n._selection?e[t]!==n&&(this._selectionCount++,e[t]=n):e[t]===n&&(this._selectionCount--,delete e[t])},selectAll:function(){for(var n=this._children,t=0,e=n.length;t<e;t++)n[t].setFullySelected(!0)},deselectAll:function(){var n=this._selectionItems;for(var t in n)n[t].setFullySelected(!1)},addLayer:function(n){return this.insertLayer(G,n)},insertLayer:function(n,t){if(t instanceof Ee){t._remove(!1,!0),L.splice(this._children,[t],n,0),t._setProject(this,!0);var e=t._name;e&&t.setName(e),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(n,t,e){return t=this.insertLayer(n,t)||(this._activeLayer||this._insertItem(G,new Ee(z.NO_INSERT),!0)).insertChild(n,t),e&&t.activate&&t.activate(),t},getItems:function(n){return z._getItems(this,n)},getItem:function(n){return z._getItems(this,n,null,null,!0)[0]||null},importJSON:function(n){this.activate();var t=this._activeLayer;return L.importJSON(n,t&&t.isEmpty()&&t)},removeOn:function(n){var t=this._removeSets;if(t){n==="mouseup"&&(t.mousedrag=null);var e=t[n];if(e){for(var i in e){var r=e[i];for(var s in t){var a=t[s];a&&a!=e&&delete a[r._id]}r.remove()}t[n]=null}}},draw:function(n,t,e){this._updateVersion++,n.save(),t.applyToContext(n);for(var i=this._children,r=new L({offset:new B(0,0),pixelRatio:e,viewMatrix:t.isIdentity()?null:t,matrices:[new yt],updateMatrix:!0}),s=0,a=i.length;s<a;s++)i[s].draw(n,r);if(n.restore(),this._selectionCount>0){n.save(),n.strokeWidth=1;var o=this._selectionItems,h=this._scope.settings.handleSize,l=this._updateVersion;for(var f in o)o[f]._drawSelection(n,t,h,o,l);n.restore()}}}),z=L.extend(re,{statics:{extend:function n(t){return t._serializeFields&&(t._serializeFields=L.set({},this.prototype._serializeFields,t._serializeFields)),n.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new yt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var n=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return L.each(n,function(t){this._events[t]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:n}})},{initialize:function(){},_initialize:function(n,t){var e=n&&L.isPlainObject(n),i=e&&n.internal===!0,r=this._matrix=new yt,s=e&&n.project||Bt.project,a=Bt.settings;return this._id=i?null:Ae.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&a.applyMatrix,t&&r.translate(t),r._owner=this,this._style=new Ge(s._currentStyle,this,s),i||e&&n.insert==!1||!a.insertItems&&!(e&&n.insert==!0)?this._setProject(s):(e&&n.parent||s)._insertItem(G,this,!0),e&&n!==z.NO_INSERT&&n!==z.INSERT&&this.set(n,{internal:!0,insert:!0,project:!0,parent:!0}),e},_serialize:function(n,t){var e={},i=this;function r(s){for(var a in s){var o=i[a];L.equals(o,a==="leading"?s.fontSize*1.2:s[a])||(e[a]=L.serialize(o,n,a!=="data",t))}}return r(this._serializeFields),this instanceof Kt||r(this._style._defaults),[this._class,e]},_changed:function(n){var t=this._symbol,e=this._parent||t,i=this._project;n&8&&(this._bounds=this._position=this._decomposed=G),n&16&&(this._globalMatrix=G),e&&n&72&&z._clearBoundsCache(e),n&2&&z._clearBoundsCache(this),i&&i._changed(n,this),t&&t._changed(n)},getId:function(){return this._id},getName:function(){return this._name},setName:function(n){if(this._name&&this._removeNamed(),n===+n+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(n&&t){var e=t._children,i=t._namedChildren;(i[n]=i[n]||[]).push(this),n in e||(e[n]=this)}this._name=n||G,this._changed(256)},getStyle:function(){return this._style},setStyle:function(n){this.getStyle().set(n)}},L.each(["locked","visible","blendMode","opacity","guide"],function(n){var t=L.capitalize(n),e="_"+n,i={locked:256,visible:265};this["get"+t]=function(){return this[e]},this["set"+t]=function(r){r!=this[e]&&(this[e]=r,this._changed(i[n]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(n){if(n!==this._selection){this._selection=n;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(n,t){var e=this._selection;this.setSelection(t?e|n:e&~n)},isSelected:function(){if(this._selectChildren){for(var n=this._children,t=0,e=n.length;t<e;t++)if(n[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(n){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setSelected(n);this._changeSelection(1,n)},isFullySelected:function(){var n=this._children,t=!!(this._selection&1);if(n&&t){for(var e=0,i=n.length;e<i;e++)if(!n[e].isFullySelected())return!1;return!0}return t},setFullySelected:function(n){var t=this._children;if(t)for(var e=0,i=t.length;e<i;e++)t[e].setFullySelected(n);this._changeSelection(1,n)},isClipMask:function(){return this._clipMask},setClipMask:function(n){this._clipMask!=(n=!!n)&&(this._clipMask=n,n&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(n){this._data=n},getPosition:function(n){var t=n?B:se,e=this._position||(this._position=this._getPositionFromBounds());return new t(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(B.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(n){return this._pivot?this._matrix._transformPoint(this._pivot):(n||this.getBounds()).getCenter(!0)},getPivot:function(){var n=this._pivot;return n?new se(n.x,n.y,this,"setPivot"):null},setPivot:function(){this._pivot=B.read(arguments,0,{clone:!0,readNull:!0}),this._position=G}},L.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(n,t){this[t]=function(e){return this.getBounds(e,n)}},{beans:!0,getBounds:function(n,t){var e=t||n instanceof yt,i=L.set({},e?t:n,this._boundsOptions);(!i.stroke||this.getStrokeScaling())&&(i.cacheItem=this);var r=this._getCachedBounds(e&&n,i).rect;return arguments.length?r:new Se(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var n=at.read(arguments),t=this.getBounds(),e=this._matrix,i=new yt,r=n.getCenter();i.translate(r),(n.width!=t.width||n.height!=t.height)&&(e.isInvertible()||(e.set(e._backup||new yt().translate(e.getTranslation())),t=this.getBounds()),i.scale(t.width!==0?n.width/t.width:0,t.height!==0?n.height/t.height:0)),r=t.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(n,t){var e=this._children;return!e||!e.length?new at:(z._updateBoundsCache(this,t.cacheItem),z._getBounds(e,n,t))},_getBoundsCacheKey:function(n,t){return[n.stroke?1:0,n.handle?1:0,t?1:0].join("")},_getCachedBounds:function(n,t,e){n=n&&n._orNullIfIdentity();var i=t.internal&&!e,r=t.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),a=r&&(!n||n.equals(s))&&this._getBoundsCacheKey(t,i),o=this._bounds;if(z._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o){var h=o[a];return{rect:h.rect.clone(),nonscaling:h.nonscaling}}var l=this._getBounds(n||s,t),f=l.rect||l,g=this._style,d=l.nonscaling||g.hasStroke()&&!g.getStrokeScaling();if(a){o||(this._bounds=o={});var h=o[a]={rect:f.clone(),nonscaling:d,internal:i}}return{rect:f,nonscaling:d}},_getStrokeMatrix:function(n,t){var e=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=e?e.getViewMatrix().invert():n;return i&&i._shiftless()},statics:{_updateBoundsCache:function(n,t){if(n&&t){var e=t._id,i=n._boundsCache=n._boundsCache||{ids:{},list:[]};i.ids[e]||(i.list.push(t),i.ids[e]=t)}},_clearBoundsCache:function(n){var t=n._boundsCache;if(t){n._bounds=n._position=n._boundsCache=G;for(var e=0,i=t.list,r=i.length;e<r;e++){var s=i[e];s!==n&&(s._bounds=s._position=G,s._boundsCache&&z._clearBoundsCache(s))}}},_getBounds:function(n,t,e){var i=1/0,r=-i,s=i,a=r,o=!1;e=e||{};for(var h=0,l=n.length;h<l;h++){var f=n[h];if(f._visible&&!f.isEmpty(!0)){var g=f._getCachedBounds(t&&t.appended(f._matrix),e,!0),d=g.rect;i=Math.min(d.x,i),s=Math.min(d.y,s),r=Math.max(d.x+d.width,r),a=Math.max(d.y+d.height,a),g.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new at(i,s,r-i,a-s):new at,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var n=this._decompose();return n?n.rotation:0},setRotation:function(n){var t=this.getRotation();if(t!=null&&n!=null){var e=this._decomposed;this.rotate(n-t),e&&(e.rotation=n,this._decomposed=e)}},getScaling:function(){var n=this._decompose(),t=n&&n.scaling;return new se(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var n=this.getScaling(),t=B.read(arguments,0,{clone:!0,readNull:!0});if(n&&t&&!n.equals(t)){var e=this.getRotation(),i=this._decomposed,r=new yt,s=mt.isZero;if(s(n.x)||s(n.y))r.translate(i.translation),e&&r.rotate(e),r.scale(t.x,t.y),this._matrix.set(r);else{var a=this.getPosition(!0);r.translate(a),e&&r.rotate(e),r.scale(t.x/n.x,t.y/n.y),e&&r.rotate(-e),r.translate(a.negate()),this.transform(r)}i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var n=this._matrix;n.set.apply(n,arguments)},getGlobalMatrix:function(n){var t=this._globalMatrix;if(t)for(var e=this._parent,i=[];e;){if(!e._globalMatrix){t=null;for(var r=0,s=i.length;r<s;r++)i[r]._globalMatrix=null;break}i.push(e),e=e._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var e=this._parent;e&&t.prepend(e.getGlobalMatrix(!0))}return n?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(n){(this._applyMatrix=this._canApplyMatrix&&!!n)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(n,t){if(this._project!==n){this._project&&this._installEvents(!1),this._project=n;for(var e=this._children,i=0,r=e&&e.length;i<r;i++)e[i]._setProject(n);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function n(t){n.base.call(this,t);for(var e=this._children,i=0,r=e&&e.length;i<r;i++)e[i]._installEvents(t)},getLayer:function(){for(var n=this;n=n._parent;)if(n instanceof Ee)return n;return null},getParent:function(){return this._parent},setParent:function(n){return n.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(n){this.removeChildren(),this.addChildren(n)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var n=this._getOwner();return n&&n._children[this._index+1]||null},getPreviousSibling:function(){var n=this._getOwner();return n&&n._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(n){var t=this._parent,e=t&&t._children;e&&t.insertChildren(n in e?n:G,[this])},equals:function(n){return n===this||n&&this._class===n._class&&this._style.equals(n._style)&&this._matrix.equals(n._matrix)&&this._locked===n._locked&&this._visible===n._visible&&this._blendMode===n._blendMode&&this._opacity===n._opacity&&this._clipMask===n._clipMask&&this._guide===n._guide&&this._equals(n)||!1},_equals:function(n){return L.equals(this._children,n._children)},clone:function(n){var t=new this.constructor(z.NO_INSERT),e=this._children,i=L.pick(n?n.insert:G,n===G||n===!0),r=L.pick(n?n.deep:G,!0);e&&t.copyAttributes(this),(!e||r)&&t.copyContent(this),e||t.copyAttributes(this),i&&t.insertAbove(this);var s=this._name,a=this._parent;if(s&&a){for(var e=a._children,o=s,h=1;e[s];)s=o+" "+h++;s!==o&&t.setName(s)}return t},copyContent:function(n){for(var t=n._children,e=0,i=t&&t.length;e<i;e++)this.addChild(t[e].clone(!1),!0)},copyAttributes:function(n,t){this.setStyle(n._style);for(var e=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=e.length;i<r;i++){var s=e[i];n.hasOwnProperty(s)&&(this[s]=n[s])}t||this._matrix.set(n._matrix,!0),this.setApplyMatrix(n._applyMatrix),this.setPivot(n._pivot),this.setSelection(n._selection);var a=n._data,o=n._name;this._data=a?L.clone(a):null,o&&this.setName(o)},rasterize:function(n,t){var e,i,r;L.isPlainObject(n)?(e=n.resolution,i=n.insert,r=n.raster):(e=n,i=t),r||(r=new Oe(z.NO_INSERT));var s=this.getStrokeBounds(),a=(e||this.getView().getResolution())/72,o=s.getTopLeft().floor(),h=s.getBottomRight().ceil(),l=new rt(h.subtract(o)),f=l.multiply(a);if(r.setSize(f,!0),!f.isZero()){var g=r.getContext(!0),d=new yt().scale(a).translate(o.negate());g.save(),d.applyToContext(g),this.draw(g,new L({matrices:[d]})),g.restore()}return r._matrix.set(new yt().translate(o.add(l.divide(2))).scale(1/a)),(i===G||i)&&r.insertAbove(this),r},contains:function(){var n=this._matrix;return n.isInvertible()&&!!this._contains(n._inverseTransform(B.read(arguments)))},_contains:function(n){var t=this._children;if(t){for(var e=t.length-1;e>=0;e--)if(t[e].contains(n))return!0;return!1}return n.isInside(this.getInternalBounds())},isInside:function(){return at.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new vt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(n,t){return n instanceof z?this._asPathItem().getIntersections(n._asPathItem(),null,t,!0).length>0:!1}},new function(){function n(){var i=arguments;return this._hitTest(B.read(i),ce.getOptions(i))}function t(){var i=arguments,r=B.read(i),s=ce.getOptions(i),a=[];return this._hitTest(r,new L({all:a},s)),a}function e(i,r,s,a){var o=this._children;if(o)for(var h=o.length-1;h>=0;h--){var l=o[h],f=l!==a&&l._hitTest(i,r,s);if(f&&!r.all)return f}return null}return Lt.inject({hitTest:n,hitTestAll:t,_hitTest:e}),{hitTest:n,hitTestAll:t,_hitTestChildren:e}},{_hitTest:function(n,t,e){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var i=this._matrix,r=e?e.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(t.tolerance,1e-12),a=t._tolerancePadding=new rt(vt._getStrokePadding(s,i._shiftless().invert()));if(n=i._inverseTransform(n),!n||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(a.multiply(2))._containsPoint(n))return null;var o=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==L.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,l=this,f,g;function d(_){return _&&h&&!h(_)&&(_=null),_&&t.all&&t.all.push(_),_}function c(_,p){var y=p?f["get"+p]():l.getPosition();if(n.subtract(y).divide(a).length<=1)return new ce(_,l,{name:p?L.hyphenate(p):_,point:y})}var v=t.position,S=t.center,b=t.bounds;if(o&&this._parent&&(v||S||b)){if((S||b)&&(f=this.getInternalBounds()),g=v&&c("position")||S&&c("center","Center"),!g&&b)for(var x=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],m=0;m<8&&!g;m++)g=c("bounds",x[m]);g=d(g)}return g||(g=this._hitTestChildren(n,t,r)||o&&d(this._hitTestSelf(n,t,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),g&&g.point&&(g.point=i.transform(g.point)),g},_hitTestSelf:function(n,t){if(t.fill&&this.hasFill()&&this._contains(n))return new ce("fill",this)},matches:function(n,t){function e(a,o){for(var h in a)if(a.hasOwnProperty(h)){var l=a[h],f=o[h];if(L.isPlainObject(l)&&L.isPlainObject(f)){if(!e(l,f))return!1}else if(!L.equals(l,f))return!1}return!0}var i=typeof n;if(i==="object"){for(var r in n)if(n.hasOwnProperty(r)&&!this.matches(r,n[r]))return!1;return!0}else{if(i==="function")return n(this);if(n==="match")return t(this);var s=/^(empty|editable)$/.test(n)?this["is"+L.capitalize(n)]():n==="type"?L.hyphenate(this._class):this[n];if(n==="class"){if(typeof t=="function")return this instanceof t;s=this._class}if(typeof t=="function")return!!t(s);if(t){if(t.test)return t.test(s);if(L.isPlainObject(t))return e(t,s)}return L.equals(s,t)}},getItems:function(n){return z._getItems(this,n,this._matrix)},getItem:function(n){return z._getItems(this,n,this._matrix,null,!0)[0]||null},statics:{_getItems:function n(t,e,i,r,s){if(!r){var a=typeof e=="object"&&e,o=a&&a.overlapping,h=a&&a.inside,l=o||h,d=l&&at.read([l]);r={items:[],recursive:a&&a.recursive!==!1,inside:!!h,overlapping:!!o,rect:d,path:o&&new vt.Rectangle({rectangle:d,insert:!1})},a&&(e=L.filter({},e,{recursive:!0,inside:!0,overlapping:!0}))}var f=t._children,g=r.items,d=r.rect;i=d&&(i||new yt);for(var c=0,v=f&&f.length;c<v;c++){var S=f[c],b=i&&i.appended(S._matrix),x=!0;if(d){var l=S.getBounds(b);if(!d.intersects(l))continue;d.contains(l)||r.overlapping&&(l.contains(d)||r.path.intersects(S,b))||(x=!1)}if(x&&S.matches(e)&&(g.push(S),s)||(r.recursive!==!1&&n(S,e,b,r,s),s&&g.length>0))break}return g}}},{importJSON:function(n){var t=L.importJSON(n,this);return t!==this?this.addChild(t):t},addChild:function(n){return this.insertChild(G,n)},insertChild:function(n,t){var e=t?this.insertChildren(n,[t]):null;return e&&e[0]},addChildren:function(n){return this.insertChildren(this._children.length,n)},insertChildren:function(n,t){var e=this._children;if(e&&t&&t.length>0){t=L.slice(t);for(var i={},r=t.length-1;r>=0;r--){var s=t[r],a=s&&s._id;!s||i[a]?t.splice(r,1):(s._remove(!1,!0),i[a]=!0)}L.splice(e,t,n,0);for(var o=this._project,h=o._changes,r=0,l=t.length;r<l;r++){var s=t[r],f=s._name;s._parent=this,s._setProject(o,!0),f&&s.setName(f),h&&s._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(n,t){var e=n&&n._getOwner(),i=n!==this&&e?this:null;return i&&(i._remove(!1,!0),e._insertItem(n._index+t,i)),i},insertAbove:function(n){return this._insertAt(n,1)},insertBelow:function(n){return this._insertAt(n,0)},sendToBack:function(){var n=this._getOwner();return n?n._insertItem(0,this):null},bringToFront:function(){var n=this._getOwner();return n?n._insertItem(G,this):null},appendTop:"#addChild",appendBottom:function(n){return this.insertChild(0,n)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(n){return n._insertItem(G,this)},copyTo:function(n){return this.clone(!1).addTo(n)},reduce:function(n){var t=this._children;if(t&&t.length===1){var e=t[0].reduce(n);return this._parent?(e.insertAbove(this),this.remove()):e.remove(),e}return this},_removeNamed:function(){var n=this._getOwner();if(n){var t=n._children,e=n._namedChildren,i=this._name,r=e[i],s=r?r.indexOf(this):-1;s!==-1&&(t[i]==this&&delete t[i],r.splice(s,1),r.length?t[i]=r[0]:delete e[i])}},_remove:function(n,t){var e=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),e?(this._name&&this._removeNamed(),r!=null&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),L.splice(e._children,null,r,1)),this._installEvents(!1),n&&i._changes&&this._changed(5),t&&e._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(n){var t=n&&n.insertBelow(this);return t&&this.remove(),t},removeChildren:function(n,t){if(!this._children)return null;n=n||0,t=L.pick(t,this._children.length);for(var e=L.splice(this._children,null,n,t-n),i=e.length-1;i>=0;i--)e[i]._remove(!0,!1);return e.length>0&&this._changed(11),e},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var n=0,t=this._children.length;n<t;n++)this._children[n]._index=n;this._changed(11)}},isEmpty:function(n){var t=this._children,e=t?t.length:0;if(n){for(var i=0;i<e;i++)if(!t[i].isEmpty(n))return!1;return!0}return!e},isEditable:function(){for(var n=this;n;){if(!n._visible||n._locked)return!1;n=n._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(n){function t(a){var o=[];do o.unshift(a);while(a=a._parent);return o}for(var e=t(this),i=t(n),r=0,s=Math.min(e.length,i.length);r<s;r++)if(e[r]!=i[r])return e[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(n){return this._getOrder(n)===-1},isBelow:function(n){return this._getOrder(n)===1},isParent:function(n){return this._parent===n},isChild:function(n){return n&&n._parent===this},isDescendant:function(n){for(var t=this;t=t._parent;)if(t===n)return!0;return!1},isAncestor:function(n){return n?n.isDescendant(this):!1},isSibling:function(n){return this._parent===n._parent},isGroupedWith:function(n){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&n.isDescendant(t))return!0;t=t._parent}return!1}},L.each(["rotate","scale","shear","skew"],function(n){var t=n==="rotate";this[n]=function(){var e=arguments,i=(t?L:B).read(e),r=B.read(e,0,{readNull:!0});return this.transform(new yt()[n](i,r||this.getPosition(!0)))}},{translate:function(){var n=new yt;return this.transform(n.translate.apply(n,arguments))},transform:function(n,t,e){var i=this._matrix,r=n&&!n.isIdentity(),s=e&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||t&&this._children);if(!r&&!s)return this;if(r){!n.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(n,!0);var a=this._style,o=a.getFillColor(!0),h=a.getStrokeColor(!0);o&&o.transform(n),h&&h.transform(n)}if(s&&(s=this._transformContent(i,t,e))){var l=this._pivot;l&&i._transformPoint(l,l,!0),i.reset(!0),e&&this._canApplyMatrix&&(this._applyMatrix=!0)}var f=this._bounds,g=this._position;(r||s)&&this._changed(25);var d=r&&f&&n.decompose();if(d&&d.skewing.isZero()&&d.rotation%90===0){for(var c in f){var v=f[c];if(v.nonscaling)delete f[c];else if(s||!v.internal){var S=v.rect;n._transformBounds(S,S)}}this._bounds=f;var b=f[this._getBoundsCacheKey(this._boundsOptions||{})];b&&(this._position=this._getPositionFromBounds(b.rect))}else r&&g&&this._pivot&&(this._position=n._transformPoint(g,g));return this},_transformContent:function(n,t,e){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(n,t,e);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(B.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(B.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(B.read(arguments))},localToParent:function(){return this._matrix._transformPoint(B.read(arguments))},fitBounds:function(n,t){n=at.read(arguments);var e=this.getBounds(),i=e.height/e.width,r=n.height/n.width,s=(t?i>r:i<r)?n.width/e.width:n.height/e.height,a=new at(new B,new rt(e.width*s,e.height*s));a.setCenter(n.getCenter()),this.setBounds(a)}}),{_setStyles:function(n,t,e){var i=this._style,r=this._matrix;if(i.hasFill()&&(n.fillStyle=i.getFillColor().toCanvasStyle(n,r)),i.hasStroke()){n.strokeStyle=i.getStrokeColor().toCanvasStyle(n,r),n.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),a=i.getStrokeCap(),o=i.getMiterLimit();if(s&&(n.lineJoin=s),a&&(n.lineCap=a),o&&(n.miterLimit=o),Bt.support.nativeDash){var h=i.getDashArray(),l=i.getDashOffset();h&&h.length&&("setLineDash"in n?(n.setLineDash(h),n.lineDashOffset=l):(n.mozDash=h,n.mozDashOffset=l))}}if(i.hasShadow()){var f=t.pixelRatio||1,g=e._shiftless().prepend(new yt().scale(f,f)),d=g.transform(new B(i.getShadowBlur(),0)),c=g.transform(this.getShadowOffset());n.shadowColor=i.getShadowColor().toCanvasStyle(n),n.shadowBlur=d.getLength(),n.shadowOffsetX=c.x,n.shadowOffsetY=c.y}},draw:function(n,t,e){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var i=t.matrices,r=t.viewMatrix,s=this._matrix,a=i[i.length-1].appended(s);if(a.isInvertible()){r=r?r.appended(a):a,i.push(a),t.updateMatrix&&(this._globalMatrix=a);var o=this._blendMode,h=mt.clamp(this._opacity,0,1),l=o==="normal",f=ue.nativeModes[o],g=l&&h===1||t.dontStart||t.clip||(f||l&&h<1)&&this._canComposite(),d=t.pixelRatio||1,c,v,S;if(!g){var b=this.getStrokeBounds(r);if(!b.width||!b.height){i.pop();return}S=t.offset,v=t.offset=b.getTopLeft().floor(),c=n,n=ae.getContext(b.getSize().ceil().add(1).multiply(d)),d!==1&&n.scale(d,d)}n.save();var x=e?e.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,m=!g&&t.clipItem,_=!x||m;if(g?(n.globalAlpha=h,f&&(n.globalCompositeOperation=o)):_&&n.translate(-v.x,-v.y),_&&(g?s:r).applyToContext(n),m&&t.clipItem.draw(n,t.extend({clip:!0})),x){n.setTransform(d,0,0,d,0,0);var p=t.offset;p&&n.translate(-p.x,-p.y)}this._draw(n,t,r,x),n.restore(),i.pop(),t.clip&&!t.dontFinish&&n.clip(this.getFillRule()),g||(ue.process(o,n,c,h,v.subtract(S).multiply(d)),ae.release(n),t.offset=S)}}},_isUpdated:function(n){var t=this._parent;if(t instanceof ie)return t._isUpdated(n);var e=this._updateVersion===n;return!e&&t&&t._visible&&t._isUpdated(n)&&(this._updateVersion=n,e=!0),e},_drawSelection:function(n,t,e,i,r){var s=this._selection,a=s&1,o=s&2||a&&this._selectBounds,h=s&4;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(r)){var l,f=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),g=t.appended(this.getGlobalMatrix(!0)),d=e/2;if(n.strokeStyle=n.fillStyle=f?f.toCanvasStyle(n):"#009dec",a&&this._drawSelected(n,g,i),h){var c=this.getPosition(!0),v=this._parent,S=v?v.localToGlobal(c):c,b=S.x,x=S.y;n.beginPath(),n.arc(b,x,d,0,Math.PI*2,!0),n.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],_=d,p=e+1,y=0;y<4;y++){var C=m[y],P=C[0],I=C[1];n.moveTo(b+P*_,x+I*_),n.lineTo(b+P*p,x+I*p),n.stroke()}}if(o){var k=g._transformCorners(this.getInternalBounds());n.beginPath();for(var y=0;y<8;y++)n[y?"lineTo":"moveTo"](k[y],k[++y]);n.closePath(),n.stroke();for(var y=0;y<8;y++)n.fillRect(k[y]-d,k[++y]-d,e,e)}}},_canComposite:function(){return!1}},L.each(["down","drag","up","move"],function(n){this["removeOn"+L.capitalize(n)]=function(){var t={};return t[n]=!0,this.removeOn(t)}},{removeOn:function(n){for(var t in n)if(n[t]){var e="mouse"+t,i=this._project,r=i._removeSets=i._removeSets||{};r[e]=r[e]||{},r[e][this._id]=this}return this}}),{tween:function(n,t,e){e||(e=t,t=n,n=null,e||(e=t,t=null));var i=e&&e.easing,r=e&&e.start,s=e!=null&&(typeof e=="number"?e:e.duration),a=new ui(this,n,t,s,i,r);function o(h){a._handleFrame(h.time*1e3),a.running||this.off("frame",o)}return s&&this.on("frame",o),a},tweenTo:function(n,t){return this.tween(null,n,t)},tweenFrom:function(n,t){return this.tween(n,null,t)}}),Kt=z.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function n(t){n.base.call(this,t),t&2050&&(this._clipItem=G)},_getClipItem:function(){var n=this._clipItem;if(n===G){n=null;for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e]._clipMask){n=t[e];break}this._clipItem=n}return n},isClipped:function(){return!!this._getClipItem()},setClipped:function(n){var t=this.getFirstChild();t&&t.setClipMask(n)},_getBounds:function n(t,e){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(t),L.set({},e,{stroke:!1})):n.base.call(this,t,e)},_hitTestChildren:function n(t,e,i){var r=this._getClipItem();return(!r||r.contains(t))&&n.base.call(this,t,e,i,r)},_draw:function(n,t){var e=t.clip,i=!e&&this._getClipItem();t=t.extend({clipItem:i,clip:!1}),e?(n.beginPath(),t.dontStart=t.dontFinish=!0):i&&i.draw(n,t.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s];o!==i&&o.draw(n,t)}}}),Ee=Kt.extend({_class:"Layer",initialize:function(){Kt.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function n(){return this._parent?n.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ut=z.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(n){return this._type===n._type&&this._size.equals(n._size)&&L.equals(this._radius,n._radius)},copyContent:function(n){this.setType(n._type),this.setSize(n._size),this.setRadius(n._radius)},getType:function(){return this._type},setType:function(n){this._type=n},getShape:"#getType",setShape:"#setType",getSize:function(){var n=this._size;return new Ot(n.width,n.height,this,"setSize")},setSize:function(){var n=rt.read(arguments);if(!this._size)this._size=n.clone();else if(!this._size.equals(n)){var t=this._type,e=n.width,i=n.height;t==="rectangle"?this._radius.set(rt.min(this._radius,n.divide(2).abs())):t==="circle"?(e=i=(e+i)/2,this._radius=e/2):t==="ellipse"&&this._radius._set(e/2,i/2),this._size._set(e,i),this._changed(9)}},getRadius:function(){var n=this._radius;return this._type==="circle"?n:new Ot(n.width,n.height,this,"setRadius")},setRadius:function(n){var t=this._type;if(t==="circle"){if(n===this._radius)return;var e=n*2;this._radius=n,this._size._set(e,e)}else if(n=rt.read(arguments),!this._radius)this._radius=n.clone();else{if(this._radius.equals(n))return;if(this._radius.set(n),t==="rectangle"){var e=rt.max(this._size,n.multiply(2));this._size.set(e)}else t==="ellipse"&&this._size._set(n.width*2,n.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(n){var t=new vt[L.capitalize(this._type)]({center:new B,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Bt.settings.applyMatrix&&t.setApplyMatrix(!0),(n===G||n)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(n,t,e,i){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=t.dontFinish||t.clip,h=!i;if(s||a||o){var l=this._type,f=this._radius,g=l==="circle";if(t.dontStart||n.beginPath(),h&&g)n.arc(0,0,f,0,Math.PI*2,!0);else{var d=g?f:f.width,c=g?f:f.height,v=this._size,S=v.width,b=v.height;if(h&&l==="rectangle"&&d===0&&c===0)n.rect(-S/2,-b/2,S,b);else{var x=S/2,m=b/2,_=1-.5522847498307936,p=d*_,y=c*_,C=[-x,-m+c,-x,-m+y,-x+p,-m,-x+d,-m,x-d,-m,x-p,-m,x,-m+y,x,-m+c,x,m-c,x,m-y,x-p,m,x-d,m,-x+d,m,-x+p,m,-x,m-y,-x,m-c];i&&i.transform(C,C,32),n.moveTo(C[0],C[1]),n.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]),x!==d&&n.lineTo(C[8],C[9]),n.bezierCurveTo(C[10],C[11],C[12],C[13],C[14],C[15]),m!==c&&n.lineTo(C[16],C[17]),n.bezierCurveTo(C[18],C[19],C[20],C[21],C[22],C[23]),x!==d&&n.lineTo(C[24],C[25]),n.bezierCurveTo(C[26],C[27],C[28],C[29],C[30],C[31])}}n.closePath()}!o&&(s||a)&&(this._setStyles(n,t,e),s&&(n.fill(r.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),a&&n.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(n,t){var e=new at(this._size).setCenter(0,0),i=this._style,r=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return n&&(e=n._transformBounds(e)),r?e.expand(vt._getStrokePadding(r,this._getStrokeMatrix(n,t))):e}},new function(){function n(e,i,r){var s=e._radius;if(!s.isZero())for(var a=e._size.divide(2),o=1;o<=4;o++){var h=new B(o>1&&o<4?-1:1,o>2?-1:1),l=h.multiply(a),f=l.subtract(h.multiply(s)),g=new at(r?l.add(h.multiply(r)):l,f);if(g.contains(i))return{point:f,quadrant:o}}}function t(e,i,r,s){var a=e.divide(i);return(!s||a.isInQuadrant(s))&&a.subtract(a.normalize()).multiply(i).divide(r).length<=1}return{_contains:function e(i){if(this._type==="rectangle"){var r=n(this,i);return r?i.subtract(r.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}else return i.divide(this.size).getLength()<=.5},_hitTestSelf:function e(i,r,s,a){var o=!1,h=this._style,l=r.stroke&&h.hasStroke(),f=r.fill&&h.hasFill();if(l||f){var g=this._type,d=this._radius,c=l?h.getStrokeWidth()/2:0,v=r._tolerancePadding.add(vt._getStrokePadding(c,!h.getStrokeScaling()&&a));if(g==="rectangle"){var S=v.multiply(2),b=n(this,i,S);if(b)o=t(i.subtract(b.point),d,v,b.quadrant);else{var x=new at(this._size).setCenter(0,0),m=x.expand(S),_=x.expand(S.negate());o=m._containsPoint(i)&&!_._containsPoint(i)}}else o=t(i,d,v)}return o?new ce(l?"stroke":"fill",this):e.base.apply(this,arguments)}}},{statics:new function(){function n(t,e,i,r,s){var a=L.create(Ut.prototype);return a._type=t,a._size=i,a._radius=r,a._initialize(L.getNamed(s),e),a}return{Circle:function(){var t=arguments,e=B.readNamed(t,"center"),i=L.readNamed(t,"radius");return n("circle",e,new rt(i*2),i,t)},Rectangle:function(){var t=arguments,e=at.readNamed(t,"rectangle"),i=rt.min(rt.readNamed(t,"radius"),e.getSize(!0).divide(2));return n("rectangle",e.getCenter(!0),e.getSize(!0),i,t)},Ellipse:function(){var t=arguments,e=Ut._readEllipse(t),i=e.radius;return n("ellipse",e.center,i.multiply(2),i,t)},_readEllipse:function(t){var e,i;if(L.hasNamed(t,"radius"))e=B.readNamed(t,"center"),i=rt.readNamed(t,"radius");else{var r=at.readNamed(t,"rectangle");e=r.getCenter(!0),i=r.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),Oe=z.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==G&&B.read(arguments))){var i,r=typeof t,s=r==="string"?bt.getElementById(t):r==="object"?t:null;if(s&&s!==z.NO_INSERT){if(s.getContext||s.naturalHeight!=null)i=s;else if(s){var a=rt.read(arguments);a.isZero()||(i=ae.getCanvas(a))}}i?this.setImage(i):this.setSource(t)}this._size||(this._size=new rt,this._loaded=!1)},_equals:function(n){return this.getSource()===n.getSource()},copyContent:function(n){var t=n._image,e=n._canvas;if(t)this._setImage(t);else if(e){var i=ae.getCanvas(n._size);i.getContext("2d").drawImage(e,0,0),this._setImage(i)}this._crossOrigin=n._crossOrigin},getSize:function(){var n=this._size;return new Ot(n?n.width:0,n?n.height:0,this,"setSize")},setSize:function(n,t){var e=rt.read(arguments);if(e.equals(this._size))t&&this.clear();else if(e.width>0&&e.height>0){var i=!t&&this.getElement();this._setImage(ae.getCanvas(e)),i&&this.getContext(!0).drawImage(i,0,0,e.width,e.height)}else this._canvas&&ae.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(n){this.setSize(n,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(n){this.setSize(this.getWidth(),n)},getLoaded:function(){return this._loaded},isEmpty:function(){var n=this._size;return!n||n.width===0&&n.height===0},getResolution:function(){var n=this._matrix,t=new B(0,0).transform(n),e=new B(1,0).transform(n).subtract(t),i=new B(0,1).transform(n).subtract(t);return new rt(72/e.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(n){var t=this;function e(i){var r=t.getView(),s=i&&i.type||"load";r&&t.responds(s)&&(Bt=r._scope,t.emit(s,new ze(i)))}this._setImage(n),this._loaded?setTimeout(e,0):n&&Nt.add(n,{load:function(i){t._setImage(n),e(i)},error:e})},_setImage:function(n){this._canvas&&ae.release(this._canvas),n&&n.getContext?(this._image=null,this._canvas=n,this._loaded=!0):(this._image=n,this._canvas=null,this._loaded=!!(n&&n.src&&n.complete)),this._size=new rt(n?n.naturalWidth||n.width:0,n?n.naturalHeight||n.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var n=ae.getContext(this._size);try{this._image&&n.drawImage(this._image,0,0),this._canvas=n.canvas}catch{ae.release(n)}}return this._canvas},setCanvas:"#setImage",getContext:function(n){return this._context||(this._context=this.getCanvas().getContext("2d")),n&&(this._image=null,this._changed(1025)),this._context},setContext:function(n){this._context=n},getSource:function(){var n=this._image;return n&&n.src||this.toDataURL()},setSource:function(n){var t=new pt.Image,e=this._crossOrigin;e&&(t.crossOrigin=e),n&&(t.src=n),this.setImage(t)},getCrossOrigin:function(){var n=this._image;return n&&n.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(n){this._crossOrigin=n;var t=this._image;t&&(t.crossOrigin=n)},getSmoothing:function(){return this._smoothing},setSmoothing:function(n){this._smoothing=typeof n=="string"?n:n?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var n=at.read(arguments),t=ae.getContext(n.getSize());return t.drawImage(this.getCanvas(),n.x,n.y,n.width,n.height,0,0,n.width,n.height),t.canvas},getSubRaster:function(){var n=at.read(arguments),t=new Oe(z.NO_INSERT);return t._setImage(this.getSubCanvas(n)),t.translate(n.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var n=this._image,t=n&&n.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL.apply(e,arguments):null},drawImage:function(n){var t=B.read(arguments,1);this.getContext(!0).drawImage(n,t.x,t.y)},getAverageColor:function(n){var t,e;if(n?n instanceof Ce?(e=n,t=n.getBounds()):typeof n=="object"&&("width"in n?t=new at(n):"x"in n&&(t=new at(n.x-.5,n.y-.5,1,1))):t=this.getBounds(),!t)return null;var i=32,r=Math.min(t.width,i),s=Math.min(t.height,i),a=Oe._sampleContext;a?a.clearRect(0,0,i+1,i+1):a=Oe._sampleContext=ae.getContext(new rt(i)),a.save();var o=new yt().scale(r/t.width,s/t.height).translate(-t.x,-t.y);o.applyToContext(a),e&&e.draw(a,new L({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var h=this.getElement(),l=this._size;h&&a.drawImage(h,-l.width/2,-l.height/2),a.restore();for(var f=a.getImageData(.5,.5,Math.ceil(r),Math.ceil(s)).data,g=[0,0,0],d=0,c=0,v=f.length;c<v;c+=4){var S=f[c+3];d+=S,S/=255,g[0]+=f[c]*S,g[1]+=f[c+1]*S,g[2]+=f[c+2]*S}for(var c=0;c<3;c++)g[c]/=d;return d?Rt.read(g):null},getPixel:function(){var n=B.read(arguments),t=this.getContext().getImageData(n.x,n.y,1,1).data;return new Rt("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var n=arguments,t=B.read(n),e=Rt.read(n),i=e._convert("rgb"),r=e._alpha,s=this.getContext(!0),a=s.createImageData(1,1),o=a.data;o[0]=i[0]*255,o[1]=i[1]*255,o[2]=i[2]*255,o[3]=r!=null?r*255:255,s.putImageData(a,t.x,t.y)},clear:function(){var n=this._size;this.getContext(!0).clearRect(0,0,n.width+1,n.height+1)},createImageData:function(){var n=rt.read(arguments);return this.getContext().createImageData(n.width,n.height)},getImageData:function(){var n=at.read(arguments);return n.isEmpty()&&(n=new at(this._size)),this.getContext().getImageData(n.x,n.y,n.width,n.height)},putImageData:function(n){var t=B.read(arguments,1);this.getContext(!0).putImageData(n,t.x,t.y)},setImageData:function(n){this.setSize(n),this.getContext(!0).putImageData(n,0,0)},_getBounds:function(n,t){var e=new at(this._size).setCenter(0,0);return n?n._transformBounds(e):e},_hitTestSelf:function(n){if(this._contains(n)){var t=this;return new ce("pixel",t,{offset:n.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(n,t,e){var i=this.getElement();if(i&&i.width>0&&i.height>0){n.globalAlpha=mt.clamp(this._opacity,0,1),this._setStyles(n,t,e);var r=this._smoothing,s=r==="off";kt.setPrefixed(n,s?"imageSmoothingEnabled":"imageSmoothingQuality",s?!1:r),n.drawImage(i,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),Be=z.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==G&&B.read(arguments,1))||this.setDefinition(t instanceof ee?t:new ee(t))},_equals:function(n){return this._definition===n._definition},copyContent:function(n){this.setDefinition(n._definition)},getDefinition:function(){return this._definition},setDefinition:function(n){this._definition=n,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(n,t){var e=this._definition._item;return e._getCachedBounds(e._matrix.prepended(n),t)},_hitTestSelf:function(n,t,e){var i=t.extend({all:!1}),r=this._definition._item._hitTest(n,i,e);return r&&(r.item=this),r},_draw:function(n,t){this._definition._item.draw(n,t)}}),ee=L.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=Ae.get(),this.project=Bt.project,t&&this.setItem(t,e)},_serialize:function(n,t){return t.add(this,function(){return L.serialize([this._class,this._item],n,!1,t)})},_changed:function(n){n&8&&z._clearBoundsCache(this),n&1&&this.project._changed(n)},getItem:function(){return this._item},setItem:function(n,t){n._symbol&&(n=n.clone()),this._item&&(this._item._symbol=null),this._item=n,n.remove(),n.setSelected(!1),t||n.setPosition(new B),n._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(n){return new Be(this,n)},clone:function(){return new ee(this._item.clone(!1))},equals:function(n){return n===this||n&&this._item.equals(n._item)||!1}}),ce=L.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(n){var t=n&&L.read(n);return new L({type:null,tolerance:Bt.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),ot=L.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,i,r,s,a){var o=arguments.length,h,l,f,g;o>0&&(t==null||typeof t=="object"?o===1&&t&&"point"in t?(h=t.point,l=t.handleIn,f=t.handleOut,g=t.selection):(h=t,l=e,f=i,g=r):(h=[t,e],l=i!==G?[i,r]:null,f=s!==G?[s,a]:null)),new Ue(h,this,"_point"),new Ue(l,this,"_handleIn"),new Ue(f,this,"_handleOut"),g&&this.setSelection(g)},_serialize:function(n,t){var e=this._point,i=this._selection,r=i||this.hasHandles()?[e,this._handleIn,this._handleOut]:e;return i&&r.push(i),L.serialize(r,n,!0,t)},_changed:function(n){var t=this._path;if(t){var e=t._curves,i=this._index,r;e&&((!n||n===this._point||n===this._handleIn)&&(r=i>0?e[i-1]:t._closed?e[e.length-1]:null)&&r._changed(),(!n||n===this._point||n===this._handleOut)&&(r=e[i])&&r._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(B.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(B.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(B.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var n=this._handleIn,t=this._handleOut;return!n.isZero()&&!t.isZero()&&n.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(n){var t=this._selection,e=this._path;this._selection=n=n||0,e&&n!==t&&(e._updateSelection(this,t,n),e._changed(257))},_changeSelection:function(n,t){var e=this._selection;this.setSelection(t?e|n:e&~n)},isSelected:function(){return!!(this._selection&7)},setSelected:function(n){this._changeSelection(7,n)},getIndex:function(){return this._index!==G?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var n=this._path,t=this._index;return n?(t>0&&!n._closed&&t===n._segments.length-1&&t--,n.getCurves()[t]||null):null},getLocation:function(){var n=this.getCurve();return n?new le(n,this===n._segment1?0:1):null},getNext:function(){var n=this._path&&this._path._segments;return n&&(n[this._index+1]||this._path._closed&&n[0])||null},smooth:function(n,t,e){var i=n||{},r=i.type,s=i.factor,a=this.getPrevious(),o=this.getNext(),h=(a||this)._point,l=this._point,f=(o||this)._point,g=h.getDistance(l),d=l.getDistance(f);if(!r||r==="catmull-rom"){var c=s===G?.5:s,v=Math.pow(g,c),S=v*v,b=Math.pow(d,c),x=b*b;if(!t&&a){var m=2*x+3*b*v+S,_=3*b*(b+v);this.setHandleIn(_!==0?new B((x*h._x+m*l._x-S*f._x)/_-l._x,(x*h._y+m*l._y-S*f._y)/_-l._y):new B)}if(!e&&o){var m=2*S+3*v*b+x,_=3*v*(v+b);this.setHandleOut(_!==0?new B((S*f._x+m*l._x-x*h._x)/_-l._x,(S*f._y+m*l._y-x*h._y)/_-l._y):new B)}}else if(r==="geometric"){if(a&&o){var p=h.subtract(f),y=s===G?.4:s,C=y*g/(g+d);t||this.setHandleIn(p.multiply(C)),e||this.setHandleOut(p.multiply(C-y))}}else throw new Error("Smoothing method '"+r+"' not supported.")},getPrevious:function(){var n=this._path&&this._path._segments;return n&&(n[this._index-1]||this._path._closed&&n[n.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var n=this._path;return n&&this._index===n._segments.length-1||!1},reverse:function(){var n=this._handleIn,t=this._handleOut,e=n.clone();n.set(t),t.set(e)},reversed:function(){return new ot(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new ot(this._point,this._handleIn,this._handleOut)},equals:function(n){return n===this||n&&this._class===n._class&&this._point.equals(n._point)&&this._handleIn.equals(n._handleIn)&&this._handleOut.equals(n._handleOut)||!1},toString:function(){var n=["point: "+this._point];return this._handleIn.isZero()||n.push("handleIn: "+this._handleIn),this._handleOut.isZero()||n.push("handleOut: "+this._handleOut),"{ "+n.join(", ")+" }"},transform:function(n){this._transformCoordinates(n,new Array(6),!0),this._changed()},interpolate:function(n,t,e){var i=1-e,r=e,s=n._point,a=t._point,o=n._handleIn,h=t._handleIn,l=t._handleOut,f=n._handleOut;this._point._set(i*s._x+r*a._x,i*s._y+r*a._y,!0),this._handleIn._set(i*o._x+r*h._x,i*o._y+r*h._y,!0),this._handleOut._set(i*f._x+r*l._x,i*f._y+r*l._y,!0),this._changed()},_transformCoordinates:function(n,t,e){var i=this._point,r=!e||!this._handleIn.isZero()?this._handleIn:null,s=!e||!this._handleOut.isZero()?this._handleOut:null,a=i._x,o=i._y,h=2;return t[0]=a,t[1]=o,r&&(t[h++]=r._x+a,t[h++]=r._y+o),s&&(t[h++]=s._x+a,t[h++]=s._y+o),n&&(n._transformCoordinates(t,t,h/2),a=t[0],o=t[1],e?(i._x=a,i._y=o,h=2,r&&(r._x=t[h++]-a,r._y=t[h++]-o),s&&(s._x=t[h++]-a,s._y=t[h++]-o)):(r||(t[h++]=a,t[h++]=o),s||(t[h++]=a,t[h++]=o))),t}}),Ue=B.extend({initialize:function(t,e,i){var r,s,a;if(!t)r=s=0;else if((r=t[0])!==G)s=t[1];else{var o=t;(r=o.x)===G&&(o=B.read(arguments),r=o.x),s=o.y,a=o.selected}this._x=r,this._y=s,this._owner=e,e[i]=this,a&&this.setSelected(!0)},_set:function(n,t){return this._x=n,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(n){this._x=n,this._owner._changed(this)},getY:function(){return this._y},setY:function(n){this._y=n,this._owner._changed(this)},isZero:function(){var n=mt.isZero;return n(this._x)&&n(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(n){this._owner._changeSelection(this._getSelection(),n)},_getSelection:function(){var n=this._owner;return this===n._point?1:this===n._handleIn?2:this===n._handleOut?4:0}}),J=L.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,r,s,a,o,h){var l=arguments.length,f,g,d,c,v,S;l===3?(this._path=t,f=e,g=i):l?l===1?"segment1"in t?(f=new ot(t.segment1),g=new ot(t.segment2)):"point1"in t?(d=t.point1,v=t.handle1,S=t.handle2,c=t.point2):Array.isArray(t)&&(d=[t[0],t[1]],c=[t[6],t[7]],v=[t[2]-t[0],t[3]-t[1]],S=[t[4]-t[6],t[5]-t[7]]):l===2?(f=new ot(t),g=new ot(e)):l===4?(d=t,v=e,S=i,c=r):l===8&&(d=[t,e],c=[o,h],v=[i-t,r-e],S=[s-o,a-h]):(f=new ot,g=new ot),this._segment1=f||new ot(d,null,v),this._segment2=g||new ot(c,S,null)},_serialize:function(n,t){return L.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],n,!0,t)},_changed:function(){this._length=this._bounds=G},clone:function(){return new J(this._segment1,this._segment2)},toString:function(){var n=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||n.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||n.push("handle2: "+this._segment2._handleIn),n.push("point2: "+this._segment2._point),"{ "+n.join(", ")+" }"},classify:function(){return J.classify(this.getValues())},remove:function(){var n=!1;if(this._path){var t=this._segment2,e=t._handleOut;n=t.remove(),n&&this._segment1._handleOut.set(e)}return n},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(B.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(B.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(B.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(B.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var n=this._path&&this._path._curves;return n&&(n[this._segment1._index+1]||this._path._closed&&n[0])||null},getPrevious:function(){var n=this._path&&this._path._curves;return n&&(n[this._segment1._index-1]||this._path._closed&&n[n.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var n=this._path;return n&&this._segment1._index===n._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(n){this.getPoint1().setSelected(n),this.getHandle1().setSelected(n),this.getHandle2().setSelected(n),this.getPoint2().setSelected(n)},getValues:function(n){return J.getValues(this._segment1,this._segment2,n)},getPoints:function(){for(var n=this.getValues(),t=[],e=0;e<8;e+=2)t.push(new B(n[e],n[e+1]));return t}},{getLength:function(){return this._length==null&&(this._length=J.getLength(this.getValues(),0,1)),this._length},getArea:function(){return J.getArea(this.getValues())},getLine:function(){return new qt(this._segment1._point,this._segment2._point)},getPart:function(n,t){return new J(J.getPart(this.getValues(),n,t))},getPartLength:function(n,t){return J.getLength(this.getValues(),n,t)},divideAt:function(n){return this.divideAtTime(n&&n.curve===this?n.time:this.getTimeAt(n))},divideAtTime:function(n,t){var e=1e-8,i=1-e,r=null;if(n>=e&&n<=i){var s=J.subdivide(this.getValues(),n),a=s[0],o=s[1],h=t||this.hasHandles(),l=this._segment1,f=this._segment2,g=this._path;h&&(l._handleOut._set(a[2]-a[0],a[3]-a[1]),f._handleIn._set(o[4]-o[6],o[5]-o[7]));var d=a[6],c=a[7],v=new ot(new B(d,c),h&&new B(a[4]-d,a[5]-c),h&&new B(o[2]-d,o[3]-c));g?(g.insert(l._index+1,v),r=this.getNext()):(this._segment2=v,this._changed(),r=new J(v,f))}return r},splitAt:function(n){var t=this._path;return t?t.splitAt(n):null},splitAtTime:function(n){return this.splitAt(this.getLocationAtTime(n))},divide:function(n,t){return this.divideAtTime(n===G?.5:t?n:this.getTimeAt(n))},split:function(n,t){return this.splitAtTime(n===G?.5:t?n:this.getTimeAt(n))},reversed:function(){return new J(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(n,t,e,i){var r=n._point,s=n._handleOut,a=t._handleIn,o=t._point,h=r.x,l=r.y,f=o.x,g=o.y,d=i?[h,l,h,l,f,g,f,g]:[h,l,h+s._x,l+s._y,f+a._x,g+a._y,f,g];return e&&e._transformCoordinates(d,d,4),d},subdivide:function(n,t){var e=n[0],i=n[1],r=n[2],s=n[3],a=n[4],o=n[5],h=n[6],l=n[7];t===G&&(t=.5);var f=1-t,g=f*e+t*r,d=f*i+t*s,c=f*r+t*a,v=f*s+t*o,S=f*a+t*h,b=f*o+t*l,x=f*g+t*c,m=f*d+t*v,_=f*c+t*S,p=f*v+t*b,y=f*x+t*_,C=f*m+t*p;return[[e,i,g,d,x,m,y,C],[y,C,_,p,S,b,h,l]]},getMonoCurves:function(n,t){var e=[],i=t?0:1,r=n[i+0],s=n[i+2],a=n[i+4],o=n[i+6];if(r>=s==s>=a&&s>=a==a>=o||J.isStraight(n))e.push(n);else{var h=3*(s-a)-r+o,l=2*(r+a)-4*s,f=s-r,g=1e-8,d=1-g,c=[],v=mt.solveQuadratic(h,l,f,c,g,d);if(!v)e.push(n);else{c.sort();var S=c[0],b=J.subdivide(n,S);e.push(b[0]),v>1&&(S=(c[1]-S)/(1-S),b=J.subdivide(b[1],S),e.push(b[0])),e.push(b[1])}}return e},solveCubic:function(n,t,e,i,r,s){var a=n[t],o=n[t+2],h=n[t+4],l=n[t+6],f=0;if(!(a<e&&l<e&&o<e&&h<e||a>e&&l>e&&o>e&&h>e)){var g=3*(o-a),d=3*(h-o)-g,c=l-a-g-d;f=mt.solveCubic(c,d,g,a-e,i,r,s)}return f},getTimeOf:function(n,t){var e=new B(n[0],n[1]),i=new B(n[6],n[7]),r=1e-12,s=1e-7,a=t.isClose(e,r)?0:t.isClose(i,r)?1:null;if(a===null)for(var o=[t.x,t.y],h=[],l=0;l<2;l++)for(var f=J.solveCubic(n,l,o[l],h,0,1),g=0;g<f;g++){var d=h[g];if(t.isClose(J.getPoint(n,d),s))return d}return t.isClose(e,s)?0:t.isClose(i,s)?1:null},getNearestTime:function(n,t){if(J.isStraight(n)){var e=n[0],i=n[1],r=n[6],s=n[7],a=r-e,o=s-i,h=a*a+o*o;if(h===0)return 0;var l=((t.x-e)*a+(t.y-i)*o)/h;return l<1e-12?0:l>.999999999999?1:J.getTimeOf(n,new B(e+l*a,i+l*o))}var f=100,g=1/0,d=0;function c(b){if(b>=0&&b<=1){var x=t.getDistance(J.getPoint(n,b),!0);if(x<g)return g=x,d=b,!0}}for(var v=0;v<=f;v++)c(v/f);for(var S=1/(f*2);S>1e-8;)!c(d-S)&&!c(d+S)&&(S/=2);return d},getPart:function(n,t,e){var i=t>e;if(i){var r=t;t=e,e=r}return t>0&&(n=J.subdivide(n,t)[1]),e<1&&(n=J.subdivide(n,(e-t)/(1-t))[0]),i?[n[6],n[7],n[4],n[5],n[2],n[3],n[0],n[1]]:n},isFlatEnough:function(n,t){var e=n[0],i=n[1],r=n[2],s=n[3],a=n[4],o=n[5],h=n[6],l=n[7],f=3*r-2*e-h,g=3*s-2*i-l,d=3*a-2*h-e,c=3*o-2*l-i;return Math.max(f*f,d*d)+Math.max(g*g,c*c)<=16*t*t},getArea:function(n){var t=n[0],e=n[1],i=n[2],r=n[3],s=n[4],a=n[5],o=n[6],h=n[7];return 3*((h-e)*(i+s)-(o-t)*(r+a)+r*(t-s)-i*(e-a)+h*(s+t/3)-o*(a+e/3))/20},getBounds:function(n){for(var t=n.slice(0,2),e=t.slice(),i=[0,0],r=0;r<2;r++)J._addBounds(n[r],n[r+2],n[r+4],n[r+6],r,0,t,e,i);return new at(t[0],t[1],e[0]-t[0],e[1]-t[1])},_addBounds:function(n,t,e,i,r,s,a,o,h){function l(y,C){var P=y-C,I=y+C;P<a[r]&&(a[r]=P),I>o[r]&&(o[r]=I)}s/=2;var f=a[r]+s,g=o[r]-s;if(n<f||t<f||e<f||i<f||n>g||t>g||e>g||i>g)if(t<n!=t<i&&e<n!=e<i)l(n,0),l(i,0);else{var d=3*(t-e)-n+i,c=2*(n+e)-4*t,v=t-n,S=mt.solveQuadratic(d,c,v,h),b=1e-8,x=1-b;l(i,0);for(var m=0;m<S;m++){var _=h[m],p=1-_;b<=_&&_<=x&&l(p*p*p*n+3*p*p*_*t+3*p*_*_*e+_*_*_*i,s)}}}}},L.each(["getBounds","getStrokeBounds","getHandleBounds"],function(n){this[n]=function(){this._bounds||(this._bounds={});var t=this._bounds[n];return t||(t=this._bounds[n]=vt[n]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),L.each({isStraight:function(n,t,e,i){if(t.isZero()&&e.isZero())return!0;var r=i.subtract(n);if(r.isZero())return!1;if(r.isCollinear(t)&&r.isCollinear(e)){var s=new qt(n,i),a=1e-7;if(s.getDistance(n.add(t))<a&&s.getDistance(i.add(e))<a){var o=r.dot(r),h=r.dot(t)/o,l=r.dot(e)/o;return h>=0&&h<=1&&l<=0&&l>=-1}}return!1},isLinear:function(n,t,e,i){var r=i.subtract(n).divide(3);return t.equals(r)&&e.negate().equals(r)}},function(n,t){this[t]=function(e){var i=this._segment1,r=this._segment2;return n(i._point,i._handleOut,r._handleIn,r._point,e)},this.statics[t]=function(e,i){var r=e[0],s=e[1],a=e[6],o=e[7];return n(new B(r,s),new B(e[2]-r,e[3]-s),new B(e[4]-a,e[5]-o),new B(a,o),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(n){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(n||0)},isCollinear:function(n){return n&&this.isStraight()&&n.isStraight()&&this.getLine().isCollinear(n.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(n,t){return this.getLocationAtTime(t?n:this.getTimeAt(n))},getLocationAtTime:function(n){return n!=null&&n>=0&&n<=1?new le(this,n):null},getTimeAt:function(n,t){return J.getTimeAt(this.getValues(),n,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var n=B.read(arguments);return n.isZero()?[]:J.getTimesWithTangent(this.getValues(),n)},getOffsetAtTime:function(n){return this.getPartLength(0,n)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(B.read(arguments)))},getOffsetOf:function(){var n=this.getLocationOf.apply(this,arguments);return n?n.getOffset():null},getTimeOf:function(){return J.getTimeOf(this.getValues(),B.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var n=B.read(arguments),t=this.getValues(),e=J.getNearestTime(t,n),i=J.getPoint(t,e);return new le(this,e,i,null,n.getDistance(i))},getNearestPoint:function(){var n=this.getNearestLocation.apply(this,arguments);return n&&n.getPoint()}},new function(){var n=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return L.each(n,function(t){this[t+"At"]=function(e,i){var r=this.getValues();return J[t](r,i?e:J.getTimeAt(r,e))},this[t+"AtTime"]=function(e){return J[t](this.getValues(),e)}},{statics:{_evaluateMethods:n}})},new function(){function n(i){var r=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5],f=i[6],g=i[7],d=9*(a-h)+3*(f-r),c=6*(r+h)-12*a,v=3*(a-r),S=9*(o-l)+3*(g-s),b=6*(s+l)-12*o,x=3*(o-s);return function(m){var _=(d*m+c)*m+v,p=(S*m+b)*m+x;return Math.sqrt(_*_+p*p)}}function t(i,r){return Math.max(2,Math.min(16,Math.ceil(Math.abs(r-i)*32)))}function e(i,r,s,a){if(r==null||r<0||r>1)return null;var o=i[0],h=i[1],l=i[2],f=i[3],g=i[4],d=i[5],c=i[6],v=i[7],S=mt.isZero;S(l-o)&&S(f-h)&&(l=o,f=h),S(g-c)&&S(d-v)&&(g=c,d=v);var b=3*(l-o),x=3*(g-l)-b,m=c-o-b-x,_=3*(f-h),p=3*(d-f)-_,y=v-h-_-p,C,P;if(s===0)C=r===0?o:r===1?c:((m*r+x)*r+b)*r+o,P=r===0?h:r===1?v:((y*r+p)*r+_)*r+h;else{var I=1e-8,k=1-I;if(r<I?(C=b,P=_):r>k?(C=3*(c-g),P=3*(v-d)):(C=(3*m*r+2*x)*r+b,P=(3*y*r+2*p)*r+_),a){C===0&&P===0&&(r<I||r>k)&&(C=g-l,P=d-f);var T=Math.sqrt(C*C+P*P);T&&(C/=T,P/=T)}if(s===3){var g=6*m*r+2*x,d=6*y*r+2*p,O=Math.pow(C*C+P*P,3/2);C=O!==0?(C*d-P*g)/O:0,P=0}}return s===2?new B(P,-C):new B(C,P)}return{statics:{classify:function(i){var r=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5],f=i[6],g=i[7],d=r*(g-l)+s*(h-f)+f*l-g*h,c=a*(s-g)+o*(f-r)+r*g-s*f,v=h*(o-s)+l*(r-a)+a*s-o*r,S=3*v,b=S-c,x=b-c+d,m=Math.sqrt(x*x+b*b+S*S),_=m!==0?1/m:0,p=mt.isZero,y="serpentine";x*=_,b*=_,S*=_;function C(T,O,M){var A=O!==G,N=A&&O>0&&O<1,V=A&&M>0&&M<1;return A&&(!(N||V)||T==="loop"&&!(N&&V))&&(T="arch",N=V=!1),{type:T,roots:N||V?N&&V?O<M?[O,M]:[M,O]:[N?O:M]:null}}if(p(x))return p(b)?C(p(S)?"line":"quadratic"):C(y,S/(3*b));var P=3*b*b-4*x*S;if(p(P))return C("cusp",b/(2*x));var I=P>0?Math.sqrt(P/3):Math.sqrt(-P),k=2*x;return C(P>0?y:"loop",(b+I)/k,(b-I)/k)},getLength:function(i,r,s,a){if(r===G&&(r=0),s===G&&(s=1),J.isStraight(i)){var o=i;s<1&&(o=J.subdivide(o,s)[0],r/=s),r>0&&(o=J.subdivide(o,r)[1]);var h=o[6]-o[0],l=o[7]-o[1];return Math.sqrt(h*h+l*l)}return mt.integrate(a||n(i),r,s,t(r,s))},getTimeAt:function(i,r,s){if(s===G&&(s=r<0?1:0),r===0)return s;var a=Math.abs,o=1e-12,h=r>0,l=h?s:0,f=h?1:s,g=n(i),d=J.getLength(i,l,f,g),c=a(r)-d;if(a(c)<o)return h?f:l;if(c>o)return null;var v=r/d,S=0;function b(x){return S+=mt.integrate(g,s,x,t(s,x)),s=x,S-r}return mt.findRoot(b,g,s+v,l,f,32,1e-12)},getPoint:function(i,r){return e(i,r,0,!1)},getTangent:function(i,r){return e(i,r,1,!0)},getWeightedTangent:function(i,r){return e(i,r,1,!1)},getNormal:function(i,r){return e(i,r,2,!0)},getWeightedNormal:function(i,r){return e(i,r,2,!1)},getCurvature:function(i,r){return e(i,r,3,!1).x},getPeaks:function(i){var r=i[0],s=i[1],a=i[2],o=i[3],h=i[4],l=i[5],f=i[6],g=i[7],d=-r+3*a-3*h+f,c=3*r-6*a+3*h,v=-3*r+3*a,S=-s+3*o-3*l+g,b=3*s-6*o+3*l,x=-3*s+3*o,m=1e-8,_=1-m,p=[];return mt.solveCubic(9*(d*d+S*S),9*(d*c+b*S),2*(c*c+b*b)+3*(v*d+x*S),v*c+b*x,p,m,_),p.sort()}}}},new function(){function n(c,v,S,b,x,m,_){var p=!_&&S.getPrevious()===x,y=!_&&S!==x&&S.getNext()===x,C=1e-8,P=1-C;if(b!==null&&b>=(p?C:0)&&b<=(y?P:1)&&m!==null&&m>=(y?C:0)&&m<=(p?P:1)){var I=new le(S,b,null,_),k=new le(x,m,null,_);I._intersection=k,k._intersection=I,(!v||v(I))&&le.insert(c,I,!0)}}function t(c,v,S,b,x,m,_,p,y,C,P,I,k){if(++y>=4096||++p>=40)return y;var T=1e-9,O=v[0],M=v[1],A=v[6],N=v[7],V=qt.getSignedDistance,F=V(O,M,A,N,v[2],v[3]),D=V(O,M,A,N,v[4],v[5]),H=F*D>0?3/4:4/9,W=H*Math.min(0,F,D),X=H*Math.max(0,F,D),tt=V(O,M,A,N,c[0],c[1]),et=V(O,M,A,N,c[2],c[3]),j=V(O,M,A,N,c[4],c[5]),K=V(O,M,A,N,c[6],c[7]),it=e(tt,et,j,K),nt=it[0],ut=it[1],lt,ft;if(F===0&&D===0&&tt===0&&et===0&&j===0&&K===0||(lt=i(nt,ut,W,X))==null||(ft=i(nt.reverse(),ut.reverse(),W,X))==null)return y;var dt=C+(P-C)*lt,_t=C+(P-C)*ft;if(Math.max(k-I,_t-dt)<T){var wt=(dt+_t)/2,Dt=(I+k)/2;n(x,m,_?b:S,_?Dt:wt,_?S:b,_?wt:Dt)}else{c=J.getPart(c,lt,ft);var Ht=k-I;if(ft-lt>.8)if(_t-dt>Ht){var ht=J.subdivide(c,.5),wt=(dt+_t)/2;y=t(v,ht[0],b,S,x,m,!_,p,y,I,k,dt,wt),y=t(v,ht[1],b,S,x,m,!_,p,y,I,k,wt,_t)}else{var ht=J.subdivide(v,.5),Dt=(I+k)/2;y=t(ht[0],c,b,S,x,m,!_,p,y,I,Dt,dt,_t),y=t(ht[1],c,b,S,x,m,!_,p,y,Dt,k,dt,_t)}else Ht===0||Ht>=T?y=t(v,c,b,S,x,m,!_,p,y,I,k,dt,_t):y=t(c,v,S,b,x,m,_,p,y,dt,_t,I,k)}return y}function e(c,v,S,b){var x=[0,c],m=[1/3,v],_=[2/3,S],p=[1,b],y=v-(2*c+b)/3,C=S-(c+2*b)/3,P;if(y*C<0)P=[[x,m,p],[x,_,p]];else{var I=y/C;P=[I>=2?[x,m,p]:I<=.5?[x,_,p]:[x,m,_,p],[x,p]]}return(y||C)<0?P.reverse():P}function i(c,v,S,b){return c[0][1]<S?r(c,!0,S):v[0][1]>b?r(v,!1,b):c[0][0]}function r(c,v,S){for(var b=c[0][0],x=c[0][1],m=1,_=c.length;m<_;m++){var p=c[m][0],y=c[m][1];if(v?y>=S:y<=S)return y===S?p:b+(S-x)*(p-b)/(y-x);b=p,x=y}return null}function s(c,v,S,b,x){var m=mt.isZero;if(m(b)&&m(x)){var _=J.getTimeOf(c,new B(v,S));return _===null?[]:[_]}for(var p=Math.atan2(-x,b),y=Math.sin(p),C=Math.cos(p),P=[],I=[],k=0;k<8;k+=2){var T=c[k]-v,O=c[k+1]-S;P.push(T*C-O*y,T*y+O*C)}return J.solveCubic(P,1,0,I,0,1),I}function a(c,v,S,b,x,m,_){for(var p=v[0],y=v[1],C=v[6],P=v[7],I=s(c,p,y,C-p,P-y),k=0,T=I.length;k<T;k++){var O=I[k],M=J.getPoint(c,O),A=J.getTimeOf(v,M);A!==null&&n(x,m,_?b:S,_?A:O,_?S:b,_?O:A)}}function o(c,v,S,b,x,m){var _=qt.intersect(c[0],c[1],c[6],c[7],v[0],v[1],v[6],v[7]);_&&n(x,m,S,J.getTimeOf(c,_),b,J.getTimeOf(v,_))}function h(c,v,S,b,x,m){var _=1e-12,p=Math.min,y=Math.max;if(y(c[0],c[2],c[4],c[6])+_>p(v[0],v[2],v[4],v[6])&&p(c[0],c[2],c[4],c[6])-_<y(v[0],v[2],v[4],v[6])&&y(c[1],c[3],c[5],c[7])+_>p(v[1],v[3],v[5],v[7])&&p(c[1],c[3],c[5],c[7])-_<y(v[1],v[3],v[5],v[7])){var C=g(c,v);if(C)for(var P=0;P<2;P++){var I=C[P];n(x,m,S,I[0],b,I[1],!0)}else{var k=J.isStraight(c),T=J.isStraight(v),O=k&&T,M=k&&!T,A=x.length;if((O?o:k||T?a:t)(M?v:c,M?c:v,M?b:S,M?S:b,x,m,M,0,0,0,1,0,1),!O||x.length===A)for(var P=0;P<4;P++){var N=P>>1,V=P&1,F=N*6,D=V*6,H=new B(c[F],c[F+1]),W=new B(v[D],v[D+1]);H.isClose(W,_)&&n(x,m,S,N,b,V)}}}return x}function l(c,v,S,b){var x=J.classify(c);if(x.type==="loop"){var m=x.roots;n(S,b,v,m[0],v,m[1])}return S}function f(c,v,S,b,x,m){var _=1e-7,p=!v;p&&(v=c);for(var y=c.length,C=v.length,P=new Array(y),I=p?P:new Array(C),k=[],T=0;T<y;T++)P[T]=c[T].getValues(b);if(!p)for(var T=0;T<C;T++)I[T]=v[T].getValues(x);for(var O=Te.findCurveBoundsCollisions(P,I,_),M=0;M<y;M++){var A=c[M],N=P[M];p&&l(N,A,k,S);var V=O[M];if(V)for(var F=0;F<V.length;F++){if(m&&k.length)return k;var D=V[F];if(!p||D>M){var H=v[D],W=I[D];h(N,W,A,H,k,S)}}}return k}function g(c,v){function S(K){var it=K[6]-K[0],nt=K[7]-K[1];return it*it+nt*nt}var b=Math.abs,x=qt.getDistance,m=1e-8,_=1e-7,p=J.isStraight(c),y=J.isStraight(v),C=p&&y,P=S(c)<S(v),I=P?v:c,k=P?c:v,T=I[0],O=I[1],M=I[6]-T,A=I[7]-O;if(x(T,O,M,A,k[0],k[1],!0)<_&&x(T,O,M,A,k[6],k[7],!0)<_)!C&&x(T,O,M,A,I[2],I[3],!0)<_&&x(T,O,M,A,I[4],I[5],!0)<_&&x(T,O,M,A,k[2],k[3],!0)<_&&x(T,O,M,A,k[4],k[5],!0)<_&&(p=y=C=!0);else if(C)return null;if(p^y)return null;for(var N=[c,v],V=[],F=0;F<4&&V.length<2;F++){var D=F&1,H=D^1,W=F>>1,X=J.getTimeOf(N[D],new B(N[H][W?6:0],N[H][W?7:1]));if(X!=null){var tt=D?[W,X]:[X,W];(!V.length||b(tt[0]-V[0][0])>m&&b(tt[1]-V[0][1])>m)&&V.push(tt)}if(F>2&&!V.length)break}if(V.length!==2)V=null;else if(!C){var et=J.getPart(c,V[0][0],V[1][0]),j=J.getPart(v,V[0][1],V[1][1]);(b(j[2]-et[2])>_||b(j[3]-et[3])>_||b(j[4]-et[4])>_||b(j[5]-et[5])>_)&&(V=null)}return V}function d(c,v){var S=c[0],b=c[1],x=c[2],m=c[3],_=c[4],p=c[5],y=c[6],C=c[7],P=v.normalize(),I=P.x,k=P.y,T=3*y-9*_+9*x-3*S,O=3*C-9*p+9*m-3*b,M=6*_-12*x+6*S,A=6*p-12*m+6*b,N=3*x-3*S,V=3*m-3*b,F=2*T*k-2*O*I,D=[];if(Math.abs(F)<mt.CURVETIME_EPSILON){var H=T*V-O*N,F=T*A-O*M;if(F!=0){var W=-H/F;W>=0&&W<=1&&D.push(W)}}else{var X=(M*M-4*T*N)*k*k+(-2*M*A+4*O*N+4*T*V)*I*k+(A*A-4*O*V)*I*I,tt=M*k-A*I;if(X>=0&&F!=0){var et=Math.sqrt(X),j=-(tt+et)/F,K=(-tt+et)/F;j>=0&&j<=1&&D.push(j),K>=0&&K<=1&&D.push(K)}}return D}return{getIntersections:function(c){var v=this.getValues(),S=c&&c!==this&&c.getValues();return S?h(v,S,this,c,[]):l(v,this,[])},statics:{getOverlaps:g,getIntersections:f,getCurveLineIntersections:s,getTimesWithTangent:d}}}),le=L.extend({_class:"CurveLocation",initialize:function(t,e,i,r,s){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=r,this._distance=s,this._intersection=this._next=this._previous=null},_setPath:function(n){this._path=n,this._version=n?n._version:0},_setCurve:function(n){this._setPath(n._path),this._curve=n,this._segment=null,this._segment1=n._segment1,this._segment2=n._segment2},_setSegment:function(n){var t=n.getCurve();t?this._setCurve(t):(this._setPath(n._path),this._segment1=n,this._segment2=null),this._segment=n,this._time=n===this._segment1?0:1,this._point=n._point.clone()},getSegment:function(){var n=this._segment;if(!n){var t=this.getCurve(),e=this.getTime();e===0?n=t._segment1:e===1?n=t._segment2:e!=null&&(n=t.getPartLength(0,e)<t.getPartLength(e,1)?t._segment1:t._segment2),this._segment=n}return n},getCurve:function(){var n=this._path,t=this;n&&n._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function e(i){var r=i&&i.getCurve();if(r&&(t._time=r.getTimeOf(t._point))!=null)return t._setCurve(r),r}return this._curve||e(this._segment)||e(this._segment1)||e(this._segment2.getPrevious())},getPath:function(){var n=this.getCurve();return n&&n._path},getIndex:function(){var n=this.getCurve();return n&&n.getIndex()},getTime:function(){var n=this.getCurve(),t=this._time;return n&&t==null?this._time=n.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var n=this._offset;if(n==null){n=0;var t=this.getPath(),e=this.getIndex();if(t&&e!=null)for(var i=t.getCurves(),r=0;r<e;r++)n+=i[r].getLength();this._offset=n+=this.getCurveOffset()}return n},getCurveOffset:function(){var n=this._curveOffset;if(n==null){var t=this.getCurve(),e=this.getTime();this._curveOffset=n=e!=null&&t&&t.getPartLength(0,e)}return n},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var n=this.getCurve(),t=n&&n.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var n=this.getCurve(),t=n._path,e=n&&n.splitAtTime(this.getTime());return e&&this._setSegment(t.getLastSegment()),e},equals:function(n,t){var e=this===n;if(!e&&n instanceof le){var i=this.getCurve(),r=n.getCurve(),s=i._path,a=r._path;if(s===a){var o=Math.abs,h=1e-7,l=o(this.getOffset()-n.getOffset()),f=!t&&this._intersection,g=!t&&n._intersection;e=(l<h||s&&o(s.getLength()-l)<h)&&(!f&&!g||f&&g&&f.equals(g,!0))}}return e},toString:function(){var n=[],t=this.getPoint(),e=te.instance;t&&n.push("point: "+t);var i=this.getIndex();i!=null&&n.push("index: "+i);var r=this.getTime();return r!=null&&n.push("time: "+e.number(r)),this._distance!=null&&n.push("distance: "+e.number(this._distance)),"{ "+n.join(", ")+" }"},isTouching:function(){var n=this._intersection;if(n&&this.getTangent().isCollinear(n.getTangent())){var t=this.getCurve(),e=n.getCurve();return!(t.isStraight()&&e.isStraight()&&t.getLine().intersect(e.getLine()))}return!1},isCrossing:function(){var n=this._intersection;if(!n)return!1;var t=this.getTime(),e=n.getTime(),i=1e-8,r=1-i,s=t>=i&&t<=r,a=e>=i&&e<=r;if(s&&a)return!this.isTouching();var o=this.getCurve(),h=o&&t<i?o.getPrevious():o,l=n.getCurve(),f=l&&e<i?l.getPrevious():l;if(t>r&&(o=o.getNext()),e>r&&(l=l.getNext()),!h||!o||!f||!l)return!1;var g=[];function d(I,k){var T=I.getValues(),O=J.classify(T).roots||J.getPeaks(T),M=O.length,A=J.getLength(T,k&&M?O[M-1]:0,!k&&M?O[0]:1);g.push(M?A:A/32)}function c(I,k,T){return k<T?I>k&&I<T:I>k||I<T}s||(d(h,!0),d(o,!1)),a||(d(f,!0),d(l,!1));var v=this.getPoint(),S=Math.min.apply(Math,g),b=s?o.getTangentAtTime(t):o.getPointAt(S).subtract(v),x=s?b.negate():h.getPointAt(-S).subtract(v),m=a?l.getTangentAtTime(e):l.getPointAt(S).subtract(v),_=a?m.negate():f.getPointAt(-S).subtract(v),p=x.getAngle(),y=b.getAngle(),C=_.getAngle(),P=m.getAngle();return!!(s?c(p,C,P)^c(y,C,P)&&c(p,P,C)^c(y,P,C):c(C,p,y)^c(P,p,y)&&c(C,y,p)^c(P,y,p))},hasOverlap:function(){return!!this._overlap}},L.each(J._evaluateMethods,function(n){var t=n+"At";this[n]=function(){var e=this.getCurve(),i=this.getTime();return i!=null&&e&&e[t](i,!0)}},{preserve:!0}),new function(){function n(t,e,i){var r=t.length,s=0,a=r-1;function o(v,S){for(var b=v+S;b>=-1&&b<=r;b+=S){var x=t[(b%r+r)%r];if(!e.getPoint().isClose(x.getPoint(),1e-7))break;if(e.equals(x))return x}return null}for(;s<=a;){var h=s+a>>>1,l=t[h],f;if(i&&(f=e.equals(l)?l:o(h,-1)||o(h,1)))return e._overlap&&(f._overlap=f._intersection._overlap=!0),f;var g=e.getPath(),d=l.getPath(),c=g!==d?g._id-d._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime());c<0?a=h-1:s=h+1}return t.splice(s,0,e),e}return{statics:{insert:n,expand:function(t){for(var e=t.slice(),i=t.length-1;i>=0;i--)n(e,t[i]._intersection,!1);return e}}}}),Ce=z.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(n){var t,e,i;if(L.isPlainObject(n)?(e=n.segments,t=n.pathData):Array.isArray(n)?e=n:typeof n=="string"&&(t=n),e){var r=e[0];i=r&&Array.isArray(r[0])}else t&&(i=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var s=i?ie:vt;return new s(n)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(n){this.isClockwise()!=(n=!!n)&&this.reverse()},setPathData:function(n){var t=n&&n.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),e,i=!1,r,s,a=new B,o=new B;function h(_,p){var y=+e[_];return i&&(y+=a[p]),y}function l(_){return new B(h(_,"x"),h(_+1,"y"))}this.clear();for(var f=0,g=t&&t.length;f<g;f++){var d=t[f],c=d[0],v=c.toLowerCase();e=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var S=e&&e.length;switch(i=c===v,r==="z"&&!/[mz]/.test(v)&&this.moveTo(a),v){case"m":case"l":for(var b=v==="m",x=0;x<S;x+=2)this[b?"moveTo":"lineTo"](a=l(x)),b&&(o=a,b=!1);s=a;break;case"h":case"v":var m=v==="h"?"x":"y";a=a.clone();for(var x=0;x<S;x++)a[m]=h(x,m),this.lineTo(a);s=a;break;case"c":for(var x=0;x<S;x+=6)this.cubicCurveTo(l(x),s=l(x+2),a=l(x+4));break;case"s":for(var x=0;x<S;x+=4)this.cubicCurveTo(/[cs]/.test(r)?a.multiply(2).subtract(s):a,s=l(x),a=l(x+2)),r=v;break;case"q":for(var x=0;x<S;x+=4)this.quadraticCurveTo(s=l(x),a=l(x+2));break;case"t":for(var x=0;x<S;x+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?a.multiply(2).subtract(s):a,a=l(x)),r=v;break;case"a":for(var x=0;x<S;x+=7)this.arcTo(a=l(x+5),new rt(+e[x],+e[x+1]),+e[x+2],+e[x+4],+e[x+3]);break;case"z":this.closePath(1e-12),a=o;break}r=v}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(n){var t=n.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(n):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(n,t,e,i){var r=this===n||!n,s=this._matrix._orNullIfIdentity(),a=r?s:(e||n._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(n.getBounds(a),1e-12)?J.getIntersections(this.getCurves(),!r&&n.getCurves(),t,s,a,i):[]},getCrossings:function(n){return this.getIntersections(n,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var n=B.read(arguments),t=this.getCurves(),e=1/0,i=null,r=0,s=t.length;r<s;r++){var a=t[r].getNearestLocation(n);a._distance<e&&(e=a._distance,i=a)}return i},getNearestPoint:function(){var n=this.getNearestLocation.apply(this,arguments);return n&&n.getPoint()},interpolate:function(n,t,e){var i=!this._children,r=i?"_segments":"_children",s=n[r],a=t[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+n+", "+t);var h=o.length,l=a.length;if(h<l)for(var f=i?ot:vt,g=h;g<l;g++)this.add(new f);else h>l&&this[i?"removeSegments":"removeChildren"](l,h);for(var g=0;g<l;g++)o[g].interpolate(s[g],a[g],e);i&&(this.setClosed(n._closed),this._changed(9))},compare:function(n){var t=!1;if(n){var e=this._children||[this],i=n._children?n._children.slice():[n],r=e.length,s=i.length,a=[],o=0;t=!0;for(var h=Te.findItemBoundsCollisions(e,i,mt.GEOMETRIC_EPSILON),l=r-1;l>=0&&t;l--){var f=e[l];t=!1;var g=h[l];if(g)for(var d=g.length-1;d>=0&&!t;d--)f.compare(i[g[d]])&&(a[g[d]]||(a[g[d]]=!0,o++),t=!0)}t=t&&o===s}return t}}),vt=Ce.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,i=Array.isArray(t)?typeof t[0]=="object"?t:e:t&&t.size===G&&(t.x!==G||t.point!==G)?e:null;i&&i.length>0?this.setSegments(i):(this._curves=G,this._segmentSelection=0,!i&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!i&&t)},_equals:function(n){return this._closed===n._closed&&L.equals(this._segments,n._segments)},copyContent:function(n){this.setSegments(n._segments),this._closed=n._closed},_changed:function n(t){if(n.base.call(this,t),t&8){if(this._length=this._area=G,t&32)this._version++;else if(this._curves)for(var e=0,i=this._curves.length;e<i;e++)this._curves[e]._changed()}else t&64&&(this._bounds=G)},getStyle:function(){var n=this._parent;return(n instanceof ie?n:this)._style},getSegments:function(){return this._segments},setSegments:function(n){var t=this.isFullySelected(),e=n&&n.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=G,e){var i=n[e-1];typeof i=="boolean"&&(this.setClosed(i),e--),this._add(ot.readList(n,0,{},e))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var n=this._curves,t=this._segments;if(!n){var e=this._countCurves();n=this._curves=new Array(e);for(var i=0;i<e;i++)n[i]=new J(this,t[i],t[i+1]||t[0])}return n},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var n=this.getCurves();return n[n.length-1]},isClosed:function(){return this._closed},setClosed:function(n){if(this._closed!=(n=!!n)){if(this._closed=n,this._curves){var t=this._curves.length=this._countCurves();n&&(this._curves[t-1]=new J(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(n,t){var e=this._segments,i=e.length,r=new te(t),s=new Array(6),a=!0,o,h,l,f,g,d,c,v,S=[];function b(m,_){if(m._transformCoordinates(n,s),o=s[0],h=s[1],a)S.push("M"+r.pair(o,h)),a=!1;else if(g=s[2],d=s[3],g===o&&d===h&&c===l&&v===f){if(!_){var p=o-l,y=h-f;S.push(p===0?"v"+r.number(y):y===0?"h"+r.number(p):"l"+r.pair(p,y))}}else S.push("c"+r.pair(c-l,v-f)+" "+r.pair(g-l,d-f)+" "+r.pair(o-l,h-f));l=o,f=h,c=s[4],v=s[5]}if(!i)return"";for(var x=0;x<i;x++)b(e[x]);return this._closed&&i>0&&(b(e[0],!0),S.push("z")),S.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(n){for(var t=this._segments,e=new Array(6),i=0,r=t.length;i<r;i++)t[i]._transformCoordinates(n,e,!0);return!0},_add:function(n,a){for(var e=this._segments,i=this._curves,r=n.length,s=a==null,a=s?e.length:a,o=0;o<r;o++){var h=n[o];h._path&&(h=n[o]=h.clone()),h._path=this,h._index=a+o,h._selection&&this._updateSelection(h,0,h._selection)}if(s)L.push(e,n);else{e.splice.apply(e,[a,0].concat(n));for(var o=a+r,l=e.length;o<l;o++)e[o]._index=o}if(i){var f=this._countCurves(),g=a>0&&a+r-1===f?a-1:a,d=g,c=Math.min(g+r,f);n._curves&&(i.splice.apply(i,[g,0].concat(n._curves)),d+=n._curves.length);for(var o=d;o<c;o++)i.splice(o,0,new J(this,null,null));this._adjustCurves(g,c)}return this._changed(41),n},_adjustCurves:function(n,t){for(var e=this._segments,i=this._curves,r,s=n;s<t;s++)r=i[s],r._path=this,r._segment1=e[s],r._segment2=e[s+1]||e[0],r._changed();(r=i[this._closed&&!n?e.length-1:n-1])&&(r._segment2=e[n]||e[0],r._changed()),(r=i[t])&&(r._segment1=e[t],r._changed())},_countCurves:function(){var n=this._segments.length;return!this._closed&&n>0?n-1:n},add:function(n){var t=arguments;return t.length>1&&typeof n!="number"?this._add(ot.readList(t)):this._add([ot.read(t)])[0]},insert:function(n,t){var e=arguments;return e.length>2&&typeof t!="number"?this._add(ot.readList(e,1),n):this._add([ot.read(e,1)],n)[0]},addSegment:function(){return this._add([ot.read(arguments)])[0]},insertSegment:function(n){return this._add([ot.read(arguments,1)],n)[0]},addSegments:function(n){return this._add(ot.readList(n))},insertSegments:function(n,t){return this._add(ot.readList(t),n)},removeSegment:function(n){return this.removeSegments(n,n+1)[0]||null},removeSegments:function(n,t,e){n=n||0,t=L.pick(t,this._segments.length);var i=this._segments,r=this._curves,s=i.length,a=i.splice(n,t-n),o=a.length;if(!o)return a;for(var h=0;h<o;h++){var l=a[h];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}for(var h=n,f=i.length;h<f;h++)i[h]._index=h;if(r){for(var g=n>0&&t===s+(this._closed?1:0)?n-1:n,r=r.splice(g,o),h=r.length-1;h>=0;h--)r[h]._path=null;e&&(a._curves=r.slice(1)),this._adjustCurves(g,g)}return this._changed(41),a},clear:"#removeSegments",hasHandles:function(){for(var n=this._segments,t=0,e=n.length;t<e;t++)if(n[t].hasHandles())return!0;return!1},clearHandles:function(){for(var n=this._segments,t=0,e=n.length;t<e;t++)n[t].clearHandles()},getLength:function(){if(this._length==null){for(var n=this.getCurves(),t=0,e=0,i=n.length;e<i;e++)t+=n[e].getLength();this._length=t}return this._length},getArea:function(){var n=this._area;if(n==null){var t=this._segments,e=this._closed;n=0;for(var i=0,r=t.length;i<r;i++){var s=i+1===r;n+=J.getArea(J.getValues(t[i],t[s?0:i+1],null,s&&!e))}this._area=n}return n},isFullySelected:function(){var n=this._segments.length;return this.isSelected()&&n>0&&this._segmentSelection===n*7},setFullySelected:function(n){n&&this._selectSegments(!0),this.setSelected(n)},setSelection:function n(t){t&1||this._selectSegments(!1),n.base.call(this,t)},_selectSegments:function(n){var t=this._segments,e=t.length,i=n?7:0;this._segmentSelection=i*e;for(var r=0;r<e;r++)t[r]._selection=i},_updateSelection:function(n,t,e){n._selection=e;var i=this._segmentSelection+=e-t;i>0&&this.setSelected(!0)},divideAt:function(n){var t=this.getLocationAt(n),e;return t&&(e=t.getCurve().divideAt(t.getCurveOffset()))?e._segment1:null},splitAt:function(n){var t=this.getLocationAt(n),e=t&&t.index,i=t&&t.time,r=1e-8,s=1-r;i>s&&(e++,i=0);var a=this.getCurves();if(e>=0&&e<a.length){i>=r&&a[e++].divideAtTime(i);var o=this.removeSegments(e,this._segments.length,!0),h;return this._closed?(this.setClosed(!1),h=this):(h=new vt(z.NO_INSERT),h.insertAbove(this),h.copyAttributes(this)),h._add(o,0),this.addSegment(o[0]),h}return null},split:function(n,t){var e,i=t===G?n:(e=this.getCurves()[n])&&e.getLocationAtTime(t);return i!=null?this.splitAt(i):null},join:function(n,t){var e=t||0;if(n&&n!==this){var i=n._segments,r=this.getLastSegment(),s=n.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,e)&&n.reverse();var a=n.getFirstSegment();if(r&&r._point.isClose(a._point,e))r.setHandleOut(a._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,e)&&n.reverse(),s=n.getLastSegment(),o&&o._point.isClose(s._point,e)?(o.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}n._closed&&this._add([i[0]]),n.remove()}var h=this.getFirstSegment(),l=this.getLastSegment();return h!==l&&h._point.isClose(l._point,e)&&(h.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(n){for(var t=this.getCurves(),e=n&&n.simplify,i=e?1e-7:0,r=t.length-1;r>=0;r--){var s=t[r];!s.hasHandles()&&(!s.hasLength(i)||e&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var n=0,t=this._segments.length;n<t;n++){var e=this._segments[n],i=e._handleIn;e._handleIn=e._handleOut,e._handleOut=i,e._index=n}this._curves=null,this._changed(9)},flatten:function(n){for(var t=new si(this,n||.25,256,!0),e=t.parts,i=e.length,r=[],s=0;s<i;s++)r.push(new ot(e[s].curve.slice(0,2)));!this._closed&&i>0&&r.push(new ot(e[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(n){var t=new qe(this).fit(n||2.5);return t&&this.setSegments(t),!!t},smooth:function(n){var t=this,e=n||{},i=e.type||"asymmetric",r=this._segments,s=r.length,a=this._closed;function o(nt,ut){var lt=nt&&nt.index;if(lt!=null){var ft=nt.path;if(ft&&ft!==t)throw new Error(nt._class+" "+lt+" of "+ft+" is not part of "+t);ut&&nt instanceof J&&lt++}else lt=typeof nt=="number"?nt:ut;return Math.min(lt<0&&a?lt%s:lt<0?lt+s:lt,s-1)}var h=a&&e.from===G&&e.to===G,l=o(e.from,0),f=o(e.to,s-1);if(l>f)if(a)l-=s;else{var g=l;l=f,f=g}if(/^(?:asymmetric|continuous)$/.test(i)){var d=i==="asymmetric",c=Math.min,v=f-l+1,S=v-1,b=h?c(v,4):1,x=b,m=b,_=[];if(a||(x=c(1,l),m=c(1,s-f-1)),S+=x+m,S<=1)return;for(var p=0,y=l-x;p<=S;p++,y++)_[p]=r[(y<0?y+s:y)%s]._point;for(var C=_[0]._x+2*_[1]._x,P=_[0]._y+2*_[1]._y,I=2,k=S-1,T=[C],O=[P],M=[I],A=[],N=[],p=1;p<S;p++){var V=p<k,F=V||d?1:2,D=V?4:d?2:7,H=V?4:d?3:8,W=V?2:d?0:1,X=F/I;I=M[p]=D-X,C=T[p]=H*_[p]._x+W*_[p+1]._x-X*C,P=O[p]=H*_[p]._y+W*_[p+1]._y-X*P}A[k]=T[k]/M[k],N[k]=O[k]/M[k];for(var p=S-2;p>=0;p--)A[p]=(T[p]-A[p+1])/M[p],N[p]=(O[p]-N[p+1])/M[p];A[S]=(3*_[S]._x-A[k])/2,N[S]=(3*_[S]._y-N[k])/2;for(var p=x,tt=S-m,y=l;p<=tt;p++,y++){var et=r[y<0?y+s:y],j=et._point,K=A[p]-j._x,it=N[p]-j._y;(h||p<tt)&&et.setHandleOut(K,it),(h||p>x)&&et.setHandleIn(-K,-it)}}else for(var p=l;p<=f;p++)r[p<0?p+s:p].smooth(e,!h&&p===l,!h&&p===f)},toShape:function(n){if(!this._closed)return null;var t=this._segments,e,i,r,s;function a(d,c){var v=t[d],S=v.getNext(),b=t[c],x=b.getNext();return v._handleOut.isZero()&&S._handleIn.isZero()&&b._handleOut.isZero()&&x._handleIn.isZero()&&S._point.subtract(v._point).isCollinear(x._point.subtract(b._point))}function o(d){var c=t[d],v=c.getPrevious(),S=c.getNext();return v._handleOut.isZero()&&c._handleIn.isZero()&&c._handleOut.isZero()&&S._handleIn.isZero()&&c._point.subtract(v._point).isOrthogonal(S._point.subtract(c._point))}function h(d){var c=t[d],v=c.getNext(),S=c._handleOut,b=v._handleIn,x=.5522847498307936;if(S.isOrthogonal(b)){var m=c._point,_=v._point,p=new qt(m,S,!0).intersect(new qt(_,b,!0),!0);return p&&mt.isZero(S.getLength()/p.subtract(m).getLength()-x)&&mt.isZero(b.getLength()/p.subtract(_).getLength()-x)}return!1}function l(d,c){return t[d]._point.getDistance(t[c]._point)}if(!this.hasHandles()&&t.length===4&&a(0,2)&&a(1,3)&&o(1)?(e=Ut.Rectangle,i=new rt(l(0,3),l(0,1)),s=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&h(0)&&h(2)&&h(4)&&h(6)&&a(1,5)&&a(3,7)?(e=Ut.Rectangle,i=new rt(l(1,6),l(0,3)),r=i.subtract(new rt(l(0,7),l(1,2))).divide(2),s=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&h(0)&&h(1)&&h(2)&&h(3)&&(mt.isZero(l(0,2)-l(1,3))?(e=Ut.Circle,r=l(0,2)/2):(e=Ut.Ellipse,r=new rt(l(2,0)/2,l(3,1)/2)),s=t[1]._point),e){var f=this.getPosition(!0),g=new e({center:f,size:i,radius:r,insert:!1});return g.copyAttributes(this,!0),g._matrix.prepend(this._matrix),g.rotate(s.subtract(f).getAngle()+90),(n===G||n)&&g.insertAbove(this),g}return null},toPath:"#clone",compare:function n(t){if(!t||t instanceof ie)return n.base.call(this,t);var e=this.getCurves(),i=t.getCurves(),r=e.length,s=i.length;if(!r||!s)return r==s;for(var a=e[0].getValues(),o=[],h=0,l,f=0,g,d=0;d<s;d++){var b=i[d].getValues();o.push(b);var c=J.getOverlaps(a,b);if(c){l=!d&&c[0][0]>0?s-1:d,g=c[0][1];break}}for(var v=Math.abs,S=1e-8,b=o[l],x;a&&b;){var c=J.getOverlaps(a,b);if(c){var m=c[0][0];if(v(m-f)<S){f=c[1][0],f===1&&(a=++h<r?e[h].getValues():null,f=0);var _=c[0][1];if(v(_-g)<S){if(x||(x=[l,_]),g=c[1][1],g===1&&(++l>=s&&(l=0),b=o[l]||i[l].getValues(),g=0),!a)return x[0]===l&&x[1]===g;continue}}}break}return!1},_hitTestSelf:function(n,t,e,i){var r=this,s=this.getStyle(),a=this._segments,o=a.length,h=this._closed,l=t._tolerancePadding,f=l,g,d,c,v,S,b,x=t.stroke&&s.hasStroke(),m=t.fill&&s.hasFill(),_=t.curves,p=x?s.getStrokeWidth()/2:m&&t.tolerance>0||_?0:null;p!==null&&(p>0?(g=s.getStrokeJoin(),d=s.getStrokeCap(),c=s.getMiterLimit(),f=f.add(vt._getStrokePadding(p,i))):g=d="round");function y(A,N){return n.subtract(A).divide(N).length<=1}function C(A,N,V){if(!t.selected||N.isSelected()){var F=A._point;if(N!==F&&(N=N.add(F)),y(N,f))return new ce(V,r,{segment:A,point:N})}}function P(A,N){return(N||t.segments)&&C(A,A._point,"segment")||!N&&t.handles&&(C(A,A._handleIn,"handle-in")||C(A,A._handleOut,"handle-out"))}function I(A){v.add(A)}function k(A){var N=h||A._index>0&&A._index<o-1;if((N?g:d)==="round")return y(A._point,f);if(v=new vt({internal:!0,closed:!0}),N?A.isSmooth()||vt._addBevelJoin(A,g,p,c,null,i,I,!0):d==="square"&&vt._addSquareCap(A,d,p,null,i,I,!0),!v.isEmpty()){var V;return v.contains(n)||(V=v.getNearestLocation(n))&&y(V.getPoint(),l)}}if(t.ends&&!t.segments&&!h){if(b=P(a[0],!0)||P(a[o-1],!0))return b}else if(t.segments||t.handles){for(var T=0;T<o;T++)if(b=P(a[T]))return b}if(p!==null){if(S=this.getNearestLocation(n),S){var O=S.getTime();O===0||O===1&&o>1?k(S.getSegment())||(S=null):y(S.getPoint(),f)||(S=null)}if(!S&&g==="miter"&&o>1)for(var T=0;T<o;T++){var M=a[T];if(n.getDistance(M._point)<=c*p&&k(M)){S=M.getLocation();break}}}return!S&&m&&this._contains(n)||S&&!x&&!_?new ce("fill",this):S?new ce(x?"stroke":"curve",this,{location:S,point:S.getPoint()}):null}},L.each(J._evaluateMethods,function(n){this[n+"At"]=function(t){var e=this.getLocationAt(t);return e&&e[n]()}},{beans:!1,getLocationOf:function(){for(var n=B.read(arguments),t=this.getCurves(),e=0,i=t.length;e<i;e++){var r=t[e].getLocationOf(n);if(r)return r}return null},getOffsetOf:function(){var n=this.getLocationOf.apply(this,arguments);return n?n.getOffset():null},getLocationAt:function(n){if(typeof n=="number"){for(var t=this.getCurves(),e=0,i=0,r=t.length;i<r;i++){var s=e,a=t[i];if(e+=a.getLength(),e>n)return a.getLocationAt(n-s)}if(t.length>0&&n<=this.getLength())return new le(t[t.length-1],1)}else if(n&&n.getPath&&n.getPath()===this)return n;return null},getOffsetsWithTangent:function(){var n=B.read(arguments);if(n.isZero())return[];for(var t=[],e=0,i=this.getCurves(),r=0,s=i.length;r<s;r++){for(var a=i[r],o=a.getTimesWithTangent(n),h=0,l=o.length;h<l;h++){var f=e+a.getOffsetAtTime(o[h]);t.indexOf(f)<0&&t.push(f)}e+=a.length}return t}}),new function(){function n(e,i,r,s){if(s<=0)return;var a=s/2,o=s-2,h=a-1,l=new Array(6),f,g;function d(m){var _=l[m],p=l[m+1];(f!=_||g!=p)&&(e.beginPath(),e.moveTo(f,g),e.lineTo(_,p),e.stroke(),e.beginPath(),e.arc(_,p,a,0,Math.PI*2,!0),e.fill())}for(var c=0,v=i.length;c<v;c++){var S=i[c],b=S._selection;if(S._transformCoordinates(r,l),f=l[0],g=l[1],b&2&&d(2),b&4&&d(4),e.fillRect(f-a,g-a,s,s),o>0&&!(b&1)){var x=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(f-h,g-h,o,o),e.fillStyle=x}}}function t(e,i,r){var s=i._segments,a=s.length,o=new Array(6),h=!0,l,f,g,d,c,v,S,b;function x(_){if(r)_._transformCoordinates(r,o),l=o[0],f=o[1];else{var p=_._point;l=p._x,f=p._y}if(h)e.moveTo(l,f),h=!1;else{if(r)c=o[2],v=o[3];else{var y=_._handleIn;c=l+y._x,v=f+y._y}c===l&&v===f&&S===g&&b===d?e.lineTo(l,f):e.bezierCurveTo(S,b,c,v,l,f)}if(g=l,d=f,r)S=o[4],b=o[5];else{var y=_._handleOut;S=g+y._x,b=d+y._y}}for(var m=0;m<a;m++)x(s[m]);i._closed&&a>0&&x(s[0])}return{_draw:function(e,i,r,s){var a=i.dontStart,o=i.dontFinish||i.clip,h=this.getStyle(),l=h.hasFill(),f=h.hasStroke(),g=h.getDashArray(),d=!Bt.support.nativeDash&&f&&g&&g.length;a||e.beginPath(),(l||f&&!d||o)&&(t(e,this,s),this._closed&&e.closePath());function c(_){return g[(_%d+d)%d]}if(!o&&(l||f)&&(this._setStyles(e,i,r),l&&(e.fill(h.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),f)){if(d){a||e.beginPath();for(var v=new si(this,.25,32,!1,s),S=v.length,b=-h.getDashOffset(),x,m=0;b>0;)b-=c(m--)+c(m--);for(;b<S;)x=b+c(m++),(b>0||x>0)&&v.drawPart(e,Math.max(b,0),Math.max(x,0)),b=x+c(m++)}e.stroke()}},_drawSelected:function(e,i){e.beginPath(),t(e,this,i),e.stroke(),n(e,this._segments,i,Bt.settings.handleSize)}}},new function(){function n(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new ot(B.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new ot(B.read(arguments))])},cubicCurveTo:function(){var t=arguments,e=B.read(t),i=B.read(t),r=B.read(t),s=n(this);s.setHandleOut(e.subtract(s._point)),this._add([new ot(r,i.subtract(r))])},quadraticCurveTo:function(){var t=arguments,e=B.read(t),i=B.read(t),r=n(this)._point;this.cubicCurveTo(e.add(r.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var t=arguments,e=B.read(t),i=B.read(t),r=L.pick(L.read(t),.5),s=1-r,a=n(this)._point,o=e.subtract(a.multiply(s*s)).subtract(i.multiply(r*r)).divide(2*r*s);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(o,i)},arcTo:function(){var t=arguments,e=Math.abs,i=Math.sqrt,r=n(this),s=r._point,a=B.read(t),o,h=L.peek(t),l=L.pick(h,!0),f,g,d,c;if(typeof l=="boolean")var v=s.add(a).divide(2),o=v.add(v.subtract(s).rotate(l?-90:90));else if(L.remain(t)<=2)o=a,a=B.read(t);else if(!s.equals(a)){var S=rt.read(t),b=mt.isZero;if(b(S.width)||b(S.height))return this.lineTo(a);var x=L.read(t),l=!!L.read(t),m=!!L.read(t),v=s.add(a).divide(2),_=s.subtract(v).rotate(-x),p=_.x,y=_.y,C=e(S.width),P=e(S.height),I=C*C,k=P*P,T=p*p,O=y*y,M=i(T/I+O/k);if(M>1&&(C*=M,P*=M,I=C*C,k=P*P),M=(I*k-I*O-k*T)/(I*O+k*T),e(M)<1e-12&&(M=0),M<0)throw new Error("Cannot create an arc with the given arguments");f=new B(C*y/P,-P*p/C).multiply((m===l?-1:1)*i(M)).rotate(x).add(v),c=new yt().translate(f).rotate(x).scale(C,P),d=c._inverseTransform(s),g=d.getDirectedAngle(c._inverseTransform(a)),!l&&g>0?g-=360:l&&g<0&&(g+=360)}if(o){var A=new qt(s.add(o).divide(2),o.subtract(s).rotate(90),!0),N=new qt(o.add(a).divide(2),a.subtract(o).rotate(90),!0),V=new qt(s,a),F=V.getSide(o);if(f=A.intersect(N,!0),!f){if(!F)return this.lineTo(a);throw new Error("Cannot create an arc with the given arguments")}d=s.subtract(f),g=d.getDirectedAngle(a.subtract(f));var D=V.getSide(f,!0);D===0?g=F*e(g):F===D&&(g+=g<0?360:-360)}if(g){for(var H=1e-5,W=e(g),X=W>=360?4:Math.ceil((W-H)/90),tt=g/X,et=tt*Math.PI/360,j=4/3*Math.sin(et)/(1+Math.cos(et)),K=[],it=0;it<=X;it++){var _=a,nt=null;if(it<X&&(nt=d.rotate(90).multiply(j),c?(_=c._transformPoint(d),nt=c._transformPoint(d.add(nt)).subtract(_)):_=f.add(d)),!it)r.setHandleOut(nt);else{var ut=d.rotate(-90).multiply(j);c&&(ut=c._transformPoint(d.add(ut)).subtract(_)),K.push(new ot(_,ut,nt))}d=d.rotate(tt)}this._add(K)}},lineBy:function(){var t=B.read(arguments),e=n(this)._point;this.lineTo(e.add(t))},curveBy:function(){var t=arguments,e=B.read(t),i=B.read(t),r=L.read(t),s=n(this)._point;this.curveTo(s.add(e),s.add(i),r)},cubicCurveBy:function(){var t=arguments,e=B.read(t),i=B.read(t),r=B.read(t),s=n(this)._point;this.cubicCurveTo(s.add(e),s.add(i),s.add(r))},quadraticCurveBy:function(){var t=arguments,e=B.read(t),i=B.read(t),r=n(this)._point;this.quadraticCurveTo(r.add(e),r.add(i))},arcBy:function(){var t=arguments,e=n(this)._point,i=e.add(B.read(t)),r=L.pick(L.peek(t),!0);typeof r=="boolean"?this.arcTo(i,r):this.arcTo(i,e.add(B.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(n,t){var e=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return vt[e](this._segments,this._closed,this,n,t)},statics:{getBounds:function(n,t,e,i,r,s){var a=n[0];if(!a)return new at;var o=new Array(6),h=a._transformCoordinates(i,new Array(6)),l=h.slice(0,2),f=l.slice(),g=new Array(2);function d(S){S._transformCoordinates(i,o);for(var b=0;b<2;b++)J._addBounds(h[b],h[b+4],o[b+2],o[b],b,s?s[b]:0,l,f,g);var x=h;h=o,o=x}for(var c=1,v=n.length;c<v;c++)d(n[c]);return t&&d(a),new at(l[0],l[1],f[0]-l[0],f[1]-l[1])},getStrokeBounds:function(n,t,e,i,r){var s=e.getStyle(),a=s.hasStroke(),o=s.getStrokeWidth(),h=a&&e._getStrokeMatrix(i,r),l=a&&vt._getStrokePadding(o,h),f=vt.getBounds(n,t,e,i,r,l);if(!a)return f;var g=o/2,d=s.getStrokeJoin(),c=s.getStrokeCap(),v=s.getMiterLimit(),S=new at(new rt(l));function b(C){f=f.include(C)}function x(C){f=f.unite(S.setCenter(C._point.transform(i)))}function m(C,P){P==="round"||C.isSmooth()?x(C):vt._addBevelJoin(C,P,g,v,i,h,b)}function _(C,P){P==="round"?x(C):vt._addSquareCap(C,P,g,i,h,b)}var p=n.length-(t?0:1);if(p>0){for(var y=1;y<p;y++)m(n[y],d);t?m(n[0],d):(_(n[0],c),_(n[n.length-1],c))}return f},_getStrokePadding:function(n,t){if(!t)return[n,n];var e=new B(n,0).transform(t),i=new B(0,n).transform(t),r=e.getAngleInRadians(),s=e.getLength(),a=i.getLength(),o=Math.sin(r),h=Math.cos(r),l=Math.tan(r),f=Math.atan2(a*l,s),g=Math.atan2(a,l*s);return[Math.abs(s*Math.cos(f)*h+a*Math.sin(f)*o),Math.abs(a*Math.sin(g)*h+s*Math.cos(g)*o)]},_addBevelJoin:function(n,t,e,i,r,s,a,o){var h=n.getCurve(),l=h.getPrevious(),f=h.getPoint1().transform(r),g=l.getNormalAtTime(1).multiply(e).transform(s),d=h.getNormalAtTime(0).multiply(e).transform(s),c=g.getDirectedAngle(d);if((c<0||c>=180)&&(g=g.negate(),d=d.negate()),o&&a(f),a(f.add(g)),t==="miter"){var v=new qt(f.add(g),new B(-g.y,g.x),!0).intersect(new qt(f.add(d),new B(-d.y,d.x),!0),!0);v&&f.getDistance(v)<=i*e&&a(v)}a(f.add(d))},_addSquareCap:function(n,t,e,i,r,s,a){var o=n._point.transform(i),h=n.getLocation(),l=h.getNormal().multiply(h.getTime()===0?e:-e).transform(r);t==="square"&&(a&&(s(o.subtract(l)),s(o.add(l))),o=o.add(l.rotate(-90))),s(o.add(l)),s(o.subtract(l))},getHandleBounds:function(n,t,e,i,r){var s=e.getStyle(),a=r.stroke&&s.hasStroke(),o,h;if(a){var l=e._getStrokeMatrix(i,r),f=s.getStrokeWidth()/2,g=f;s.getStrokeJoin()==="miter"&&(g=f*s.getMiterLimit()),s.getStrokeCap()==="square"&&(g=Math.max(g,f*Math.SQRT2)),o=vt._getStrokePadding(f,l),h=vt._getStrokePadding(g,l)}for(var d=new Array(6),c=1/0,v=-c,S=c,b=v,x=0,m=n.length;x<m;x++){var _=n[x];_._transformCoordinates(i,d);for(var p=0;p<6;p+=2){var y=p?o:h,C=y?y[0]:0,P=y?y[1]:0,I=d[p],k=d[p+1],T=I-C,O=I+C,M=k-P,A=k+P;T<c&&(c=T),O>v&&(v=O),M<S&&(S=M),A>b&&(b=A)}}return new at(c,S,v-c,b-S)}}});vt.inject({statics:new function(){var n=.5522847498307936,t=[new ot([-1,0],[0,n],[0,-n]),new ot([0,-1],[-n,0],[n,0]),new ot([1,0],[0,-n],[0,n]),new ot([0,1],[n,0],[-n,0])];function e(r,s,a){var o=L.getNamed(a),h=new vt(o&&(o.insert==!0?z.INSERT:o.insert==!1?z.NO_INSERT:null));return h._add(r),h._closed=s,h.set(o,z.INSERT)}function i(r,s,a){for(var o=new Array(4),h=0;h<4;h++){var l=t[h];o[h]=new ot(l._point.multiply(s).add(r),l._handleIn.multiply(s),l._handleOut.multiply(s))}return e(o,!0,a)}return{Line:function(){var r=arguments;return e([new ot(B.readNamed(r,"from")),new ot(B.readNamed(r,"to"))],!1,r)},Circle:function(){var r=arguments,s=B.readNamed(r,"center"),a=L.readNamed(r,"radius");return i(s,new rt(a),r)},Rectangle:function(){var r=arguments,s=at.readNamed(r,"rectangle"),a=rt.readNamed(r,"radius",0,{readNull:!0}),o=s.getBottomLeft(!0),h=s.getTopLeft(!0),l=s.getTopRight(!0),f=s.getBottomRight(!0),g;if(!a||a.isZero())g=[new ot(o),new ot(h),new ot(l),new ot(f)];else{a=rt.min(a,s.getSize(!0).divide(2));var d=a.width,c=a.height,v=d*n,S=c*n;g=[new ot(o.add(d,0),null,[-v,0]),new ot(o.subtract(0,c),[0,S]),new ot(h.add(0,c),null,[0,-S]),new ot(h.add(d,0),[-v,0],null),new ot(l.subtract(d,0),null,[v,0]),new ot(l.add(0,c),[0,-S],null),new ot(f.subtract(0,c),null,[0,S]),new ot(f.subtract(d,0),[v,0])]}return e(g,!0,r)},RoundRectangle:"#Rectangle",Ellipse:function(){var r=arguments,s=Ut._readEllipse(r);return i(s.center,s.radius,r)},Oval:"#Ellipse",Arc:function(){var r=arguments,s=B.readNamed(r,"from"),a=B.readNamed(r,"through"),o=B.readNamed(r,"to"),h=L.getNamed(r),l=new vt(h&&h.insert==!1&&z.NO_INSERT);return l.moveTo(s),l.arcTo(a,o),l.set(h)},RegularPolygon:function(){for(var r=arguments,s=B.readNamed(r,"center"),a=L.readNamed(r,"sides"),o=L.readNamed(r,"radius"),h=360/a,l=a%3===0,f=new B(0,l?-o:o),g=l?-1:.5,d=new Array(a),c=0;c<a;c++)d[c]=new ot(s.add(f.rotate((c+g)*h)));return e(d,!0,r)},Star:function(){for(var r=arguments,s=B.readNamed(r,"center"),a=L.readNamed(r,"points")*2,o=L.readNamed(r,"radius1"),h=L.readNamed(r,"radius2"),l=360/a,f=new B(0,-1),g=new Array(a),d=0;d<a;d++)g[d]=new ot(s.add(f.rotate(l*d).multiply(d%2?h:o)));return e(g,!0,r)}}}});var ie=Ce.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function n(t,e){var i=e,r=i[0];r&&typeof r[0]=="number"&&(i=[i]);for(var s=e.length-1;s>=0;s--){var a=i[s];i===e&&!(a instanceof vt)&&(i=L.slice(i)),Array.isArray(a)?i[s]=new vt({segments:a,insert:!1}):a instanceof ie&&(i.splice.apply(i,[s,1].concat(a.removeChildren())),a.remove())}return n.base.call(this,t,i)},reduce:function n(t){for(var e=this._children,i=e.length-1;i>=0;i--){var r=e[i].reduce(t);r.isEmpty()&&r.remove()}if(!e.length){var r=new vt(z.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return n.base.call(this)},isClosed:function(){for(var n=this._children,t=0,e=n.length;t<e;t++)if(!n[t]._closed)return!1;return!0},setClosed:function(n){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setClosed(n)},getFirstSegment:function(){var n=this.getFirstChild();return n&&n.getFirstSegment()},getLastSegment:function(){var n=this.getLastChild();return n&&n.getLastSegment()},getCurves:function(){for(var n=this._children,t=[],e=0,i=n.length;e<i;e++)L.push(t,n[e].getCurves());return t},getFirstCurve:function(){var n=this.getFirstChild();return n&&n.getFirstCurve()},getLastCurve:function(){var n=this.getLastChild();return n&&n.getLastCurve()},getArea:function(){for(var n=this._children,t=0,e=0,i=n.length;e<i;e++)t+=n[e].getArea();return t},getLength:function(){for(var n=this._children,t=0,e=0,i=n.length;e<i;e++)t+=n[e].getLength();return t},getPathData:function(n,t){for(var e=this._children,i=[],r=0,s=e.length;r<s;r++){var a=e[r],o=a._matrix;i.push(a.getPathData(n&&!o.isIdentity()?n.appended(o):n,t))}return i.join("")},_hitTestChildren:function n(t,e,i){return n.base.call(this,t,e.class===vt||e.type==="path"?e:L.set({},e,{fill:!1}),i)},_draw:function(n,t,e,i){var r=this._children;if(r.length){t=t.extend({dontStart:!0,dontFinish:!0}),n.beginPath();for(var s=0,a=r.length;s<a;s++)r[s].draw(n,t,i);if(!t.clip){this._setStyles(n,t,e);var o=this._style;o.hasFill()&&(n.fill(o.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&n.stroke()}}},_drawSelected:function(n,t,e){for(var i=this._children,r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;e[a._id]||a._drawSelected(n,o.isIdentity()?t:t.appended(o))}}},new function(){function n(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return L.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var e=n(this,!0);e[t].apply(e,arguments)}},{moveTo:function(){var t=n(this),e=t&&t.isEmpty()?t:new vt(z.NO_INSERT);e!==t&&this.addChild(e),e.moveTo.apply(e,arguments)},moveBy:function(){var t=n(this,!0),e=t&&t.getLastSegment(),i=B.read(arguments);this.moveTo(e?i.add(e._point):i)},closePath:function(t){n(this,!0).closePath(t)}})},L.each(["reverse","flatten","simplify","smooth"],function(n){this[n]=function(t){for(var e=this._children,i,r=0,s=e.length;r<s;r++)i=e[r][n](t)||i;return i}},{}));Ce.inject(new function(){var n=Math.min,t=Math.max,e=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(x){return x._children||[x]}function s(x,m){var _=x.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(m){for(var p=r(_),y=0,C=p.length;y<C;y++){var x=p[y];!x._closed&&!x.isEmpty()&&(x.closePath(1e-12),x.getFirstSegment().setHandleIn(0,0),x.getLastSegment().setHandleOut(0,0))}_=_.resolveCrossings().reorient(_.getFillRule()==="nonzero",!0)}return _}function a(x,m,_,p,y){var C=new ie(z.NO_INSERT);return C.addChildren(x,!0),C=C.reduce({simplify:m}),y&&y.insert==!1||C.insertAbove(p&&_.isSibling(p)&&_.getIndex()<p.getIndex()?p:_),C.copyAttributes(_,!0),C}function o(x){return x.hasOverlap()||x.isCrossing()}function h(x,m,_,p){if(p&&(p.trace==!1||p.stroke)&&/^(subtract|intersect)$/.test(_))return l(x,m,_);var y=s(x,!0),C=m&&x!==m&&s(m,!0),P=i[_];P[_]=!0,C&&(P.subtract||P.exclude)^(C.isClockwise()^y.isClockwise())&&C.reverse();var I=c(le.expand(y.getIntersections(C,o))),k=r(y),T=C&&r(C),O=[],M=[],A;function N(nt){for(var ut=0,lt=nt.length;ut<lt;ut++){var ft=nt[ut];L.push(O,ft._segments),L.push(M,ft.getCurves()),ft._overlapsOnly=!0}}function V(nt){for(var ut=[],lt=0,ft=nt&&nt.length;lt<ft;lt++)ut.push(M[nt[lt]]);return ut}if(I.length){N(k),T&&N(T);for(var F=new Array(M.length),D=0,H=M.length;D<H;D++)F[D]=M[D].getValues();for(var W=Te.findCurveBoundsCollisions(F,F,0,!0),X={},D=0;D<M.length;D++){var tt=M[D],et=tt._path._id,j=X[et]=X[et]||{};j[tt.getIndex()]={hor:V(W[D].hor),ver:V(W[D].ver)}}for(var D=0,H=I.length;D<H;D++)S(I[D]._segment,y,C,X,P);for(var D=0,H=O.length;D<H;D++){var K=O[D],it=K._intersection;K._winding||S(K,y,C,X,P),it&&it._overlap||(K._path._overlapsOnly=!1)}A=b(O,P)}else A=d(T?k.concat(T):k.slice(),function(nt){return!!P[nt]});return a(A,!0,x,m,p)}function l(x,m,_){var p=s(x),y=s(m),C=p.getIntersections(y,o),P=_==="subtract",I=_==="divide",k={},T=[];function O(N){if(!k[N._id]&&(I||y.contains(N.getPointAt(N.getLength()/2))^P))return T.unshift(N),k[N._id]=!0}for(var M=C.length-1;M>=0;M--){var A=C[M].split();A&&(O(A)&&A.getFirstSegment().setHandleIn(0,0),p.getLastSegment().setHandleOut(0,0))}return O(p),a(T,!1,x,m)}function f(x,m){for(var _=x;_;){if(_===m)return;_=_._previous}for(;x._next&&x._next!==m;)x=x._next;if(!x._next){for(;m._previous;)m=m._previous;x._next=m,m._previous=x}}function g(x){for(var m=x.length-1;m>=0;m--)x[m].clearHandles()}function d(x,m,_){var p=x&&x.length;if(p){var y=L.each(x,function(W,X){this[W._id]={container:null,winding:W.isClockwise()?1:-1,index:X}},{}),C=x.slice().sort(function(W,X){return e(X.getArea())-e(W.getArea())}),P=C[0],I=Te.findItemBoundsCollisions(C,null,mt.GEOMETRIC_EPSILON);_==null&&(_=P.isClockwise());for(var k=0;k<p;k++){var T=C[k],O=y[T._id],M=0,A=I[k];if(A){for(var N=null,V=A.length-1;V>=0;V--)if(A[V]<k){N=N||T.getInteriorPoint();var F=C[A[V]];if(F.contains(N)){var D=y[F._id];M=D.winding,O.winding+=M,O.container=D.exclude?D.container:F;break}}}if(m(O.winding)===m(M))O.exclude=!0,x[O.index]=null;else{var H=O.container;T.setClockwise(H?!H.isClockwise():_)}}}return x}function c(x,m,_){var p=m&&[],y=1e-8,C=1-y,P=!1,I=_||[],k=_&&{},T,O,M;function A(ut){return ut._path._id+"."+ut._segment1._index}for(var N=(_&&_.length)-1;N>=0;N--){var V=_[N];V._path&&(k[A(V)]=!0)}for(var N=x.length-1;N>=0;N--){var F=x[N],D=F._time,H=D,W=m&&!m(F),V=F._curve,X;if(V&&(V!==O?(P=!V.hasHandles()||k&&k[A(V)],T=[],M=null,O=V):M>=y&&(D/=M)),W){T&&T.push(F);continue}else m&&p.unshift(F);if(M=H,D<y)X=V._segment1;else if(D>C)X=V._segment2;else{var tt=V.divideAtTime(D,!0);P&&I.push(V,tt),X=tt._segment1;for(var et=T.length-1;et>=0;et--){var j=T[et];j._time=(j._time-D)/(1-D)}}F._setSegment(X);var K=X._intersection,it=F._intersection;if(K){f(K,it);for(var nt=K;nt;)f(nt._intersection,K),nt=nt._next}else X._intersection=it}return _||g(I),p||x}function v(x,m,_,p,y){var C=Array.isArray(m)?m:m[_?"hor":"ver"],P=_?1:0,I=P^1,k=[x.x,x.y],T=k[P],O=k[I],M=1e-9,A=1e-6,N=T-M,V=T+M,F=0,D=0,H=0,W=0,X=!1,tt=!1,et=1,j=[],K,it;function nt(It){var St=It[I+0],Gt=It[I+6];if(!(O<n(St,Gt)||O>t(St,Gt))){var jt=It[P+0],ne=It[P+2],ge=It[P+4],pe=It[P+6];if(St===Gt){(jt<V&&pe>N||pe<V&&jt>N)&&(X=!0);return}var de=O===St?0:O===Gt||N>t(jt,ne,ge,pe)||V<n(jt,ne,ge,pe)?1:J.solveCubic(It,I,O,j,0,1)>0?j[0]:1,he=de===0?jt:de===1?pe:J.getPoint(It,de)[_?"y":"x"],Wt=St>Gt?1:-1,Qt=K[I]>K[I+6]?1:-1,me=K[P+6];return O!==St?(he<N?H+=Wt:he>V?W+=Wt:X=!0,he>T-A&&he<T+A&&(et/=2)):(Wt!==Qt?jt<N?H+=Wt:jt>V&&(W+=Wt):jt!=me&&(me<V&&he>V?(W+=Wt,X=!0):me>N&&he<N&&(H+=Wt,X=!0)),et/=4),K=It,!y&&he>N&&he<V&&J.getTangent(It,de)[_?"x":"y"]===0&&v(x,m,!_,p,!0)}}function ut(It){var St=It[I+0],Gt=It[I+2],jt=It[I+4],ne=It[I+6];if(O<=t(St,Gt,jt,ne)&&O>=n(St,Gt,jt,ne)){for(var ge=It[P+0],pe=It[P+2],de=It[P+4],he=It[P+6],Wt=N>t(ge,pe,de,he)||V<n(ge,pe,de,he)?[It]:J.getMonoCurves(It,_),Qt,me=0,Ie=Wt.length;me<Ie;me++)if(Qt=nt(Wt[me]))return Qt}}for(var lt=0,ft=C.length;lt<ft;lt++){var dt=C[lt],_t=dt._path,wt=dt.getValues(),Dt;if((!lt||C[lt-1]._path!==_t)&&(K=null,_t._closed||(it=J.getValues(_t.getLastCurve().getSegment2(),dt.getSegment1(),null,!p),it[I]!==it[I+6]&&(K=it)),!K)){K=wt;for(var Ht=_t.getLastCurve();Ht&&Ht!==dt;){var ht=Ht.getValues();if(ht[I]!==ht[I+6]){K=ht;break}Ht=Ht.getPrevious()}}if(Dt=ut(wt))return Dt;if(lt+1===ft||C[lt+1]._path!==_t){if(it&&(Dt=ut(it)))return Dt;X&&!H&&!W&&(H=W=_t.isClockwise(p)^_?1:-1),F+=H,D+=W,H=W=0,X&&(tt=!0,X=!1),it=null}}return F=e(F),D=e(D),{winding:t(F,D),windingL:F,windingR:D,quality:et,onPath:tt}}function S(x,m,_,p,y){var C=[],P=x,I=0,M;do{var k=x.getCurve();if(k){var T=k.getLength();C.push({segment:x,curve:k,length:T}),I+=T}x=x.getNext()}while(x&&!x._intersection&&x!==P);for(var O=[.5,.25,.75],M={winding:0,quality:-1},A=.001,N=1-A,V=0;V<O.length&&M.quality<.5;V++)for(var T=I*O[V],F=0,D=C.length;F<D;F++){var H=C[F],W=H.length;if(T<=W){var k=H.curve,X=k._path,tt=X._parent,et=tt instanceof ie?tt:X,j=mt.clamp(k.getTimeAt(T),A,N),K=k.getPointAtTime(j),it=e(k.getTangentAtTime(j).y)<Math.SQRT1_2,nt=null;if(y.subtract&&_){var ut=et===m?_:m,lt=ut._getWinding(K,it,!0);if(et===m&&lt.winding||et===_&&!lt.winding){if(lt.quality<1)continue;nt={winding:0,quality:1}}}nt=nt||v(K,p[X._id][k.getIndex()],it,!0),nt.quality>M.quality&&(M=nt);break}T-=W}for(var F=C.length-1;F>=0;F--)C[F].segment._winding=M}function b(x,m){var _=[],p;function y(ft){var dt;return!!(ft&&!ft._visited&&(!m||m[(dt=ft._winding||{}).winding]&&!(m.unite&&dt.winding===2&&dt.windingL&&dt.windingR)))}function C(ft){if(ft){for(var dt=0,_t=p.length;dt<_t;dt++)if(ft===p[dt])return!0}return!1}function P(ft){for(var dt=ft._segments,_t=0,wt=dt.length;_t<wt;_t++)dt[_t]._visited=!0}function I(ft,dt){var _t=ft._intersection,wt=_t,Dt=[];dt&&(p=[ft]);function Ht(ht,It){for(;ht&&ht!==It;){var St=ht._segment,Gt=St&&St._path;if(Gt){var jt=St.getNext()||Gt.getFirstSegment(),ne=jt._intersection;St!==ft&&(C(St)||C(jt)||jt&&y(St)&&(y(jt)||ne&&y(ne._segment)))&&Dt.push(St),dt&&p.push(St)}ht=ht._next}}if(_t){for(Ht(_t);_t&&_t._previous;)_t=_t._previous;Ht(_t,wt)}return Dt}x.sort(function(ft,dt){var _t=ft._intersection,wt=dt._intersection,Dt=!!(_t&&_t._overlap),Ht=!!(wt&&wt._overlap),ht=ft._path,It=dt._path;return Dt^Ht?Dt?1:-1:!_t^!wt?_t?1:-1:ht!==It?ht._id-It._id:ft._index-dt._index});for(var k=0,T=x.length;k<T;k++){var O=x[k],M=y(O),A=null,N=!1,V=!0,F=[],D,H,W;if(M&&O._path._overlapsOnly){var X=O._path,tt=O._intersection._segment._path;X.compare(tt)&&(X.getArea()&&_.push(X.clone(!1)),P(X),P(tt),M=!1)}for(;M;){var et=!A,j=I(O,et),K=j.shift(),N=!et&&(C(O)||C(K)),it=!N&&K;if(et&&(A=new vt(z.NO_INSERT),D=null),N){(O.isFirst()||O.isLast())&&(V=O._path._closed),O._visited=!0;break}if(it&&D&&(F.push(D),D=null),D||(it&&j.push(O),D={start:A._segments.length,crossings:j,visited:H=[],handleIn:W}),it&&(O=K),!y(O)){A.removeSegments(D.start);for(var nt=0,ut=H.length;nt<ut;nt++)H[nt]._visited=!1;H.length=0;do O=D&&D.crossings.shift(),(!O||!O._path)&&(O=null,D=F.pop(),D&&(H=D.visited,W=D.handleIn));while(D&&!y(O));if(!O)break}var lt=O.getNext();A.add(new ot(O._point,W,lt&&O._handleOut)),O._visited=!0,H.push(O),O=lt||O._path.getFirstSegment(),W=lt&&lt._handleIn}N&&(V&&(A.getFirstSegment().setHandleIn(W),A.setClosed(V)),A.getArea()!==0&&_.push(A))}return _}return{_getWinding:function(x,m,_){return v(x,this.getCurves(),m,_)},unite:function(x,m){return h(this,x,"unite",m)},intersect:function(x,m){return h(this,x,"intersect",m)},subtract:function(x,m){return h(this,x,"subtract",m)},exclude:function(x,m){return h(this,x,"exclude",m)},divide:function(x,m){return m&&(m.trace==!1||m.stroke)?l(this,x,"divide"):a([this.subtract(x,m),this.intersect(x,m)],!0,this,x,m)},resolveCrossings:function(){var x=this._children,m=x||[this];function _(D,H){var W=D&&D._intersection;return W&&W._overlap&&W._path===H}var p=!1,y=!1,C=this.getIntersections(null,function(D){return D.hasOverlap()&&(p=!0)||D.isCrossing()&&(y=!0)}),P=p&&y&&[];if(C=le.expand(C),p)for(var I=c(C,function(D){return D.hasOverlap()},P),k=I.length-1;k>=0;k--){var T=I[k],O=T._path,M=T._segment,A=M.getPrevious(),N=M.getNext();_(A,O)&&_(N,O)&&(M.remove(),A._handleOut._set(0,0),N._handleIn._set(0,0),A!==M&&!A.getCurve().hasLength()&&(N._handleIn.set(A._handleIn),A.remove()))}y&&(c(C,p&&function(D){var H=D.getCurve(),W=D.getSegment(),X=D._intersection,tt=X._curve,et=X._segment;if(H&&tt&&H._path&&tt._path)return!0;W&&(W._intersection=null),et&&(et._intersection=null)},P),P&&g(P),m=b(L.each(m,function(D){L.push(this,D._segments)},[])));var V=m.length,F;return V>1&&x?(m!==x&&this.setChildren(m),F=this):V===1&&!x&&(m[0]!==this&&this.setSegments(m[0].removeSegments()),F=this),F||(F=new ie(z.NO_INSERT),F.addChildren(m),F=F.reduce(),F.copyAttributes(this),this.replaceWith(F)),F},reorient:function(x,m){var _=this._children;return _&&_.length?this.setChildren(d(this.removeChildren(),function(p){return!!(x?p:p&1)},m)):m!==G&&this.setClockwise(m),this},getInteriorPoint:function(){var x=this.getBounds(),m=x.getCenter(!0);if(!this.contains(m)){for(var _=this.getCurves(),p=m.y,y=[],C=[],P=0,I=_.length;P<I;P++){var k=_[P].getValues(),T=k[1],O=k[3],M=k[5],A=k[7];if(p>=n(T,O,M,A)&&p<=t(T,O,M,A))for(var N=J.getMonoCurves(k),V=0,F=N.length;V<F;V++){var D=N[V],H=D[1],W=D[7];if(H!==W&&(p>=H&&p<=W||p>=W&&p<=H)){var X=p===H?D[0]:p===W?D[6]:J.solveCubic(D,1,p,C,0,1)===1?J.getPoint(D,C[0]).x:(D[0]+D[6])/2;y.push(X)}}}y.length>1&&(y.sort(function(tt,et){return tt-et}),m.x=(y[0]+y[1])/2)}return m}}});var si=L.extend({_class:"PathFlattener",initialize:function(n,t,e,i,r){var s=[],a=[],o=0,h=1/(e||32),l=n._segments,f=l[0],g;function d(b,x){var m=J.getValues(b,x,r);s.push(m),c(m,b._index,0,1)}function c(b,x,m,_){if(_-m>h&&!(i&&J.isStraight(b))&&!J.isFlatEnough(b,t||.25)){var p=J.subdivide(b,.5),y=(m+_)/2;c(p[0],x,m,y),c(p[1],x,y,_)}else{var C=b[6]-b[0],P=b[7]-b[1],I=Math.sqrt(C*C+P*P);I>0&&(o+=I,a.push({offset:o,curve:b,index:x,time:_}))}}for(var v=1,S=l.length;v<S;v++)g=l[v],d(f,g),f=g;n._closed&&d(g||f,l[0]),this.curves=s,this.parts=a,this.length=o,this.index=0},_get:function(n){for(var t=this.parts,e=t.length,i,r=this.index;i=r,!(!r||t[--r].offset<n););for(;i<e;i++){var s=t[i];if(s.offset>=n){this.index=i;var a=t[i-1],o=a&&a.index===s.index?a.time:0,h=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(n-h)/(s.offset-h)}}}return{index:t[e-1].index,time:1}},drawPart:function(n,t,e){for(var i=this._get(t),r=this._get(e),s=i.index,a=r.index;s<=a;s++){var o=J.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&n.moveTo(o[0],o[1]),n.bezierCurveTo.apply(n,o.slice(2))}}},L.each(J._evaluateMethods,function(n){this[n+"At"]=function(t){var e=this._get(t);return J[n](this.curves[e.index],e.time)}},{})),qe=L.extend({initialize:function(n){for(var t=this.points=[],e=n._segments,i=n._closed,r=0,s,a=e.length;r<a;r++){var o=e[r].point;(!s||!s.equals(o))&&t.push(s=o.clone())}i&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=i},fit:function(n){var t=this.points,e=t.length,i=null;return e>0&&(i=[new ot(t[0])],e>1&&(this.fitCubic(i,n,0,e-1,t[1].subtract(t[0]),t[e-2].subtract(t[e-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(n,t,e,i,r,s){var a=this.points;if(i-e===1){var o=a[e],h=a[i],l=o.getDistance(h)/3;this.addCurve(n,[o,o.add(r.normalize(l)),h.add(s.normalize(l)),h]);return}for(var f=this.chordLengthParameterize(e,i),g=Math.max(t,t*t),d,c=!0,v=0;v<=4;v++){var S=this.generateBezier(e,i,f,r,s),b=this.findMaxError(e,i,S,f);if(b.error<t&&c){this.addCurve(n,S);return}if(d=b.index,b.error>=g)break;c=this.reparameterize(e,i,f,S),g=b.error}var x=a[d-1].subtract(a[d+1]);this.fitCubic(n,t,e,d,r,x),this.fitCubic(n,t,d,i,x.negate(),s)},addCurve:function(n,t){var e=n[n.length-1];e.setHandleOut(t[1].subtract(t[0])),n.push(new ot(t[3],t[2].subtract(t[3])))},generateBezier:function(n,t,e,i,r){for(var s=1e-12,a=Math.abs,o=this.points,h=o[n],l=o[t],f=[[0,0],[0,0]],g=[0,0],d=0,c=t-n+1;d<c;d++){var v=e[d],S=1-v,b=3*v*S,x=S*S*S,m=b*S,_=b*v,p=v*v*v,y=i.normalize(m),C=r.normalize(_),P=o[n+d].subtract(h.multiply(x+m)).subtract(l.multiply(_+p));f[0][0]+=y.dot(y),f[0][1]+=y.dot(C),f[1][0]=f[0][1],f[1][1]+=C.dot(C),g[0]+=y.dot(P),g[1]+=C.dot(P)}var I=f[0][0]*f[1][1]-f[1][0]*f[0][1],k,T;if(a(I)>s){var O=f[0][0]*g[1]-f[1][0]*g[0],M=g[0]*f[1][1]-g[1]*f[0][1];k=M/I,T=O/I}else{var A=f[0][0]+f[0][1],N=f[1][0]+f[1][1];k=T=a(A)>s?g[0]/A:a(N)>s?g[1]/N:0}var V=l.getDistance(h),F=s*V,D,H;if(k<F||T<F)k=T=V/3;else{var W=l.subtract(h);D=i.normalize(k),H=r.normalize(T),D.dot(W)-H.dot(W)>V*V&&(k=T=V/3,D=H=null)}return[h,h.add(D||i.normalize(k)),l.add(H||r.normalize(T)),l]},reparameterize:function(n,t,e,i){for(var r=n;r<=t;r++)e[r-n]=this.findRoot(i,this.points[r],e[r-n]);for(var r=1,s=e.length;r<s;r++)if(e[r]<=e[r-1])return!1;return!0},findRoot:function(n,t,e){for(var i=[],r=[],s=0;s<=2;s++)i[s]=n[s+1].subtract(n[s]).multiply(3);for(var s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var a=this.evaluate(3,n,e),o=this.evaluate(2,i,e),h=this.evaluate(1,r,e),l=a.subtract(t),f=o.dot(o)+l.dot(h);return mt.isMachineZero(f)?e:e-l.dot(o)/f},evaluate:function(n,t,e){for(var i=t.slice(),r=1;r<=n;r++)for(var s=0;s<=n-r;s++)i[s]=i[s].multiply(1-e).add(i[s+1].multiply(e));return i[0]},chordLengthParameterize:function(n,t){for(var e=[0],i=n+1;i<=t;i++)e[i-n]=e[i-n-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=t-n;i<=r;i++)e[i]/=e[r];return e},findMaxError:function(n,t,e,i){for(var r=Math.floor((t-n+1)/2),s=0,a=n+1;a<t;a++){var o=this.evaluate(3,e,i[a-n]),h=o.subtract(this.points[a]),l=h.x*h.x+h.y*h.y;l>=s&&(s=l,r=a)}return{error:s,index:r}}}),ke=z.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&L.isPlainObject(t)&&t.x===G&&t.y===G;this._initialize(e&&t,!e&&B.read(arguments))},_equals:function(n){return this._content===n._content},copyContent:function(n){this.setContent(n._content)},getContent:function(){return this._content},setContent:function(n){this._content=""+n,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),ai=ke.extend({_class:"PointText",initialize:function(){ke.apply(this,arguments)},getPoint:function(){var n=this._matrix.getTranslation();return new se(n.x,n.y,this,"setPoint")},setPoint:function(){var n=B.read(arguments);this.translate(n.subtract(this._matrix.getTranslation()))},_draw:function(n,t,e){if(this._content){this._setStyles(n,t,e);var i=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),h=n.shadowColor;n.font=r.getFontStyle(),n.textAlign=r.getJustification();for(var l=0,f=i.length;l<f;l++){n.shadowColor=h;var g=i[l];s&&(n.fillText(g,0,0),n.shadowColor="rgba(0,0,0,0)"),a&&n.strokeText(g,0,0),n.translate(0,o)}}},_getBounds:function(n,t){var e=this._style,i=this._lines,r=i.length,s=e.getJustification(),a=e.getLeading(),o=this.getView().getTextWidth(e.getFontStyle(),i),h=0;s!=="left"&&(h-=o/(s==="center"?2:1));var l=new at(h,r?-.75*a:0,o,r*a);return n?n._transformBounds(l,l):l}}),Rt=L.extend(new function(){var n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},e={transparent:[0,0,0,0]},i;function r(o){var h=o.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||o.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),l="rgb",f;if(h){var g=h[4]?4:3;f=new Array(g);for(var d=0;d<g;d++){var c=h[d+1];f[d]=parseInt(c.length==1?c+c:c,16)/255}}else if(h=o.match(/^(rgb|hsl)a?\((.*)\)$/)){l=h[1],f=h[2].trim().split(/[,\s]+/g);for(var v=l==="hsl",d=0,S=Math.min(f.length,4);d<S;d++){var b=f[d],c=parseFloat(b);if(v)if(d===0){var x=b.match(/([a-z]*)$/)[1];c*={turn:360,rad:180/Math.PI,grad:.9}[x]||1}else d<3&&(c/=100);else d<3&&(c/=/%$/.test(b)?100:255);f[d]=c}}else{var m=e[o];if(!m)if(Ct){i||(i=ae.getContext(1,1,{willReadFrequently:!0}),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=o,i.fillRect(0,0,1,1);var _=i.getImageData(0,0,1,1).data;m=e[o]=[_[0]/255,_[1]/255,_[2]/255]}else m=[0,0,0];f=m.slice()}return[l,f]}var s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(o,h,l){var f=Math.max(o,h,l),g=Math.min(o,h,l),d=f-g,c=d===0?0:(f==o?(h-l)/d+(h<l?6:0):f==h?(l-o)/d+2:(o-h)/d+4)*60;return[c,f===0?0:d/f,f]},"hsb-rgb":function(o,h,l){o=(o/60%6+6)%6;var g=Math.floor(o),f=o-g,g=s[g],d=[l,l*(1-h),l*(1-h*f),l*(1-h*(1-f))];return[d[g[0]],d[g[1]],d[g[2]]]},"rgb-hsl":function(o,h,l){var f=Math.max(o,h,l),g=Math.min(o,h,l),d=f-g,c=d===0,v=c?0:(f==o?(h-l)/d+(h<l?6:0):f==h?(l-o)/d+2:(o-h)/d+4)*60,S=(f+g)/2,b=c?0:S<.5?d/(f+g):d/(2-f-g);return[v,b,S]},"hsl-rgb":function(o,h,l){if(o=(o/360%1+1)%1,h===0)return[l,l,l];for(var f=[o+1/3,o,o-1/3],g=l<.5?l*(1+h):l+h-l*h,d=2*l-g,c=[],v=0;v<3;v++){var S=f[v];S<0&&(S+=1),S>1&&(S-=1),c[v]=6*S<1?d+(g-d)*6*S:2*S<1?g:3*S<2?d+(g-d)*(2/3-S)*6:d}return c},"rgb-gray":function(o,h,l){return[o*.2989+h*.587+l*.114]},"gray-rgb":function(o){return[o,o,o]},"gray-hsb":function(o){return[0,0,o]},"gray-hsl":function(o){return[0,0,o]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return L.each(n,function(o,h){t[h]=[],L.each(o,function(l,f){var g=L.capitalize(l),d=/^(hue|saturation)$/.test(l),c=t[h][f]=h==="gradient"?l==="gradient"?function(v){var S=this._components[0];return v=Ne.read(Array.isArray(v)?v:arguments,0,{readNull:!0}),S!==v&&(S&&S._removeOwner(this),v&&v._addOwner(this)),v}:function(){return B.read(arguments,0,{readNull:l==="highlight",clone:!0})}:function(v){return v==null||isNaN(v)?0:+v};this["get"+g]=function(){return this._type===h||d&&/^hs[bl]$/.test(this._type)?this._components[f]:this._convert(h)[f]},this["set"+g]=function(v){this._type!==h&&!(d&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(h),this._properties=n[h],this._type=h),this._components[f]=c.call(this,v),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(h){var l=arguments,f=this.__read,g=0,d,c,v,S;Array.isArray(h)&&(l=h,h=l[0]);var b=h!=null&&typeof h;if(b==="string"&&h in n&&(d=h,h=l[1],Array.isArray(h)?(c=h,v=l[2]):(f&&(g=1),l=L.slice(l,1),b=typeof h)),!c){if(S=b==="number"?l:b==="object"&&h.length!=null?h:null,S){d||(d=S.length>=3?"rgb":"gray");var x=n[d].length;v=S[x],f&&(g+=S===arguments?x+(v!=null?1:0):1),S.length>x&&(S=L.slice(S,0,x))}else if(b==="string"){var m=r(h);d=m[0],c=m[1],c.length===4&&(v=c[3],c.length--)}else if(b==="object")if(h.constructor===o){if(d=h._type,c=h._components.slice(),v=h._alpha,d==="gradient")for(var _=1,p=c.length;_<p;_++){var y=c[_];y&&(c[_]=y.clone())}}else if(h.constructor===Ne)d="gradient",S=l;else{d="hue"in h?"lightness"in h?"hsl":"hsb":"gradient"in h||"stops"in h||"radial"in h?"gradient":"gray"in h?"gray":"rgb";var C=n[d],P=t[d];this._components=c=[];for(var _=0,p=C.length;_<p;_++){var I=h[C[_]];I==null&&!_&&d==="gradient"&&"stops"in h&&(I={stops:h.stops,radial:h.radial}),I=P[_].call(this,I),I!=null&&(c[_]=I)}v=h.alpha}f&&d&&(g=1)}if(this._type=d||"rgb",!c){this._components=c=[];for(var P=t[this._type],_=0,p=P.length;_<p;_++){var I=P[_].call(this,S&&S[_]);I!=null&&(c[_]=I)}}return this._components=c,this._properties=n[this._type],this._alpha=v,f&&(this.__read=g),this},set:"#initialize",_serialize:function(o,h){var l=this.getComponents();return L.serialize(/^(gray|rgb)$/.test(this._type)?l:[this._type].concat(l),o,!0,h)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(o){var h;return this._type===o?this._components.slice():(h=a[this._type+"-"+o])?h.apply(this,this._components):a["rgb-"+o].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(o){return new Rt(o,this._convert(o),this._alpha)},getType:function(){return this._type},setType:function(o){this._components=this._convert(o),this._properties=n[o],this._type=o},getComponents:function(){var o=this._components.slice();return this._alpha!=null&&o.push(this._alpha),o},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(o){this._alpha=o==null?null:Math.min(Math.max(o,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(o){var h=L.isPlainValue(o,!0)?Rt.read(arguments):o;return h===this||h&&this._class===h._class&&this._type===h._type&&this.getAlpha()===h.getAlpha()&&L.equals(this._components,h._components)||!1},toString:function(){for(var o=this._properties,h=[],l=this._type==="gradient",f=te.instance,g=0,d=o.length;g<d;g++){var c=this._components[g];c!=null&&h.push(o[g]+": "+(l?c:f.number(c)))}return this._alpha!=null&&h.push("alpha: "+f.number(this._alpha)),"{ "+h.join(", ")+" }"},toCSS:function(o){var h=this._convert("rgb"),l=o||this._alpha==null?1:this._alpha;function f(g){return Math.round((g<0?0:g>1?1:g)*255)}return h=[f(h[0]),f(h[1]),f(h[2])],l<1&&h.push(l<0?0:l),o?"#"+((1<<24)+(h[0]<<16)+(h[1]<<8)+h[2]).toString(16).slice(1):(h.length==4?"rgba(":"rgb(")+h.join(",")+")"},toCanvasStyle:function(o,h){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var l=this._components,f=l[0],g=f._stops,d=l[1],c=l[2],v=l[3],S=h&&h.inverted(),b;if(S&&(d=S._transformPoint(d),c=S._transformPoint(c),v&&(v=S._transformPoint(v))),f._radial){var x=c.getDistance(d);if(v){var m=v.subtract(d);m.getLength()>x&&(v=d.add(m.normalize(x-.1)))}var _=v||d;b=o.createRadialGradient(_.x,_.y,0,d.x,d.y,x)}else b=o.createLinearGradient(d.x,d.y,c.x,c.y);for(var p=0,y=g.length;p<y;p++){var C=g[p],P=C._offset;b.addColorStop(P??p/(y-1),C._color.toCanvasStyle())}return this._canvasStyle=b},transform:function(o){if(this._type==="gradient"){for(var h=this._components,l=1,f=h.length;l<f;l++){var g=h[l];o._transformPoint(g,g,!0)}this._changed()}},statics:{_types:n,random:function(){var o=Math.random;return new Rt(o(),o(),o())},_setOwner:function(o,h,l){return o&&(o._owner&&h&&o._owner!==h&&(o=o.clone()),!o._owner^!h&&(o._owner=h||null,o._setter=l||null)),o}}})},new function(){var n={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return L.each(n,function(t,e){this[e]=function(i){i=Rt.read(arguments);for(var r=this._type,s=this._components,a=i._convert(r),o=0,h=s.length;o<h;o++)a[o]=t(s[o],a[o]);return new Rt(r,a,this._alpha!=null?t(this._alpha,i.getAlpha()):null)}},{})}),Ne=L.extend({_class:"Gradient",initialize:function(t,e){this._id=Ae.get(),t&&L.isPlainObject(t)&&(this.set(t),t=e=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof e=="string"&&e==="radial"||e||!1)},_serialize:function(n,t){return t.add(this,function(){return L.serialize([this._stops,this._radial],n,!0,t)})},_changed:function(){for(var n=0,t=this._owners&&this._owners.length;n<t;n++)this._owners[n]._changed()},_addOwner:function(n){this._owners||(this._owners=[]),this._owners.push(n)},_removeOwner:function(n){var t=this._owners?this._owners.indexOf(n):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=G))},clone:function(){for(var n=[],t=0,e=this._stops.length;t<e;t++)n[t]=this._stops[t].clone();return new Ne(n,this._radial)},getStops:function(){return this._stops},setStops:function(n){if(n.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var e=0,i=t.length;e<i;e++)t[e]._owner=G;t=this._stops=Ze.readList(n,0,{clone:!0});for(var e=0,i=t.length;e<i;e++)t[e]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(n){this._radial=n,this._changed()},equals:function(n){if(n===this)return!0;if(n&&this._class===n._class){var t=this._stops,e=n._stops,i=t.length;if(i===e.length){for(var r=0;r<i;r++)if(!t[r].equals(e[r]))return!1;return!0}}return!1}}),Ze=L.extend({_class:"GradientStop",initialize:function(t,e){var i=t,r=e;typeof t=="object"&&e===G&&(Array.isArray(t)&&typeof t[0]!="number"?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new Ze(this._color.clone(),this._offset)},_serialize:function(n,t){var e=this._color,i=this._offset;return L.serialize(i==null?[e]:[e,i],n,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(n){this._offset=n,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Rt._setOwner(this._color,null),this._color=Rt._setOwner(Rt.read(arguments,0),this,"setColor"),this._changed()},equals:function(n){return n===this||n&&this._class===n._class&&this._color.equals(n._color)&&this._offset==n._offset||!1}}),Ge=L.extend(new function(){var n={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new B,selectedColor:null},t=L.set({},n,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),e=L.set({},t,{fillColor:new Rt}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},s={_class:"Style",beans:!0,initialize:function(o,h,l){this._values={},this._owner=h,this._project=h&&h._project||l||Bt.project,this._defaults=!h||h instanceof Kt?t:h instanceof ke?e:n,o&&this.set(o)}};return L.each(t,function(a,o){var h=/Color$/.test(o),l=o==="shadowOffset",f=L.capitalize(o),g=i[o],d="set"+f,c="get"+f;s[d]=function(v){var S=this._owner,b=S&&S._children,x=b&&b.length>0&&!(S instanceof ie);if(x)for(var m=0,_=b.length;m<_;m++)b[m]._style[d](v);if((o==="selectedColor"||!x)&&o in this._defaults){var p=this._values[o];p!==v&&(h&&(p&&(Rt._setOwner(p,null),p._canvasStyle=null),v&&v.constructor===Rt&&(v=Rt._setOwner(v,S,x&&d))),this._values[o]=v,S&&S._changed(g||129))}},s[c]=function(v){var S=this._owner,b=S&&S._children,x=b&&b.length>0&&!(S instanceof ie),m;if(x&&!v)for(var _=0,p=b.length;_<p;_++){var y=b[_]._style[c]();if(!_)m=y;else if(!L.equals(m,y))return G}else if(o in this._defaults){var m=this._values[o];if(m===G)m=this._defaults[o],m&&m.clone&&(m=m.clone());else{var C=h?Rt:l?B:null;C&&!(m&&m.constructor===C)&&(this._values[o]=m=C.read([m],0,{readNull:!0,clone:!0}))}}return m&&h&&(m=Rt._setOwner(m,S,x&&d)),m},r[c]=function(v){return this._style[c](v)},r[d]=function(v){this._style[d](v)}}),L.each({Font:"FontFamily",WindingRule:"FillRule"},function(a,o){var h="get"+o,l="set"+o;s[h]=r[h]="#get"+a,s[l]=r[l]="#set"+a}),z.inject(r),s},{set:function(n){var t=n instanceof Ge,e=t?n._values:n;if(e){for(var i in e)if(i in this._defaults){var r=e[i];this[i]=r&&t&&r.clone?r.clone():r}}},equals:function(n){function t(e,i,r){var s=e._values,a=i._values,o=i._defaults;for(var h in s){var l=s[h],f=a[h];if(!(r&&h in a)&&!L.equals(l,f===G?o[h]:f))return!1}return!0}return n===this||n&&this._class===n._class&&t(this,n)&&t(n,this,!0)||!1},_dispose:function(){var n;n=this.getFillColor(),n&&(n._canvasStyle=null),n=this.getStrokeColor(),n&&(n._canvasStyle=null),n=this.getShadowColor(),n&&(n._canvasStyle=null)},hasFill:function(){var n=this.getFillColor();return!!n&&n.alpha>0},hasStroke:function(){var n=this.getStrokeColor();return!!n&&n.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var n=this.getShadowColor();return!!n&&n.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var n=this.getFontSize();return this.getFontWeight()+" "+n+(/[a-z]/i.test(n+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function n(){var t=n.base.call(this),e=this.getFontSize();return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),t??e*1.2}}),kt=new function(){function n(t,e,i,r){for(var s=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var h=s[o],l=h?h+a:e;if(l in t){if(i)t[l]=r;else return t[l];break}}}return{getStyles:function(t){var e=t&&t.nodeType!==9?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i=t.ownerDocument,r=i.body,s=i.documentElement,a;try{a=t.getBoundingClientRect()}catch{a={left:0,top:0,width:0,height:0}}var o=a.left-(s.clientLeft||r.clientLeft||0),h=a.top-(s.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;o+=l.pageXOffset||s.scrollLeft||r.scrollLeft,h+=l.pageYOffset||s.scrollTop||r.scrollTop}return new at(o,h,a.width,a.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,r=e.documentElement;return new at(0,0,i.innerWidth||r.clientWidth,i.innerHeight||r.clientHeight)},getOffset:function(t,e){return kt.getBounds(t,e).getPoint()},getSize:function(t){return kt.getBounds(t,!0).getSize()},isInvisible:function(t){return kt.getSize(t).equals(new rt(0,0))},isInView:function(t){return!kt.isInvisible(t)&&kt.getViewportBounds(t).intersects(kt.getBounds(t,!0))},isInserted:function(t){return bt.body.contains(t)},getPrefixed:function(t,e){return t&&n(t,e)},setPrefixed:function(t,e,i){if(typeof e=="object")for(var r in e)n(t,r,!0,e[r]);else n(t,e,!0,i)}}},Nt={add:function(n,t){if(n)for(var e in t)for(var i=t[e],r=e.split(/[\s,]+/g),s=0,a=r.length;s<a;s++){var o=r[s],h=n===bt&&(o==="touchstart"||o==="touchmove")?{passive:!1}:!1;n.addEventListener(o,i,h)}},remove:function(n,t){if(n)for(var e in t)for(var i=t[e],r=e.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)n.removeEventListener(r[s],i,!1)},getPoint:function(n){var t=n.targetTouches?n.targetTouches.length?n.targetTouches[0]:n.changedTouches[0]:n;return new B(t.pageX||t.clientX+bt.documentElement.scrollLeft,t.pageY||t.clientY+bt.documentElement.scrollTop)},getTarget:function(n){return n.target||n.srcElement},getRelatedTarget:function(n){return n.relatedTarget||n.toElement},getOffset:function(n,t){return Nt.getPoint(n).subtract(kt.getOffset(t||Nt.getTarget(n)))}};Nt.requestAnimationFrame=new function(){var n=kt.getPrefixed(Ct,"requestAnimationFrame"),t=!1,e=[],i;function r(){var s=e;e=[];for(var a=0,o=s.length;a<o;a++)s[a]();t=n&&e.length,t&&n(r)}return function(s){e.push(s),n?t||(n(r),t=!0):i||(i=setInterval(r,1e3/60))}};var Tt=L.extend(re,{_class:"View",initialize:function n(t,e){function i(g){return e[g]||parseInt(e.getAttribute(g),10)}function r(){var g=kt.getSize(e);return g.isNaN()||g.isZero()?new rt(i("width"),i("height")):g}var s;if(Ct&&e){this._id=e.getAttribute("id"),this._id==null&&e.setAttribute("id",this._id="paper-view-"+n._id++),Nt.add(e,this._viewEvents);var a="none";if(kt.setPrefixed(e.style,{userDrag:a,userSelect:a,touchCallout:a,contentZooming:a,tapHighlightColor:"rgba(0,0,0,0)"}),Yt.hasAttribute(e,"resize")){var o=this;Nt.add(Ct,this._windowEvents={resize:function(){o.setViewSize(r())}})}if(s=r(),Yt.hasAttribute(e,"stats")&&typeof Stats<"u"){this._stats=new Stats;var h=this._stats.domElement,l=h.style,f=kt.getOffset(e);l.position="absolute",l.left=f.x+"px",l.top=f.y+"px",bt.body.appendChild(h)}}else s=new rt(e),e=null;this._project=t,this._scope=t._scope,this._element=e,this._pixelRatio||(this._pixelRatio=Ct&&Ct.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,n._views.push(this),n._viewsById[this._id]=this,(this._matrix=new yt)._owner=this,n._focused||(n._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Bt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Tt._focused===this&&(Tt._focused=null),Tt._views.splice(Tt._views.indexOf(this),1),delete Tt._viewsById[this._id];var n=this._project;return n._view===this&&(n._view=null),Nt.remove(this._element,this._viewEvents),Nt.remove(Ct,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:L.each(z._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(n){this[n]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(n){this._autoUpdate=n,n&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var n=this;Nt.requestAnimationFrame(function(){if(n._requested=!1,n._animate){n.requestUpdate();var t=n._element;(!kt.getPrefixed(bt,"hidden")||Yt.getAttribute(t,"keepalive")==="true")&&kt.isInView(t)&&n._handleFrame()}n._autoUpdate&&n.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Bt=this._scope;var n=Date.now()/1e3,t=this._last?n-this._last:0;this._last=n,this.emit("frame",new L({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(n,t){var e=this._frameItems;t?(e[n._id]={item:n,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete e[n._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(n){for(var t in this._frameItems){var e=this._frameItems[t];e.item.emit("frame",new L(n,{time:e.time+=n.delta,count:e.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=G},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var n=this._viewSize;return new Ot(n.width,n.height,this,"setViewSize")},setViewSize:function(){var n=rt.read(arguments),t=n.subtract(this._viewSize);t.isZero()||(this._setElementSize(n.width,n.height),this._viewSize.set(n),this._changed(),this.emit("resize",{size:n,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(n,t){var e=this._element;e&&(e.width!==n&&(e.width=n),e.height!==t&&(e.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new at(new B,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return kt.isInView(this._element)},isInserted:function(){return kt.isInserted(this._element)},getPixelSize:function(n){var t=this._element,e;if(t){var i=t.parentNode,r=bt.createElement("div");r.style.fontSize=n,i.appendChild(r),e=parseFloat(kt.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(n,t){return 0}},L.each(["rotate","scale","shear","skew"],function(n){var t=n==="rotate";this[n]=function(){var e=arguments,i=(t?L:B).read(e),r=B.read(e,0,{readNull:!0});return this.transform(new yt()[n](i,r||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var n=new yt;return this.transform(n.translate.apply(n,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var n=B.read(arguments);this.translate(this.getCenter().subtract(n))},getZoom:function(){var n=this._decompose().scaling;return(n.x+n.y)/2},setZoom:function(n){this.transform(new yt().scale(n/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(n){var t=this.getRotation();t!=null&&n!=null&&this.rotate(n-t)},getScaling:function(){var n=this._decompose().scaling;return new se(n.x,n.y,this,"setScaling")},setScaling:function(){var n=this.getScaling(),t=B.read(arguments,0,{clone:!0,readNull:!0});n&&t&&this.scale(t.x/n.x,t.y/n.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var n=this._matrix;n.set.apply(n,arguments)},transform:function(n){this._matrix.append(n)},scrollBy:function(){this.translate(B.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(B.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(B.read(arguments))},getEventPoint:function(n){return this.viewToProject(Nt.getOffset(n,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(n,t){bt&&typeof t=="string"&&(t=bt.getElementById(t));var e=Ct?vi:Tt;return new e(n,t)}}},new function(){if(!Ct)return;var n,t,e=!1,i=!1;function r(M){var A=Nt.getTarget(M);return A.getAttribute&&Tt._viewsById[A.getAttribute("id")]}function s(){var M=Tt._focused;if(!M||!M.isVisible()){for(var A=0,N=Tt._views.length;A<N;A++)if((M=Tt._views[A]).isVisible()){Tt._focused=t=M;break}}}function a(M,A,N){M._handleMouseEvent("mousemove",A,N)}var o=Ct.navigator,h,l,f;o.pointerEnabled||o.msPointerEnabled?(h="pointerdown MSPointerDown",l="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",l="touchmove",f="touchend touchcancel","ontouchstart"in Ct&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",l+=" mousemove",f+=" mouseup"));var g={},d={mouseout:function(M){var A=Tt._focused,N=Nt.getRelatedTarget(M);if(A&&(!N||N.nodeName==="HTML")){var V=Nt.getOffset(M,A._element),F=V.x,D=Math.abs,H=D(F),W=1<<25,X=H-W;V.x=D(X)<H?X*(F<0?-1:1):F,a(A,M,A.viewToProject(V))}},scroll:s};g[h]=function(M){var A=Tt._focused=r(M);e||(e=!0,A._handleMouseEvent("mousedown",M))},d[l]=function(M){var A=Tt._focused;if(!i){var N=r(M);N?A!==N&&(A&&a(A,M),n||(n=A),A=Tt._focused=t=N):t&&t===A&&(n&&!n.isInserted()&&(n=null),A=Tt._focused=n,n=null,s())}A&&a(A,M)},d[h]=function(){i=!0},d[f]=function(M){var A=Tt._focused;A&&e&&A._handleMouseEvent("mouseup",M),i=e=!1},Nt.add(bt,d),Nt.add(Ct,{load:s});var c=!1,v=!1,S={doubleclick:"click",mousedrag:"mousemove"},b=!1,x,m,_,p,y,C,P,I;function k(M,A,N,V,F,D,H){var W=!1,X;function tt(et,j){if(et.responds(j)){if(X||(X=new yi(j,V,F,A||et,D?F.subtract(D):null)),et.emit(j,X)&&(c=!0,X.prevented&&(v=!0),X.stopped))return W=!0}else{var K=S[j];if(K)return tt(et,K)}}for(;M&&M!==H&&!tt(M,N);)M=M._parent;return W}function T(M,A,N,V,F,D){return M._project.removeOn(N),v=c=!1,y&&k(y,null,N,V,F,D)||A&&A!==y&&!A.isDescendant(y)&&k(A,null,N==="mousedrag"?"mousemove":N,V,F,D,y)||k(M,y||A||M,N,V,F,D)}var O={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(M,A,N){var V=this._itemEvents,F=V.native[M],D=M==="mousemove",H=this._scope.tool,W=this;function X(ut){return V.virtual[ut]||W.responds(ut)||H&&H.responds(ut)}D&&e&&X("mousedrag")&&(M="mousedrag"),N||(N=this.getEventPoint(A));var tt=this.getBounds().contains(N),et=F&&tt&&W._project.hitTest(N,{tolerance:0,fill:!0,stroke:!0}),j=et&&et.item||null,K=!1,it={};if(it[M.substr(5)]=!0,F&&j!==p&&(p&&k(p,null,"mouseleave",A,N),j&&k(j,null,"mouseenter",A,N),p=j),b^tt&&(k(this,null,tt?"mouseenter":"mouseleave",A,N),K=!0),(tt||it.drag)&&!N.equals(m)&&(T(this,j,D?M:"mousemove",A,N,m),K=!0),b=tt,it.down&&tt||it.up&&x){if(T(this,j,M,A,N,x),it.down){if(I=j===C&&Date.now()-P<300,_=C=j,!v&&j){for(var nt=j;nt&&!nt.responds("mousedrag");)nt=nt._parent;nt&&(y=j)}x=N}else it.up&&(!v&&j===_&&(P=Date.now(),T(this,j,I?"doubleclick":"click",A,N,x),I=!1),_=y=null);b=!1,K=!0}m=N,K&&H&&(c=H._handleMouseEvent(M,A,N,it)||c),A.cancelable!==!1&&(c&&!it.move||it.down&&X("mouseup"))&&A.preventDefault()},_handleKeyEvent:function(M,A,N,V){var F=this._scope,D=F.tool,H;function W(X){X.responds(M)&&(Bt=F,X.emit(M,H=H||new mi(M,A,N,V)))}this.isVisible()&&(W(this),D&&D.responds(M)&&W(D))},_countItemEvent:function(M,A){var N=this._itemEvents,V=N.native,F=N.virtual;for(var D in O)V[D]=(V[D]||0)+(O[D][M]||0)*A;F[M]=(F[M]||0)+A},statics:{updateFocus:s,_resetState:function(){e=i=c=b=!1,n=t=x=m=_=p=y=C=P=I=null}}}}),vi=Tt.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof Ct.HTMLCanvasElement)){var i=rt.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+L.slice(arguments,1));e=ae.getCanvas(i)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(Yt.getAttribute(e,"hidpi"))){var s=Ct.devicePixelRatio||1,a=kt.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=s/a}Tt.call(this,t,e),this._needsUpdate=!0},remove:function n(){return this._context.restore(),n.base.call(this)},_setElementSize:function n(t,e){var i=this._pixelRatio;if(n.base.call(this,t*i,e*i),i!==1){var r=this._element,s=this._context;if(!Yt.hasAttribute(r,"resize")){var a=r.style;a.width=t+"px",a.height=e+"px"}s.restore(),s.save(),s.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function n(t){var e=Bt.agent,i;if(e&&e.firefox)i=n.base.call(this,t);else{var r=this._context,s=r.font;r.font=t+" serif",i=parseFloat(r.font),r.font=s}return i},getTextWidth:function(n,t){var e=this._context,i=e.font,r=0;e.font=n;for(var s=0,a=t.length;s<a;s++)r=Math.max(r,e.measureText(t[s]).width);return e.font=i,r},update:function(){if(!this._needsUpdate)return!1;var n=this._project,t=this._context,e=this._viewSize;return t.clearRect(0,0,e.width+1,e.height+1),n&&n.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),ze=L.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return We.modifiers}}),mi=ze.extend({_class:"KeyEvent",initialize:function(t,e,i,r){this.type=t,this.event=e,this.key=i,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),We=new function(){var n={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},e={},i={},r,s,a=new L({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var l=Bt&&Bt.agent;return l&&l.mac?this.meta:this.control}}});function o(l){var f=l.key||l.keyIdentifier;return f=/^U\+/.test(f)?String.fromCharCode(parseInt(f.substr(2),16)):/^Arrow[A-Z]/.test(f)?f.substr(5):f==="Unidentified"||f===G?String.fromCharCode(l.keyCode):f,n[f]||(f.length>1?L.hyphenate(f):f.toLowerCase())}function h(l,f,g,d){var c=Tt._focused,v;if(e[f]=l,l?i[f]=g:delete i[f],f.length>1&&(v=L.camelize(f))in a){a[v]=l;var S=Bt&&Bt.agent;if(v==="meta"&&S&&S.mac)if(l)r={};else{for(var b in r)b in i&&h(!1,b,r[b],d);r=null}}else l&&r&&(r[f]=g);c&&c._handleKeyEvent(l?"keydown":"keyup",d,f,g)}return Nt.add(bt,{keydown:function(l){var f=o(l),g=Bt&&Bt.agent;f.length>1||g&&g.chrome&&(l.altKey||g.mac&&l.metaKey||!g.mac&&l.ctrlKey)?h(!0,f,t[f]||(f.length>1?"":f),l):s=f},keypress:function(l){if(s){var f=o(l),g=l.charCode,d=g>=32?String.fromCharCode(g):f.length>1?"":f;f!==s&&(f=d.toLowerCase()),h(!0,f,d,l),s=null}},keyup:function(l){var f=o(l);f in i&&h(!1,f,i[f],l)}}),Nt.add(Ct,{blur:function(l){for(var f in i)h(!1,f,i[f],l)}}),{modifiers:a,isDown:function(l){return!!e[l]}}},yi=ze.extend({_class:"MouseEvent",initialize:function(t,e,i,r,s){this.type=t,this.event=e,this.point=i,this.target=r,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),je=ze.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(n,t){return n||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(n){this._point=n},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(n){this._lastPoint=n},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(n){this._downPoint=n},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(n){this._middlePoint=n},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(n){this._delta=n},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(n){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=n},getItem:function(){if(!this._item){var n=this.tool._scope.project.hitTest(this.getPoint());if(n){for(var t=n.item,e=t._parent;/^(Group|CompoundPath)$/.test(e._class);)t=e,e=e._parent;this._item=t}}return this._item},setItem:function(n){this._item=n},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}});be.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){be.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(n){this._minDistance=n,n!=null&&this._maxDistance!=null&&n>this._maxDistance&&(this._maxDistance=n)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(n){this._maxDistance=n,this._minDistance!=null&&n!=null&&n<this._minDistance&&(this._minDistance=n)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(n){this._minDistance=this._maxDistance=n},_handleMouseEvent:function(n,t,e,i){Bt=this._scope,i.drag&&!this.responds(n)&&(n="mousemove");var r=i.move||i.drag,s=this.responds(n),a=!1,o=this;function h(f,g){var d=e,c=r?o._point:o._downPoint||d;if(r){if(o._moveCount>=0&&d.equals(c))return!1;if(c&&(f!=null||g!=null)){var v=d.subtract(c),S=v.getLength();if(S<(f||0))return!1;g&&(d=c.add(v.normalize(Math.min(S,g))))}o._moveCount++}return o._point=d,o._lastPoint=c||d,i.down&&(o._moveCount=-1,o._downPoint=d,o._downCount++),!0}function l(){s&&(a=o.emit(n,new je(o,n,t))||a)}if(i.down)h(),l();else if(i.up)h(null,this._maxDistance),l();else if(s)for(;h(this._minDistance,this._maxDistance);)l();return a}});var ui=L.extend(re,{_class:"Tween",statics:{easings:new L({linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:-1+2*(2-n)*n},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}})},initialize:function n(t,e,i,r,s,a){this.object=t;var o=typeof s,h=o==="function";this.type=h?o:o==="string"?s:"linear",this.easing=h?s:n.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var l=e||i;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(e),this._to=l&&this._getState(i),a!==!1&&this.start()},then:function(n){return this._then=n,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(n){if(this.running){n>=1&&(n=1,this.running=!1);for(var t=this.easing(n),e=this._keys,i=function(f){return typeof f=="function"?f(t,n):f},r=0,s=e&&e.length;r<s;r++){var a=e[r],o=i(this._from[a]),h=i(this._to[a]),l=o&&h&&o.__add&&h.__add?h.__subtract(o).__multiply(t).__add(o):(h-o)*t+o;this._setProperty(this._parsedKeys[a],l)}this.responds("update")&&this.emit("update",new L({progress:n,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(n){var t=this._startTime,e=t?(n-t)/this.duration:0;t||(this._startTime=n),this.update(e)},_getState:function(n){for(var t=this._keys,e={},i=0,r=t.length;i<r;i++){var s=t[i],a=this._parsedKeys[s],o=this._getProperty(a),h;if(n){var l=this._resolveValue(o,n[s]);this._setProperty(a,l),h=this._getProperty(a),h=h&&h.clone?h.clone():h,this._setProperty(a,o)}else h=o&&o.clone?o.clone():o;e[s]=h}return e},_resolveValue:function(n,t){if(t){if(Array.isArray(t)&&t.length===2){var e=t[0];return e&&e.match&&e.match(/^[+\-\*\/]=/)?this._calculate(n,e[0],t[1]):t}else if(typeof t=="string"){var i=t.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(n,t[0],r)}}}return t},_calculate:function(n,t,e){return Bt.PaperScript.calculateBinary(n,t,e)},_parseKeys:function(n){for(var t={},e=0,i=n.length;e<i;e++){var r=n[e],s=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[r]=s.split("/")}return t},_getProperty:function(n,t){for(var e=this.object,i=0,r=n.length-(t||0);i<r&&e;i++)e=e[n[i]];return e},_setProperty:function(n,t){var e=this._getProperty(n,1);e&&(e[n[n.length-1]]=t)}}),oi={request:function(n){var t=new pt.XMLHttpRequest;return t.open((n.method||"get").toUpperCase(),n.url,L.pick(n.async,!0)),n.mimeType&&t.overrideMimeType(n.mimeType),t.onload=function(){var e=t.status;e===0||e===200?n.onLoad&&n.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var e=t.status,i='Could not load "'+n.url+'" (Status: '+e+")";if(n.onError)n.onError(i,e);else throw new Error(i)},t.send(null)}},ae=L.exports.CanvasProvider={canvases:[],getCanvas:function(n,t,e){if(!Ct)return null;var i,r=!0;typeof n=="object"&&(t=n.height,n=n.width),this.canvases.length?i=this.canvases.pop():(i=bt.createElement("canvas"),r=!1);var s=i.getContext("2d",e||{});if(!s)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===n&&i.height===t?r&&s.clearRect(0,0,n+1,t+1):(i.width=n,i.height=t),s.save(),i},getContext:function(n,t,e){var i=this.getCanvas(n,t,e);return i?i.getContext("2d",e||{}):null},release:function(n){var t=n&&n.canvas?n.canvas:n;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ue=new function(){var n=Math.min,t=Math.max,e=Math.abs,i,r,s,a,o,h,l,f,g,d,c;function v(y,C,P){return .2989*y+.587*C+.114*P}function S(y,C,P,T){var k=T-v(y,C,P);g=y+k,d=C+k,c=P+k;var T=v(g,d,c),O=n(g,d,c),M=t(g,d,c);if(O<0){var A=T-O;g=T+(g-T)*T/A,d=T+(d-T)*T/A,c=T+(c-T)*T/A}if(M>255){var N=255-T,V=M-T;g=T+(g-T)*N/V,d=T+(d-T)*N/V,c=T+(c-T)*N/V}}function b(y,C,P){return t(y,C,P)-n(y,C,P)}function x(y,C,P,I){var k=[y,C,P],T=t(y,C,P),O=n(y,C,P),M;O=O===y?0:O===C?1:2,T=T===y?0:T===C?1:2,M=n(O,T)===0?t(O,T)===1?2:1:0,k[T]>k[O]?(k[M]=(k[M]-k[O])*I/(k[T]-k[O]),k[T]=I):k[M]=k[T]=0,k[O]=0,g=k[0],d=k[1],c=k[2]}var m={multiply:function(){g=o*i/255,d=h*r/255,c=l*s/255},screen:function(){g=o+i-o*i/255,d=h+r-h*r/255,c=l+s-l*s/255},overlay:function(){g=o<128?2*o*i/255:255-2*(255-o)*(255-i)/255,d=h<128?2*h*r/255:255-2*(255-h)*(255-r)/255,c=l<128?2*l*s/255:255-2*(255-l)*(255-s)/255},"soft-light":function(){var y=i*o/255;g=y+o*(255-(255-o)*(255-i)/255-y)/255,y=r*h/255,d=y+h*(255-(255-h)*(255-r)/255-y)/255,y=s*l/255,c=y+l*(255-(255-l)*(255-s)/255-y)/255},"hard-light":function(){g=i<128?2*i*o/255:255-2*(255-i)*(255-o)/255,d=r<128?2*r*h/255:255-2*(255-r)*(255-h)/255,c=s<128?2*s*l/255:255-2*(255-s)*(255-l)/255},"color-dodge":function(){g=o===0?0:i===255?255:n(255,255*o/(255-i)),d=h===0?0:r===255?255:n(255,255*h/(255-r)),c=l===0?0:s===255?255:n(255,255*l/(255-s))},"color-burn":function(){g=o===255?255:i===0?0:t(0,255-(255-o)*255/i),d=h===255?255:r===0?0:t(0,255-(255-h)*255/r),c=l===255?255:s===0?0:t(0,255-(255-l)*255/s)},darken:function(){g=o<i?o:i,d=h<r?h:r,c=l<s?l:s},lighten:function(){g=o>i?o:i,d=h>r?h:r,c=l>s?l:s},difference:function(){g=o-i,g<0&&(g=-g),d=h-r,d<0&&(d=-d),c=l-s,c<0&&(c=-c)},exclusion:function(){g=o+i*(255-o-o)/255,d=h+r*(255-h-h)/255,c=l+s*(255-l-l)/255},hue:function(){x(i,r,s,b(o,h,l)),S(g,d,c,v(o,h,l))},saturation:function(){x(o,h,l,b(i,r,s)),S(g,d,c,v(o,h,l))},luminosity:function(){S(o,h,l,v(i,r,s))},color:function(){S(i,r,s,v(o,h,l))},add:function(){g=n(o+i,255),d=n(h+r,255),c=n(l+s,255)},subtract:function(){g=t(o-i,0),d=t(h-r,0),c=t(l-s,0)},average:function(){g=(o+i)/2,d=(h+r)/2,c=(l+s)/2},negation:function(){g=255-e(255-i-o),d=255-e(255-r-h),c=255-e(255-s-l)}},_=this.nativeModes=L.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(y){this[y]=!0},{}),p=ae.getContext(1,1,{willReadFrequently:!0});p&&(L.each(m,function(y,C){var P=C==="darken",I=!1;p.save();try{p.fillStyle=P?"#300":"#a00",p.fillRect(0,0,1,1),p.globalCompositeOperation=C,p.globalCompositeOperation===C&&(p.fillStyle=P?"#a00":"#300",p.fillRect(0,0,1,1),I=p.getImageData(0,0,1,1).data[0]!==P?170:51)}catch{}p.restore(),_[C]=I}),ae.release(p)),this.process=function(y,C,P,I,k){var T=C.canvas,O=y==="normal";if(O||_[y])P.save(),P.setTransform(1,0,0,1,0,0),P.globalAlpha=I,O||(P.globalCompositeOperation=y),P.drawImage(T,k.x,k.y),P.restore();else{var M=m[y];if(!M)return;for(var A=P.getImageData(k.x,k.y,T.width,T.height),N=A.data,V=C.getImageData(0,0,T.width,T.height).data,F=0,D=N.length;F<D;F+=4){i=V[F],o=N[F],r=V[F+1],h=N[F+1],s=V[F+2],l=N[F+2],a=V[F+3],f=N[F+3],M();var H=a*I/255,W=1-H;N[F]=H*g+W*o,N[F+1]=H*d+W*h,N[F+2]=H*c+W*l,N[F+3]=a*I+W*f}P.putImageData(A,k.x,k.y)}}},Zt=new function(){var n="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",e="http://www.w3.org/1999/xlink",i={href:e,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function r(o,h,l){return a(bt.createElementNS(n,o),h,l)}function s(o,h){var l=i[h],f=l?o.getAttributeNS(l,h):o.getAttribute(h);return f==="null"?null:f}function a(o,h,l){for(var f in h){var g=h[f],d=i[f];typeof g=="number"&&l&&(g=l.number(g)),d?o.setAttributeNS(d,f,g):o.setAttribute(f,g)}return o}return{svg:n,xmlns:t,xlink:e,create:r,get:s,set:a}},oe=L.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(n,t){return!t&&(n instanceof Ce||n instanceof Ut||n instanceof ke)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(n,t){var e=L.capitalize(t),i=n[2];this[t]={type:n[1],property:t,attribute:n[0],toSVG:i,fromSVG:i&&L.each(i,function(r,s){this[r]=s},{}),exportFilter:n[3],get:"get"+e,set:"set"+e}},{});new function(){var n;function t(m,_,p){var y=new L,C=m.getTranslation();if(_){var P;m.isInvertible()?(m=m._shiftless(),P=m._inverseTransform(C),C=null):P=new B,y[p?"cx":"x"]=P.x,y[p?"cy":"y"]=P.y}if(!m.isIdentity()){var I=m.decompose();if(I){var k=[],T=I.rotation,O=I.scaling,M=I.skewing;C&&!C.isZero()&&k.push("translate("+n.point(C)+")"),T&&k.push("rotate("+n.number(T)+")"),(!mt.isZero(O.x-1)||!mt.isZero(O.y-1))&&k.push("scale("+n.point(O)+")"),M.x&&k.push("skewX("+n.number(M.x)+")"),M.y&&k.push("skewY("+n.number(M.y)+")"),y.transform=k.join(" ")}else y.transform="matrix("+m.getValues().join(",")+")"}return y}function e(m,_){for(var p=t(m._matrix),y=m._children,C=Zt.create("g",p,n),P=0,I=y.length;P<I;P++){var k=y[P],T=b(k,_);if(T)if(k.isClipMask()){var O=Zt.create("clipPath");O.appendChild(T),v(k,O,"clip"),Zt.set(C,{"clip-path":"url(#"+O.id+")"})}else C.appendChild(T)}return C}function i(m,_){var p=t(m._matrix,!0),y=m.getSize(),C=m.getImage();return p.x-=y.width/2,p.y-=y.height/2,p.width=y.width,p.height=y.height,p.href=_.embedImages==!1&&C&&C.src||m.toDataURL(),Zt.create("image",p,n)}function r(m,_){var p=_.matchShapes;if(p){var y=m.toShape(!1);if(y)return s(y)}var C=m._segments,P=C.length,I,k=t(m._matrix);if(p&&P>=2&&!m.hasHandles())if(P>2){I=m._closed?"polygon":"polyline";for(var T=[],O=0;O<P;O++)T.push(n.point(C[O]._point));k.points=T.join(" ")}else{I="line";var M=C[0]._point,A=C[1]._point;k.set({x1:M.x,y1:M.y,x2:A.x,y2:A.y})}else I="path",k.d=m.getPathData(null,_.precision);return Zt.create(I,k,n)}function s(m){var _=m._type,p=m._radius,y=t(m._matrix,!0,_!=="rectangle");if(_==="rectangle"){_="rect";var C=m._size,P=C.width,I=C.height;y.x-=P/2,y.y-=I/2,y.width=P,y.height=I,p.isZero()&&(p=null)}return p&&(_==="circle"?y.r=p:(y.rx=p.width,y.ry=p.height)),Zt.create(_,y,n)}function a(m,_){var p=t(m._matrix),y=m.getPathData(null,_.precision);return y&&(p.d=y),Zt.create("path",p,n)}function o(m,_){var p=t(m._matrix,!0),y=m._definition,C=c(y,"symbol"),P=y._item,I=P.getStrokeBounds();return C||(C=Zt.create("symbol",{viewBox:n.rectangle(I)}),C.appendChild(b(P,_)),v(y,C,"symbol")),p.href="#"+C.id,p.x+=I.x,p.y+=I.y,p.width=I.width,p.height=I.height,p.overflow="visible",Zt.create("use",p,n)}function h(m){var _=c(m,"color");if(!_){var p=m.getGradient(),y=p._radial,C=m.getOrigin(),P=m.getDestination(),I;if(y){I={cx:C.x,cy:C.y,r:C.getDistance(P)};var k=m.getHighlight();k&&(I.fx=k.x,I.fy=k.y)}else I={x1:C.x,y1:C.y,x2:P.x,y2:P.y};I.gradientUnits="userSpaceOnUse",_=Zt.create((y?"radial":"linear")+"Gradient",I,n);for(var T=p._stops,O=0,M=T.length;O<M;O++){var A=T[O],N=A._color,V=N.getAlpha(),F=A._offset;I={offset:F??O/(M-1)},N&&(I["stop-color"]=N.toCSS(!0)),V<1&&(I["stop-opacity"]=V),_.appendChild(Zt.create("stop",I,n))}v(m,_,"color")}return"url(#"+_.id+")"}function l(m){var _=Zt.create("text",t(m._matrix,!0),n);return _.textContent=m._content,_}var f={Group:e,Layer:e,Raster:i,Path:r,Shape:s,CompoundPath:a,SymbolItem:o,PointText:l};function g(m,_,p,y){var C={},P=!y&&m.getParent(),I=[];return m._name!=null&&(C.id=m._name),L.each(oe,function(k){var T=k.get,O=k.type,M=m[T]();if(k.exportFilter?k.exportFilter(m,M):p.reduceAttributes==!1||!P||!L.equals(P[T](),M)){if(O==="color"&&M!=null){var A=M.getAlpha();A<1&&(C[k.attribute+"-opacity"]=A)}O==="style"?I.push(k.attribute+": "+M):C[k.attribute]=M==null?"none":O==="color"?M.gradient?h(M):M.toCSS(!0):O==="array"?M.join(","):O==="lookup"?k.toSVG[M]:M}}),I.length&&(C.style=I.join(";")),C.opacity===1&&delete C.opacity,m._visible||(C.visibility="hidden"),Zt.set(_,C,n)}var d;function c(m,_){return d||(d={ids:{},svgs:{}}),m&&d.svgs[_+"-"+(m._id||m.__id||(m.__id=Ae.get("svg")))]}function v(m,_,p){d||c();var y=d.ids[p]=(d.ids[p]||0)+1;_.id=p+"-"+y,d.svgs[p+"-"+(m._id||m.__id)]=_}function S(m,_){var p=m,y=null;if(d){p=m.nodeName.toLowerCase()==="svg"&&m;for(var C in d.svgs)y||(p||(p=Zt.create("svg"),p.appendChild(m)),y=p.insertBefore(Zt.create("defs"),p.firstChild)),y.appendChild(d.svgs[C]);d=null}return _.asString?new pt.XMLSerializer().serializeToString(p):p}function b(m,_,p){var y=f[m._class],C=y&&y(m,_);if(C){var P=_.onExport;P&&(C=P(m,C,_)||C);var I=JSON.stringify(m._data);I&&I!=="{}"&&I!=="null"&&C.setAttribute("data-paper-data",I)}return C&&g(m,C,_,p)}function x(m){return m||(m={}),n=new te(m.precision),m}z.inject({exportSVG:function(m){return m=x(m),S(b(this,m,!0),m)}}),Lt.inject({exportSVG:function(m){m=x(m);var _=this._children,p=this.getView(),y=L.pick(m.bounds,"view"),C=m.matrix||y==="view"&&p._matrix,P=C&&yt.read([C]),I=y==="view"?new at([0,0],p.getViewSize()):y==="content"?z._getBounds(_,P,{stroke:!0}).rect:at.read([y],0,{readNull:!0}),k={version:"1.1",xmlns:Zt.svg,"xmlns:xlink":Zt.xlink};I&&(k.width=I.width,k.height=I.height,(I.x||I.x===0||I.y||I.y===0)&&(k.viewBox=n.rectangle(I)));var T=Zt.create("svg",k,n),O=T;P&&!P.isIdentity()&&(O=T.appendChild(Zt.create("g",t(P),n)));for(var M=0,A=_.length;M<A;M++)O.appendChild(b(_[M],m,!0));return S(T,m)}})},new function(){var n={},t;function e(_,p,y,C,P,I){var k=Zt.get(_,p)||I,T=k==null?C?null:y?"":0:y?k:parseFloat(k);return/%\s*$/.test(k)?T/100*(P?1:t[/x|^width/.test(p)?"width":"height"]):T}function i(_,p,y,C,P,I,k){return p=e(_,p||"x",!1,C,P,I),y=e(_,y||"y",!1,C,P,k),C&&(p==null||y==null)?null:new B(p,y)}function r(_,p,y,C,P){return p=e(_,p||"width",!1,C,P),y=e(_,y||"height",!1,C,P),C&&(p==null||y==null)?null:new rt(p,y)}function s(_,p,y){return _==="none"?null:p==="number"?parseFloat(_):p==="array"?_?_.split(/[\s,]+/g).map(parseFloat):[]:p==="color"?b(_)||_:p==="lookup"?y[_]:_}function a(_,p,y,C){var P=_.childNodes,I=p==="clippath",k=p==="defs",T=new Kt,O=T._project,M=O._currentStyle,A=[];if(!I&&!k&&(T=S(T,_,C),O._currentStyle=T._style.clone()),C)for(var N=_.querySelectorAll("defs"),V=0,F=N.length;V<F;V++)x(N[V],y,!1);for(var V=0,F=P.length;V<F;V++){var D=P[V],H;D.nodeType===1&&!/^defs$/i.test(D.nodeName)&&(H=x(D,y,!1))&&!(H instanceof ee)&&A.push(H)}return T.addChildren(A),I&&(T=S(T.reduce(),_,C)),O._currentStyle=M,(I||k)&&(T.remove(),T=null),T}function o(_,p){for(var y=_.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),C=[],P=0,I=y.length;P<I;P+=2)C.push(new B(parseFloat(y[P]),parseFloat(y[P+1])));var k=new vt(C);return p==="polygon"&&k.closePath(),k}function h(_){return Ce.create(_.getAttribute("d"))}function l(_,p){var y=(e(_,"href",!0)||"").substring(1),C=p==="radialgradient",P;if(y)P=n[y].getGradient(),P._radial^C&&(P=P.clone(),P._radial=C);else{for(var I=_.childNodes,k=[],T=0,O=I.length;T<O;T++){var M=I[T];M.nodeType===1&&k.push(S(new Ze,M))}P=new Ne(k,C)}var A,N,V,F=e(_,"gradientUnits",!0)!=="userSpaceOnUse";C?(A=i(_,"cx","cy",!1,F,"50%","50%"),N=A.add(e(_,"r",!1,!1,F,"50%"),0),V=i(_,"fx","fy",!0,F)):(A=i(_,"x1","y1",!1,F,"0%","0%"),N=i(_,"x2","y2",!1,F,"100%","0%"));var D=S(new Rt(P,A,N,V),_);return D._scaleToBounds=F,null}var f={"#document":function(_,p,y,C){for(var P=_.childNodes,I=0,k=P.length;I<k;I++){var T=P[I];if(T.nodeType===1)return x(T,y,C)}},g:a,svg:a,clippath:a,polygon:o,polyline:o,path:h,lineargradient:l,radialgradient:l,image:function(_){var p=new Oe(e(_,"href",!0));return p.on("load",function(){var y=r(_);this.setSize(y);var C=i(_).add(y.divide(2));this._matrix.append(new yt().translate(C))}),p},symbol:function(_,p,y,C){return new ee(a(_,p,y,C),!0)},defs:a,use:function(_){var p=(e(_,"href",!0)||"").substring(1),y=n[p],C=i(_);return y?y instanceof ee?y.place(C):y.clone().translate(C):null},circle:function(_){return new Ut.Circle(i(_,"cx","cy"),e(_,"r"))},ellipse:function(_){return new Ut.Ellipse({center:i(_,"cx","cy"),radius:r(_,"rx","ry")})},rect:function(_){return new Ut.Rectangle(new at(i(_),r(_)),r(_,"rx","ry"))},line:function(_){return new vt.Line(i(_,"x1","y1"),i(_,"x2","y2"))},text:function(_){var p=new ai(i(_).add(i(_,"dx","dy")));return p.setContent(_.textContent.trim()||""),p},switch:a};function g(_,p,y,C){if(_.transform){for(var P=(C.getAttribute(y)||"").split(/\)\s*/g),I=new yt,k=0,T=P.length;k<T;k++){var O=P[k];if(!O)break;for(var M=O.split(/\(\s*/),A=M[0].trim(),N=M[1].split(/[\s,]+/g),V=0,F=N.length;V<F;V++)N[V]=parseFloat(N[V]);switch(A){case"matrix":I.append(new yt(N[0],N[1],N[2],N[3],N[4],N[5]));break;case"rotate":I.rotate(N[0],N[1]||0,N[2]||0);break;case"translate":I.translate(N[0],N[1]||0);break;case"scale":I.scale(N);break;case"skewX":I.skew(N[0],0);break;case"skewY":I.skew(0,N[0]);break}}_.transform(I)}}function d(_,p,y){var C=y==="fill-opacity"?"getFillColor":"getStrokeColor",P=_[C]&&_[C]();P&&P.setAlpha(parseFloat(p))}var c=L.set(L.each(oe,function(_){this[_.attribute]=function(p,y){if(p[_.set]&&(p[_.set](s(y,_.type,_.fromSVG)),_.type==="color")){var C=p[_.get]();if(C&&C._scaleToBounds){var P=p.getBounds();C.transform(new yt().translate(P.getPoint()).scale(P.getSize()))}}}},{}),{id:function(_,p){n[p]=_,_.setName&&_.setName(p)},"clip-path":function(_,p){var y=b(p);if(y)if(y=y.clone(),y.setClipMask(!0),_ instanceof Kt)_.insertChild(0,y);else return new Kt(y,_)},gradientTransform:g,transform:g,"fill-opacity":d,"stroke-opacity":d,visibility:function(_,p){_.setVisible&&_.setVisible(p==="visible")},display:function(_,p){_.setVisible&&_.setVisible(p!==null)},"stop-color":function(_,p){_.setColor&&_.setColor(p)},"stop-opacity":function(_,p){_._color&&_._color.setAlpha(parseFloat(p))},offset:function(_,p){if(_.setOffset){var y=p.match(/(.*)%$/);_.setOffset(y?y[1]/100:parseFloat(p))}},viewBox:function(_,p,y,C,P){var I=new at(s(p,"array")),k=r(C,null,null,!0),T,O;if(_ instanceof Kt){var M=k?k.divide(I.getSize()):1,O=new yt().scale(M).translate(I.getPoint().negate());T=_}else _ instanceof ee&&(k&&I.setSize(k),T=_._item);if(T){if(v(C,"overflow",P)!=="visible"){var A=new Ut.Rectangle(I);A.setClipMask(!0),T.addChild(A)}O&&T.transform(O)}}});function v(_,p,y){var C=_.attributes[p],P=C&&C.value;if(!P&&_.style){var I=L.camelize(p);P=_.style[I],!P&&y.node[I]!==y.parent[I]&&(P=y.node[I])}return P?P==="none"?null:P:G}function S(_,p,y){var C=p.parentNode,P={node:kt.getStyles(p)||{},parent:!y&&!/^defs$/i.test(C.tagName)&&kt.getStyles(C)||{}};return L.each(c,function(I,k){var T=v(p,k,P);_=T!==G&&I(_,T,k,p,P)||_}),_}function b(_){var p=_&&_.match(/\((?:["'#]*)([^"')]+)/),y=p&&p[1],C=y&&n[Ct?y.replace(Ct.location.href.split("#")[0]+"#",""):y];return C&&C._scaleToBounds&&(C=C.clone(),C._scaleToBounds=!0),C}function x(_,p,y){var C=_.nodeName.toLowerCase(),P=C!=="#document",I=bt.body,k,T,O;y&&P&&(t=Bt.getView().getSize(),t=r(_,null,null,!0)||t,k=Zt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),T=_.parentNode,O=_.nextSibling,k.appendChild(_),I.appendChild(k));var M=Bt.settings,A=M.applyMatrix,N=M.insertItems;M.applyMatrix=!1,M.insertItems=!1;var V=f[C],F=V&&V(_,C,p,y)||null;if(M.insertItems=N,M.applyMatrix=A,F){P&&!(F instanceof Kt)&&(F=S(F,_,y));var D=p.onImport,H=P&&_.getAttribute("data-paper-data");D&&(F=D(_,F,p)||F),p.expandShapes&&F instanceof Ut&&(F.remove(),F=F.toPath()),H&&(F._data=JSON.parse(H))}return k&&(I.removeChild(k),T&&(O?T.insertBefore(_,O):T.appendChild(_))),y&&(n={},F&&L.pick(p.applyMatrix,A)&&F.matrix.apply(!0,!0)),F}function m(_,p,y){if(!_)return null;p=typeof p=="function"?{onLoad:p}:p||{};var C=Bt,P=null;function I(M){try{var A=typeof M=="object"?M:new pt.DOMParser().parseFromString(M.trim(),"image/svg+xml");if(!A.nodeName)throw A=null,new Error("Unsupported SVG source: "+_);Bt=C,P=x(A,p,!0),(!p||p.insert!==!1)&&y._insertItem(G,P);var N=p.onLoad;N&&N(P,M)}catch(V){k(V)}}function k(M,A){var N=p.onError;if(N)N(M,A);else throw new Error(M)}if(typeof _=="string"&&!/^[\s\S]*</.test(_)){var T=bt.getElementById(_);T?I(T):oi.request({url:_,async:!0,onLoad:I,onError:k})}else if(typeof File<"u"&&_ instanceof File){var O=new FileReader;return O.onload=function(){I(O.result)},O.onerror=function(){k(O.error)},O.readAsText(_)}else I(_);return P}z.inject({importSVG:function(_,p){return m(_,p,this)}}),Lt.inject({importSVG:function(_,p){return this.activate(),m(_,p,this)}})};var Bt=new(Yt.inject(L.exports,{Base:L,Numerical:mt,Key:We,DomEvent:Nt,DomElement:kt,document:bt,window:Ct,Symbol:ee,PlacedSymbol:Be}));return Bt.agent.node&&Ui(Bt),typeof G=="function"&&G.amd?G("paper",Bt):xt&&(xt.exports=Bt),Bt}).call(rn,typeof self=="object"?self:null)})(Sn);var sr=Sn.exports;const ar=Jn({name:"Canvas",props:["canvasId"],data:()=>({path:null,scope:new nn.PaperScope,tool:sr.tool,pathData:""}),methods:{reset(){this.scope.project.activeLayer.removeChildren()},pathCreate(xt){return xt.activate(),new nn.Path({strokeColor:"#000000",strokeJoin:"round",strokeWidth:1.5})},createTool(xt){return xt.activate(),new nn.Tool},mouseDown(){const xt=this;this.tool=this.createTool(this.scope),this.tool.onMouseDown=pt=>{xt.path&&xt.reset(),xt.path=xt.pathCreate(xt.scope),xt.path.add(pt.point)},this.tool.onMouseDrag=pt=>{xt.path||(xt.path=xt.pathCreate(xt.scope)),xt.path.add(pt.point)},this.tool.onMouseUp=pt=>{var bt;xt.path||(xt.path=xt.pathCreate(xt.scope)),xt.path.simplify(10),console.log(xt.path.exportSVG({asString:!0}));const Ct=xt.path.exportSVG({asString:!0}).toString().split('d="')[1].split('"')[0];this.pathData=Ct,console.log(this.pathData.toString()),document.documentElement.style.setProperty("--pathData",`"${this.pathData}"`),(bt=document.getElementById("path"))==null||bt.setAttribute("d",this.pathData.toString())}},writeValue(xt){const pt=xt.target,G=pt.value,Ct=pt.name;console.log(G,Ct);const bt=document.getElementById("css-overrides"),L=document.getElementById("offset-anchor-x"),re=document.getElementById("offset-anchor-y"),Yt=document.getElementById("offset-distance"),be=document.getElementById("offset-pos"),Te=document.getElementById("offset-rot-x"),te=document.getElementById("offset-rot-y");if(isNaN(Number(Yt.value))){const Ae=Yt.value.split("%")[0];Yt.value=Ae,isNaN(Number(Ae))&&(console.error("Please enter a valid number or a number with a percent sign at the end."),Yt.value="0")}if(!bt)return;bt.innerHTML=`
            #motion-demo {
                /* user-editable settings */
                offset-anchor: ${L.value} ${re.value};
                offset-distance: ${Yt.value}%;
                offset-position: ${be.value};
                offset-rotate: ${Te.value} ${te.value};
            }
            `;const mt=document.getElementById("code-window");mt&&(mt.innerHTML=`
            #motion-demo {<br />
            offset-path: "${this.pathData.toString()}";<br/>
            offset-anchor: ${L.value} ${re.value};<br />
            offset-distance: ${Yt.value}%;<br />
            offset-position: ${be.value};<br />
            offset-rotate: ${Te.value} ${te.value};<br/>
            }
            `)}},mounted(){this.scope.setup("canvasId")}}),ur={class:"flex flex-row m-8 space-x-32"},or={class:"control-section flex-1 flex flex-col space-y-4"},hr={class:"flex flex-col space-y-2"},lr={class:"flex flex-col space-y-2"},fr={class:"flex flex-row space-x-4 w-full"},cr={class:"flex flex-col space-y-2"},dr={class:"flex flex-row space-x-4 w-full"},_r={class:"flex flex-col space-y-2"},gr={class:"flex flex-row space-x-4 w-full"},pr={class:"flex flex-col space-y-2"},vr={class:"flex flex-row space-x-4 w-full"},mr={class:"demo-output flex-1 flex flex-col justify-start items-center space-y-16 mt-12"},yr={class:"wrapper"},wr={xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"}};function xr(xt,pt,G,Ct,bt,L){return yn(),wn("div",ur,[Jt("div",or,[pt[15]||(pt[15]=ri('<div class="info-panel flex flex-col space-y-2"><div class="text-6xl font-medium">CSS Motion Path</div><div class="text-2xl font-semibold">About Motion Path</div><div class="text-sm font-light"> The CSS motion path module allows authors to animate any graphical object along a custom path. The idea is that when you want to animate an element moving along a path, you previously only had animating translation, position, etc. at your disposal, which wasn&#39;t ideal and only allowed for simple movements. With offset-path you can define a specific path of any shape you want. You then animate it along that path by animating offset-distance, and can choose to rotate it at any point using offset-rotate. </div></div><div class="text-xl font-semibold">Try Motion Path</div>',2)),Jt("div",hr,[pt[7]||(pt[7]=Jt("div",{class:"text-xl font-medium"},"Draw the offset path",-1)),Jt("canvas",{id:"canvasId",class:"canvas-style",ref:"canvas",onMousedown:pt[0]||(pt[0]=(...re)=>xt.mouseDown&&xt.mouseDown(...re))},null,544)]),Jt("div",lr,[pt[10]||(pt[10]=ri('<div class="text-xl font-medium"><div class="flex flex-col space-y-1"><div class="flex flex-row space-x-4"><div>Set the offset anchor</div><div class="text-sm font-light">[k, k]</div><div class="tooltip cursor-help"><i class="fas fa-circle-question" title="(keywords): Valid inputs for either are `center`, `left`, `top`, `right`, `bottom`"></i></div></div></div><p class="text-sm font-light"> The offset-anchor CSS property specifies the point inside the box of an element traveling along an offset-path that is actually moving along the path. Try changing these values and see what happens. </p></div><div class="text-base font-light">offset-anchor</div>',2)),Jt("div",fr,[Jt("select",{class:"text-black border border-black rounded-md px-2 py-1",id:"offset-anchor-x",onChange:pt[1]||(pt[1]=(...re)=>xt.writeValue&&xt.writeValue(...re))},pt[8]||(pt[8]=[ri('<option value="center">center</option><option value="left">left</option><option value="top">top</option><option value="right">right</option><option value="bottom">bottom</option>',5)]),32),Jt("select",{class:"text-black border border-black rounded-md px-2 py-1",id:"offset-anchor-y",onChange:pt[2]||(pt[2]=(...re)=>xt.writeValue&&xt.writeValue(...re))},pt[9]||(pt[9]=[ri('<option value="center">center</option><option value="left">left</option><option value="top">top</option><option value="right">right</option><option value="bottom">bottom</option>',5)]),32)])]),Jt("div",cr,[pt[11]||(pt[11]=ri('<div class="text-xl font-medium"><div class="flex flex-col space-y-1"><div class="flex flex-row space-x-4"><div>Set the offset distance</div><div class="text-sm font-light">[d]</div><div class="tooltip cursor-help"><i class="fas fa-circle-question" title="(decimal): Valid inputs are any decimal value or whole number"></i></div></div></div><p class="text-sm font-light"> The offset-distance CSS property specifies a position along an offset-path for an element to be placed. Try setting this value to <b class="font-bold">50</b> and see what happens. </p></div><div class="text-base font-light">offset-distance</div>',2)),Jt("div",dr,[Jt("input",{type:"number",step:"0.01",class:"bg-transparent border w-full border-black rounded-md text-center",name:"offset-distance",id:"offset-distance",placeholder:"Set an offset-distance",value:"25",onChange:pt[3]||(pt[3]=(...re)=>xt.writeValue&&xt.writeValue(...re))},null,32)])]),Jt("div",_r,[pt[13]||(pt[13]=ri('<div class="text-xl font-medium"><div class="flex flex-col space-y-1"><div class="flex flex-row space-x-4"><div>Set the offset position</div><div class="text-sm font-light">[k]</div><div class="tooltip cursor-help"><i class="fas fa-circle-question" title="(keyword): Valid inputs are `auto`, `normal`, `center`, `left`, `top`, `right`, `bottom`"></i></div></div></div><p class="text-sm font-light"> The offset-position CSS property is what sets the initial position of the element along the offset path. This property is typically used in combination with the offset-path property to create a motion effect. </p></div><div class="text-base font-light">offset-position</div>',2)),Jt("div",gr,[Jt("select",{class:"text-black border border-black rounded-md px-2 py-1 w-full text-center",id:"offset-pos",onChange:pt[4]||(pt[4]=(...re)=>xt.writeValue&&xt.writeValue(...re))},pt[12]||(pt[12]=[ri('<option value="center">auto</option><option value="center">normal</option><option value="center">center</option><option value="left">left</option><option value="top">top</option><option value="right">right</option><option value="bottom">bottom</option>',7)]),32)])]),Jt("div",pr,[pt[14]||(pt[14]=ri('<div class="text-xl font-medium"><div class="flex flex-col space-y-1"><div class="flex flex-row space-x-4"><div>Set the offset rotation</div><div class="text-sm font-light">[x | k, y | k]</div><div class="tooltip cursor-help"><i class="fas fa-circle-question" title="(x-values or keywords): Valid inputs are `auto`, `&lt;angle&gt;`, `auto &lt;angle&gt;` or `reverse`"></i></div></div></div><p class="text-sm font-light"> The first value is the x-axis rotation and the second value is the y-axis rotation. What this does is set the rotation of the object traversing across the offet path. Try setting both values to <b class="font-bold">auto</b> and see what happens. </p></div><div class="text-base font-light">offset-rotate</div>',2)),Jt("div",vr,[Jt("input",{type:"text",class:"bg-transparent border border-black rounded-md text-center w-full",name:"offset-rot-x",id:"offset-rot-x",placeholder:"Set a value of either 'auto' or <deg>deg",value:"auto",onInput:pt[5]||(pt[5]=(...re)=>xt.writeValue&&xt.writeValue(...re))},null,32),Jt("input",{type:"text",class:"bg-transparent border border-black rounded-md text-center w-full",name:"offset-rot-y",id:"offset-rot-y",placeholder:"Set a value of either 'auto' or <deg>deg",value:"60deg",onInput:pt[6]||(pt[6]=(...re)=>xt.writeValue&&xt.writeValue(...re))},null,32)])])]),Jt("div",mr,[Jt("div",yr,[pt[17]||(pt[17]=Jt("div",{class:"text-xl font-semibold m-4 text-gray-500 absolute top-0"},"Output window",-1)),pt[18]||(pt[18]=Jt("div",{id:"motion-demo"},null,-1)),(yn(),wn("svg",wr,pt[16]||(pt[16]=[Jt("path",{id:"path",class:"path",d:"M180,110 C180,220 320,220 320,110",fill:"none",stroke:"#5e5e7d","stroke-width":"3","stroke-miterlimit":"10"},null,-1)])))]),pt[19]||(pt[19]=Jt("div",{class:"generated-code block w-full py-4"},[Jt("div",{class:"text-xl font-semibold"},"Generated code"),Jt("div",{class:"code-window text-white bg-gray-800 py-6 px-4 w-full h-full my-4 rounded-lg",id:"code-window"},[pi(" #motion-demo {"),Jt("br"),pi(" /* user-editable settings */"),Jt("br"),pi(" offset-anchor: center center;"),Jt("br"),pi(" offset-distance: 25%;"),Jt("br"),pi(" offset-position: auto;"),Jt("br"),pi(" offset-rotate: auto 60deg;"),Jt("br"),pi(" } ")])],-1))])])}const Sr=Yn(ar,[["render",xr]]);export{Sr as default};
